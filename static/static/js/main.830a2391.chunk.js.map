{"version":3,"sources":["ConfirmAlert.js","withDnDContext.js","OnlyAlert.js","ScheduleControlPopup.js","Calendar.js","index.js"],"names":["ConfirmAlert","state","message","_this","props","onConfirm","onCancel","react_default","a","createElement","class","index_es","icon","faExclamationTriangle","style","color","this","onClick","Component","DragDropContext","HTML5Backend","OnlyAlert","onOK","ScheduleControlPopup","exitPopup","e","target","document","getElementById","closeButtonClicked","event_rrule","includes","checked","substring","length","device_type","Fragment","id","defaultValue","event_name","type","faClock","ScheduleControlPopup_ScheduleControlTimepicker","time","event_start","display","marginRight","marginLeft","event_end","ScheduleControlPopup_ScheduleControlRepeat","fontWeight","ScheduleControlPopup_ScheduleControlApply","devices","okButtonClicked","deleteButtonClicked","ScheduleControlTimepicker","hour","Number","am_pm","toString","minute","value","ScheduleControlRepeat","htmlFor","width","name","ScheduleControlApply","map","device","ScheduleControlPopup_ScheduleControlApplyItem","ScheduleControlApplyItem","replace","from24to12","new_hour","am_or_pm","finalTime","formatForDatabaseAdd","book","current_user_id","rrule","user_id","event_id","start","end","title","device_type_id","resourceId","formatForDatabaseUpdate","n","indexOf","database_id","processHourInput","getDates","today","Date","mondayDate","tuesdayDate","wednesdayDate","thursdayDate","fridayDate","saturdayDate","sundayDate","getDay","setDate","getDate","getFullYear","getMonth","withDragDropContext","Calendar","Object","classCallCheck","_super","call","refetchBonusAchievementsData","fetch","then","response","json","data","setState","achievements_books","setTimeout","refetchWeeklyAchievementsData","weekly_achievements_books","refetchPointsWalletData","points_wallet_books","updateAchievementsBooks","newBook","method","headers","Content-Type","body","JSON","stringify","newBooks","assign","updateWeeklyAchievementsBooks","updatePointsWalletBooks","handleAchievementsUpdate","handleWeeklyAchievementsUpdate","handlePointsWalletUpdate","handleAchievementsFormSubmit","handleWeeklyAchievementsFormSubmit","handlePointsWalletFormSubmit","isNonWorkingTime","schedulerData","getScrollSpecialMoment","startMoment","endMoment","date","moment","eventClicked","event","slotName","getSlotById","ReactDOM","render","src_ScheduleControlPopup","_step","hasConflict","conflictedEvents","plugload_option","querySelectorAll","repeat_option","new_days_to_loop_over","_iterator","createForOfIteratorHelper","s","done","repeat_day","push","err","f","events","forEach","eStart","eEnd","eRrule","existing_days_to_loop_over","_step2","new_start_for_this","new_end_for_this","existing_start_for_this","existing_end_for_this","_iterator2","new_day","_step3","_iterator3","existing_day","_step4","_iterator4","plugload","resouceId","_step5","_iterator5","_step6","day","_iterator6","current_plugload_conflicted","concat","alert","updateEventStart","window","calendar","updateEventEnd","newFreshId","item","newEvent","bgColor","showPopover","onAddClick","addEvent","viewModel","onUpdateClick","refetchData","unmountComponentAtNode","schedule_based","objectSpread2","first_schedule","points","presencecontrol","key","onDeleteClick","removeEvent","slotId","format","toUpperCase","_step7","_iterator7","_step8","_iterator8","_step9","_iterator9","_step10","_iterator10","_step11","_iterator11","_step12","_iterator12","anotherNewEvent","newStart","_step13","_iterator13","_step14","_iterator14","_step15","_iterator15","_step16","_iterator16","_step17","_iterator17","_step18","_iterator18","newEnd","_step19","_iterator19","_step20","_iterator20","_step21","_iterator21","_step22","_iterator22","_step23","_iterator23","_step24","_iterator24","moveEvent","_step25","_iterator25","_step26","_iterator26","_step27","_iterator27","_step28","_iterator28","_step29","_iterator29","_step30","_iterator30","conflictOccurred","action","console","log","src_OnlyAlert","SchedulerData","ViewTypes","Day","checkConflict","recurringEventsEnabled","scrollToSpecialMomentEnabled","crossResourceMove","getScrollSpecialMomentFunc","isNonWorkingTimeFunc","setResources","setEvents","assertThisInitialized","lib_default","eventItemClick","compare","b","comparison","RemoteControlDashboard","books","fetchData","sort","updateBook","src_RemoteControlList","float","RemoteControlList","_this2","src_RemoteControlEditableItem","device_state","marginBottom","src_RemoteToggleButton","defaultChecked","margin","RemoteControlEditableItem","handleUpdate","_this3","_this4","src_RemoteControlItem","onFormSubmit","RemoteControlItem","_this5","handleFormSubmit","onConfirm1","to_be_confirmed","Main","first_remote","wanted_id","className","click","onConfirm2","onCancel1","to_be_cancelled","onCancel2","onChange","preventDefault","childNodes","src_ConfirmAlert","_this6","remote_control_outer_ring","remote_control_image","textAlign","src","alt","data-yes","data-no","RemoteToggleButton","_this7","_super5","master","Small","Name","disabled","sort_events","src_RemoteControlDashboard","ScheduleControlDashboard","dates","chosen_day","_this8","events_datas","input","eventId","finalStart","finalEnd","_getDates","_getDates2","slicedToArray","charAt","createNewBook","csrftoken","cookieValue","cookie","cookies","split","i","trim","decodeURIComponent","getCookie","X-CSRFToken","deleteBook","bookId","filter","removeCalendarHeader","removeChild","addLines","j","getElementsByClassName","borderRight","chooseMonday","src_Calendar","chooseTuesday","chooseWednesday","chooseThursday","chooseFriday","chooseSaturday","chooseSunday","_this9","_getDates3","_getDates4","src_ScheduleControlItem","ScheduleControlItem","today_date","src_ScheduleControlDashboard","PresenceControlDashboard","_this10","_super8","_this11","src_PresenceControlList","PresenceControlList","_this12","src_PresenceControlEditableItem","presence_setting","PresenceControlEditableItem","_this13","_this14","src_PresenceControlItem","PresenceControlItem","_this15","first_presence","handleSettingUpdate","evt","src_PresenceControlPopup","handleOtherUpdate","handleEnterClick","cancelButtonClicked","keyCode","handlePresenceIconClick","display_value","display_text","presence_control_outer_ring","presence_control_image","exitClick","height","overflowY","position","label","PresenceControlPopup","_this16","onKeyUp","src_PresenceControlDashboard","remotecontrolelement","infoiconremote","scheduleelement","infoiconschedule","presenceelement","infoiconpresence","onload","remotecontrolelemRect","getBoundingClientRect","infoiconremoteRect","offsetremote","right","onmouseover","onmouseout","scheduleelemRect","infoiconscheduleRect","offsetschedule","presenceelemRect","infoiconpresenceRect","offsetpresence","onresize","isChromium","chrome","winNav","navigator","vendorName","vendor","isOpera","opr","isIEedge","userAgent","match","onkeydown","ctrlKey","which"],"mappings":"kQAgCeA,8MA1BXC,MAAQ,CACJC,QAASC,EAAKC,MAAMF,QACpBG,UAAWF,EAAKC,MAAMC,UACtBC,SAAUH,EAAKC,MAAME,iEAGrB,OACIC,EAAAC,EAAAC,cAAA,OAAKC,MAAM,yBACPH,EAAAC,EAAAC,cAAA,OAAKC,MAAM,uBACPH,EAAAC,EAAAC,cAAA,OAAKC,MAAM,yBACPH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAiBC,KAAMC,IAAuBH,MAAM,uBACpDH,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACC,MAAM,UAAjB,IAA6BC,KAAKf,MAAMC,QAAxC,KACAK,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKC,MAAM,yBACPH,EAAAC,EAAAC,cAAA,UAAQC,MAAM,uBAAuBO,QAASD,KAAKf,MAAMK,UAAzD,YACAC,EAAAC,EAAAC,cAAA,UAAQC,MAAM,wBAAwBO,QAASD,KAAKf,MAAMI,WAA1D,wBAlBDa,kFCAZC,4BAAgBC,KCyBhBC,8MAxBXpB,MAAQ,CACJC,QAASC,EAAKC,MAAMF,QACpBoB,KAAMnB,EAAKC,MAAMkB,6DAGjB,OACIf,EAAAC,EAAAC,cAAA,OAAKC,MAAM,yBACPH,EAAAC,EAAAC,cAAA,OAAKC,MAAM,uBACPH,EAAAC,EAAAC,cAAA,OAAKC,MAAM,yBACPH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAiBC,KAAMC,IAAuBH,MAAM,uBACpDH,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACC,MAAM,UAAjB,IAA6BC,KAAKf,MAAMC,QAAxC,KACAK,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKC,MAAM,yBACPH,EAAAC,EAAAC,cAAA,UAAQC,MAAM,WAAWO,QAASD,KAAKf,MAAMqB,MAA7C,mBAhBJJ,aCClBK,8MA2DFC,UAAY,SAACC,GACLA,EAAEC,SAAWC,SAASC,eAAe,2BACrCzB,EAAKC,MAAMyB,wFAzDXb,KAAKZ,MAAM0B,YAAYC,SAAS,0BAChCJ,SAASC,eAAe,0BAA0BI,SAAU,GAE5DhB,KAAKZ,MAAM0B,YAAYG,UAAU,GAAGjB,KAAKZ,MAAM0B,YAAYI,QAAQH,SAAS,QAE5EJ,SAASC,eAAe,wBAAwBI,SAAU,GAE1DhB,KAAKZ,MAAM0B,YAAYG,UAAU,GAAGjB,KAAKZ,MAAM0B,YAAYI,QAAQH,SAAS,QAE5EJ,SAASC,eAAe,yBAAyBI,SAAU,GAE3DhB,KAAKZ,MAAM0B,YAAYG,UAAU,GAAGjB,KAAKZ,MAAM0B,YAAYI,QAAQH,SAAS,QAE5EJ,SAASC,eAAe,2BAA2BI,SAAU,GAE7DhB,KAAKZ,MAAM0B,YAAYG,UAAU,GAAGjB,KAAKZ,MAAM0B,YAAYI,QAAQH,SAAS,QAE5EJ,SAASC,eAAe,0BAA0BI,SAAU,GAE5DhB,KAAKZ,MAAM0B,YAAYG,UAAU,GAAGjB,KAAKZ,MAAM0B,YAAYI,QAAQH,SAAS,QAE5EJ,SAASC,eAAe,wBAAwBI,SAAU,GAE1DhB,KAAKZ,MAAM0B,YAAYG,UAAU,GAAGjB,KAAKZ,MAAM0B,YAAYI,QAAQH,SAAS,QAE5EJ,SAASC,eAAe,0BAA0BI,SAAU,GAE5DhB,KAAKZ,MAAM0B,YAAYG,UAAU,GAAGjB,KAAKZ,MAAM0B,YAAYI,QAAQH,SAAS,QAE5EJ,SAASC,eAAe,wBAAwBI,SAAU,GAI1DhB,KAAKZ,MAAM+B,YAAYJ,SAAS,aAEhCJ,SAASC,eAAe,wBAAwBI,SAAU,GAE1DhB,KAAKZ,MAAM+B,YAAYJ,SAAS,aAEhCJ,SAASC,eAAe,wBAAwBI,SAAU,GAE1DhB,KAAKZ,MAAM+B,YAAYJ,SAAS,YAEhCJ,SAASC,eAAe,uBAAuBI,SAAU,GAEzDhB,KAAKZ,MAAM+B,YAAYJ,SAAS,eAEhCJ,SAASC,eAAe,yBAAyBI,SAAU,GAE3DhB,KAAKZ,MAAM+B,YAAYJ,SAAS,SAEhCJ,SAASC,eAAe,oBAAoBI,SAAU,oCAW1D,OACIzB,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACI7B,EAAAC,EAAAC,cAAA,OAAK4B,GAAG,yBAAyBpB,QAASD,KAAKQ,WAC3CjB,EAAAC,EAAAC,cAAA,OAAK4B,GAAG,kBACJ9B,EAAAC,EAAAC,cAAA,KAAG4B,GAAG,wBAAN,IAA+BrB,KAAKZ,MAAM+B,YAA1C,KACA5B,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,uBAAuBpB,QAASD,KAAKZ,MAAMyB,oBAAtD,UACAtB,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,SAAO4B,GAAG,sBAAsBC,aAActB,KAAKZ,MAAMmC,WAAWN,UAAU,EAAEjB,KAAKZ,MAAMmC,WAAWL,OAAO,IAAKM,KAAK,SACvHjC,EAAAC,EAAAC,cAAA,OAAK4B,GAAG,uBACJ9B,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAiBC,KAAM6B,IAAS3B,MAAO,CAACC,MAAM,aAC9CR,EAAAC,EAAAC,cAACiC,EAAD,CAA2BF,KAAK,QAAQG,KAAM3B,KAAKZ,MAAMwC,YAAYX,UAAUjB,KAAKZ,MAAMwC,YAAYV,OAAO,EAAGlB,KAAKZ,MAAMwC,YAAYV,UACvI3B,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAAC+B,QAAS,eAAgBC,YAAY,OAAQC,WAAW,QAAnE,OACAxC,EAAAC,EAAAC,cAACiC,EAAD,CAA2BF,KAAK,MAAMG,KAAM3B,KAAKZ,MAAM4C,UAAUf,UAAUjB,KAAKZ,MAAM4C,UAAUd,OAAO,EAAGlB,KAAKZ,MAAM4C,UAAUd,WAEnI3B,EAAAC,EAAAC,cAAA,OAAK4B,GAAG,yBACJ9B,EAAAC,EAAAC,cAACwC,EAAD,OAEJ1C,EAAAC,EAAAC,cAAA,OAAK4B,GAAG,wBACJ9B,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACoC,WAAW,SAAtB,oBACA3C,EAAAC,EAAAC,cAAC0C,EAAD,CAAsBC,QAAS,CAAC,UAAW,UAAW,SAAU,MAAO,gBAE3E7C,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,oBAAoBpB,QAASD,KAAKZ,MAAMiD,iBAAnD,QACA9C,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,wBAAwBpB,QAASD,KAAKZ,MAAMkD,qBAAvD,sBAzFWpC,aAiG7BqC,yKAEE,IAAIC,EAAOxC,KAAKZ,MAAMuC,KAAKV,UAAU,EAAE,GACvC,GAAIwB,OAAOD,IAAS,GAChB,IAAIE,EAAQ,UAEZA,EAAQ,KAERD,OAAOD,GAAQ,IAAMC,OAAOD,GAAQ,GACpCA,EAAO,KAAOC,OAAOD,GAAM,IAAIG,WAE3BF,OAAOD,IAAS,GAChBA,GAAQC,OAAOD,GAAM,IAAIG,WAEZ,OAATH,IACAA,EAAO,MAInB,IAAII,EAAS5C,KAAKZ,MAAMuC,KAAKV,UAAU,EAAE,GAIzC,OACI1B,EAAAC,EAAAC,cAAA,OAAK4B,GAAIrB,KAAKZ,MAAMoC,KAAO,QACvBjC,EAAAC,EAAAC,cAAA,UAAQ4B,GAAIrB,KAAKZ,MAAMoC,KAAO,OAAQF,aAAckB,GAChDjD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,OACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,OACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,OACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,OACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,OACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,OACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,OACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,OACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,OACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,QACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,QACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,SAEJtD,EAAAC,EAAAC,cAAA,QAAMK,MAAO,CAACiC,WAAW,QAASD,YAAY,QAA9C,OACAvC,EAAAC,EAAAC,cAAA,UAAQ4B,GAAIrB,KAAKZ,MAAMoC,KAAO,SAAUF,aAAcsB,GAClDrD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,QACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,QACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,QACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,SAEJtD,EAAAC,EAAAC,cAAA,UAAQ4B,GAAIrB,KAAKZ,MAAMoC,KAAO,OAAQF,aAAcoB,GAChDnD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,QACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,iBAhDoB3C,aAuDlC4C,yKAEE,OACIvD,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACI7B,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACoC,WAAW,SAAtB,aACA3C,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLH,GAAG,yBACHwB,MAAM,YACN5C,QAAS,SAASQ,GACVA,EAAEC,OAAOM,SACTL,SAASC,eAAe,wBAAwBI,SAAU,EAC1DL,SAASC,eAAe,yBAAyBI,SAAU,EAC3DL,SAASC,eAAe,2BAA2BI,SAAU,EAC7DL,SAASC,eAAe,0BAA0BI,SAAU,EAC5DL,SAASC,eAAe,wBAAwBI,SAAU,EAC1DL,SAASC,eAAe,0BAA0BI,SAAU,EAC5DL,SAASC,eAAe,wBAAwBI,SAAU,IAE1DL,SAASC,eAAe,wBAAwBI,SAAU,EAC1DL,SAASC,eAAe,yBAAyBI,SAAU,EAC3DL,SAASC,eAAe,2BAA2BI,SAAU,EAC7DL,SAASC,eAAe,0BAA0BI,SAAU,EAC5DL,SAASC,eAAe,wBAAwBI,SAAU,EAC1DL,SAASC,eAAe,0BAA0BI,SAAU,EAC5DL,SAASC,eAAe,wBAAwBI,SAAU,MAItEzB,EAAAC,EAAAC,cAAA,SAAOsD,QAAQ,yBAAyBjD,MAAO,CAACiC,WAAY,QAA5D,eACAxC,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAAC+B,QAAQ,eAAgBmB,MAAM,UACvCzD,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLyB,KAAK,uBACLJ,MAAM,SACNxB,GAAG,uBACHpB,QAAS,SAASQ,GACTA,EAAEC,OAAOM,QAGNL,SAASC,eAAe,yBAAyBI,SAAWL,SAASC,eAAe,2BAA2BI,SAC/GL,SAASC,eAAe,0BAA0BI,SAAWL,SAASC,eAAe,wBAAwBI,SAC7GL,SAASC,eAAe,0BAA0BI,SAAWL,SAASC,eAAe,wBAAwBI,UACzGL,SAASC,eAAe,0BAA0BI,SAAU,GALpEL,SAASC,eAAe,0BAA0BI,SAAU,KAUxEzB,EAAAC,EAAAC,cAAA,SAAOK,MAAO,CAACiC,WAAY,QAA3B,aAEJxC,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAAC+B,QAAQ,eAAgBmB,MAAM,UACvCzD,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLyB,KAAK,uBACLJ,MAAM,UACNxB,GAAG,wBACHpB,QAAS,SAASQ,GACTA,EAAEC,OAAOM,QAGNL,SAASC,eAAe,wBAAwBI,SAAWL,SAASC,eAAe,2BAA2BI,SAC9GL,SAASC,eAAe,0BAA0BI,SAAWL,SAASC,eAAe,wBAAwBI,SAC7GL,SAASC,eAAe,0BAA0BI,SAAWL,SAASC,eAAe,wBAAwBI,UACzGL,SAASC,eAAe,0BAA0BI,SAAU,GALpEL,SAASC,eAAe,0BAA0BI,SAAU,KAUxEzB,EAAAC,EAAAC,cAAA,SAAOK,MAAO,CAACiC,WAAY,QAA3B,cAEJxC,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAAC+B,QAAQ,eAAgBmB,MAAM,UACvCzD,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLyB,KAAK,uBACLJ,MAAM,YACNxB,GAAG,0BACHpB,QAAS,SAASQ,GACTA,EAAEC,OAAOM,QAGNL,SAASC,eAAe,wBAAwBI,SAAWL,SAASC,eAAe,yBAAyBI,SAC5GL,SAASC,eAAe,0BAA0BI,SAAWL,SAASC,eAAe,wBAAwBI,SAC7GL,SAASC,eAAe,0BAA0BI,SAAWL,SAASC,eAAe,wBAAwBI,UACzGL,SAASC,eAAe,0BAA0BI,SAAU,GALpEL,SAASC,eAAe,0BAA0BI,SAAU,KAUxEzB,EAAAC,EAAAC,cAAA,SAAOK,MAAO,CAACiC,WAAY,QAA3B,gBAEJxC,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAAC+B,QAAQ,eAAgBmB,MAAM,UACvCzD,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLyB,KAAK,uBACLJ,MAAM,WACNxB,GAAG,yBACHpB,QAAS,SAASQ,GACTA,EAAEC,OAAOM,QAGNL,SAASC,eAAe,wBAAwBI,SAAWL,SAASC,eAAe,yBAAyBI,SAC5GL,SAASC,eAAe,2BAA2BI,SAAWL,SAASC,eAAe,wBAAwBI,SAC9GL,SAASC,eAAe,0BAA0BI,SAAWL,SAASC,eAAe,wBAAwBI,UACzGL,SAASC,eAAe,0BAA0BI,SAAU,GALpEL,SAASC,eAAe,0BAA0BI,SAAU,KAUxEzB,EAAAC,EAAAC,cAAA,SAAOK,MAAO,CAACiC,WAAY,QAA3B,eAEJxC,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAAC+B,QAAQ,eAAgBmB,MAAM,UACvCzD,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLyB,KAAK,uBACLJ,MAAM,SACNxB,GAAG,uBACHpB,QAAS,SAASQ,GACTA,EAAEC,OAAOM,QAGNL,SAASC,eAAe,wBAAwBI,SAAWL,SAASC,eAAe,yBAAyBI,SAC5GL,SAASC,eAAe,2BAA2BI,SAAWL,SAASC,eAAe,0BAA0BI,SAChHL,SAASC,eAAe,0BAA0BI,SAAWL,SAASC,eAAe,wBAAwBI,UACzGL,SAASC,eAAe,0BAA0BI,SAAU,GALpEL,SAASC,eAAe,0BAA0BI,SAAU,KAUxEzB,EAAAC,EAAAC,cAAA,SAAOK,MAAO,CAACiC,WAAY,QAA3B,aAEJxC,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAAC+B,QAAQ,eAAgBmB,MAAM,UACvCzD,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLyB,KAAK,uBACLJ,MAAM,WACNxB,GAAG,yBACHpB,QAAS,SAASQ,GACTA,EAAEC,OAAOM,QAGNL,SAASC,eAAe,wBAAwBI,SAAWL,SAASC,eAAe,yBAAyBI,SAC5GL,SAASC,eAAe,2BAA2BI,SAAWL,SAASC,eAAe,0BAA0BI,SAChHL,SAASC,eAAe,wBAAwBI,SAAWL,SAASC,eAAe,wBAAwBI,UACvGL,SAASC,eAAe,0BAA0BI,SAAU,GALpEL,SAASC,eAAe,0BAA0BI,SAAU,KAUxEzB,EAAAC,EAAAC,cAAA,SAAOK,MAAO,CAACiC,WAAY,QAA3B,eAEJxC,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAAC+B,QAAQ,eAAgBmB,MAAM,UACvCzD,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLyB,KAAK,uBACLJ,MAAM,SACNxB,GAAG,uBACHpB,QAAS,SAASQ,GACTA,EAAEC,OAAOM,QAGNL,SAASC,eAAe,wBAAwBI,SAAWL,SAASC,eAAe,yBAAyBI,SAC5GL,SAASC,eAAe,2BAA2BI,SAAWL,SAASC,eAAe,0BAA0BI,SAChHL,SAASC,eAAe,wBAAwBI,SAAWL,SAASC,eAAe,0BAA0BI,UACzGL,SAASC,eAAe,0BAA0BI,SAAU,GALpEL,SAASC,eAAe,0BAA0BI,SAAU,KAUxEzB,EAAAC,EAAAC,cAAA,SAAOK,MAAO,CAACiC,WAAY,QAA3B,qBAzKgB7B,aAgL9BgD,yKAEE,IAAMd,EAAUpC,KAAKZ,MAAMgD,QAAQe,IAAI,SAAAC,GAAM,OACzC7D,EAAAC,EAAAC,cAAC4D,EAAD,CAA0BlC,YAAaiC,MAE3C,OACI7D,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACKgB,UAPkBlC,aAa7BoD,yKAEE,OACI/D,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAAC+B,QAAQ,eAAgBmB,MAAM,UACvCzD,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLyB,KAAK,sBACL5B,GAAI,gBAAkBrB,KAAKZ,MAAM+B,YAAYoC,QAAQ,MAAM,MAE/DhE,EAAAC,EAAAC,cAAA,SAAOK,MAAO,CAACiC,WAAY,QAA3B,IAAqC/B,KAAKZ,MAAM+B,YAAhD,aATuBjB,aAcxBK,IC/Vf,SAASiD,EAAWhB,GAChB,IAAIiB,EAAWhB,OAAOD,EAAKvB,UAAU,EAAE,IACnCyC,EAAWD,GAAY,GAAK,KAAO,KAEnCE,GADJF,EAAYA,EAAW,IAAO,IACH,IAAMjB,EAAKvB,UAAU,EAAE,GAAK,IAAMyC,EAK7D,OAHyB,IAArBC,EAAUzC,SACVyC,EAAY,IAAMA,GAEdA,EAGZ,SAASC,EAAqBC,EAAMC,GAChC,IAAIhD,EAAc,GACd+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,YAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,aAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,eAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,cAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,YAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,cAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,YAMhC,MAAO,CACHkD,QAASvB,OAAOqB,GAChBG,SAAUJ,EAAKxC,GACfO,YAAaiC,EAAKK,MAAMjD,UAAU4C,EAAKK,MAAMhD,OAAO,EAAG2C,EAAKK,MAAMhD,QAClEc,UAAW6B,EAAKM,IAAIlD,UAAU4C,EAAKM,IAAIjD,OAAO,EAAG2C,EAAKM,IAAIjD,QAC1DK,WAAYsC,EAAKO,MAAMnD,UAAU,EAAG4C,EAAKO,MAAMlD,OAAO,IACtDJ,YAAaA,EAAYG,UAAU,EAAEH,EAAYI,OAAO,GACxDmD,eAAgBR,EAAKS,WACrBnD,YAVY,CAAC,UAAW,SAAU,UAAW,YAAa,OAUrC0C,EAAKS,WAAa,IAI/C,SAASC,EAAwBV,EAAMC,GACnC,IAAIhD,EAAc,GACd+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,YAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,aAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,eAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,cAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,YAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,cAE5B+C,EAAKE,MAAM9C,UAAU,GAAG4C,EAAKE,MAAM7C,QAAQH,SAAS,QACpDD,GAA4B,YAKhC,GAAuB,kBAAZ+C,EAAKxC,GACZ,IAAImD,EAAIX,EAAKxC,GAAGoD,QAAQ,KACpBR,EAAWxB,OAAOoB,EAAKxC,GAAGJ,UAAU,EAAEuD,SAE1CP,EAAWJ,EAAKxC,GAEpB,MAAO,CACH2C,QAASvB,OAAOqB,GAChBG,SAAUA,EACVrC,YAAaiC,EAAKK,MAAMjD,UAAU4C,EAAKK,MAAMhD,OAAO,EAAG2C,EAAKK,MAAMhD,QAClEc,UAAW6B,EAAKM,IAAIlD,UAAU4C,EAAKM,IAAIjD,OAAO,EAAG2C,EAAKM,IAAIjD,QAC1DK,WAAYsC,EAAKO,MAAMnD,UAAU,EAAG4C,EAAKO,MAAMlD,OAAO,IACtDJ,YAAaA,EAAYG,UAAU,EAAEH,EAAYI,OAAO,GACxDmD,eAAgBR,EAAKS,WACrBnD,YAhBY,CAAC,UAAW,SAAU,UAAW,YAAa,OAgBrC0C,EAAKS,WAAa,GACvCjD,GAAIwC,EAAKa,aAIjB,SAASC,EAAiBnD,GACtB,IAAIgB,EAAO7B,SAASC,eAAeY,EAAO,QAAQqB,MAUlD,MATqD,OAAjDlC,SAASC,eAAeY,EAAO,QAAQqB,MACc,OAAjDlC,SAASC,eAAeY,EAAO,QAAQqB,QACvCL,GAAQC,OAAO9B,SAASC,eAAeY,EAAO,QAAQqB,OAAS,IAAIF,YAGlB,OAAjDhC,SAASC,eAAeY,EAAO,QAAQqB,QACvCL,EAAO,MAGRA,EAGX,SAASoC,IACL,IAAIC,EAAQ,IAAIC,KACZC,EAAa,IAAID,KACjBE,EAAc,IAAIF,KAClBG,EAAgB,IAAIH,KACpBI,EAAe,IAAIJ,KACnBK,EAAa,IAAIL,KACjBM,EAAe,IAAIN,KACnBO,EAAa,IAAIP,KA6BrB,OA3BuB,IAAnBD,EAAMS,UAENP,EAAWQ,QAAQV,EAAMW,UAAY,GACrCR,EAAYO,QAAQV,EAAMW,UAAY,GACtCP,EAAcM,QAAQV,EAAMW,UAAY,GACxCN,EAAaK,QAAQV,EAAMW,UAAY,GACvCL,EAAWI,QAAQV,EAAMW,UAAY,GACrCJ,EAAaG,QAAQV,EAAMW,UAAY,GACvCH,EAAWE,QAAQV,EAAMW,aAEzBT,EAAWQ,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WAChDN,EAAYO,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WACjDL,EAAcM,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WACnDJ,EAAaK,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WAClDH,EAAWI,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WAChDF,EAAaG,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WAClDD,EAAWE,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,YAW7C,CARPP,EAAaA,EAAWU,cAAgB,KAAyD,KAAjDV,EAAWW,WAAa,GAAG/C,WAAWzB,OAAe,KAAO6D,EAAWW,WAAa,GAAG/C,WAAcoC,EAAWW,WAAa,GAAM,KAAkD,IAA3CX,EAAWS,UAAU7C,WAAWzB,OAAe,IAAM6D,EAAWS,UAAU7C,WAAaoC,EAAWS,WAC5RR,EAAcA,EAAYS,cAAgB,KAA0D,KAAlDT,EAAYU,WAAa,GAAG/C,WAAWzB,OAAe,KAAO8D,EAAYU,WAAa,GAAG/C,WAAcqC,EAAYU,WAAa,GAAM,KAAmD,IAA5CV,EAAYQ,UAAU7C,WAAWzB,OAAe,IAAM8D,EAAYQ,UAAU7C,WAAaqC,EAAYQ,WACpSP,EAAgBA,EAAcQ,cAAgB,KAA4D,KAApDR,EAAcS,WAAa,GAAG/C,WAAWzB,OAAe,KAAO+D,EAAcS,WAAa,GAAG/C,WAAcsC,EAAcS,WAAa,GAAM,KAAqD,IAA9CT,EAAcO,UAAU7C,WAAWzB,OAAe,IAAM+D,EAAcO,UAAU7C,WAAasC,EAAcO,WACpTN,EAAeA,EAAaO,cAAgB,KAA2D,KAAnDP,EAAaQ,WAAa,GAAG/C,WAAWzB,OAAe,KAAOgE,EAAaQ,WAAa,GAAG/C,WAAcuC,EAAaQ,WAAa,GAAO,KAAoD,IAA7CR,EAAaM,UAAU7C,WAAWzB,OAAe,IAAMgE,EAAaM,UAAU7C,WAAauC,EAAaM,WAC7SL,EAAaA,EAAWM,cAAgB,KAAyD,KAAjDN,EAAWO,WAAa,GAAG/C,WAAWzB,OAAe,KAAOiE,EAAWO,WAAa,GAAG/C,WAAcwC,EAAWO,WAAa,GAAM,KAAkD,IAA3CP,EAAWK,UAAU7C,WAAWzB,OAAe,IAAMiE,EAAWK,UAAU7C,WAAawC,EAAWK,WAC5RJ,EAAeA,EAAaK,cAAgB,KAA2D,KAAnDL,EAAaM,WAAa,GAAG/C,WAAWzB,OAAe,KAAOkE,EAAaM,WAAa,GAAG/C,WAAcyC,EAAaM,WAAa,GAAM,KAAoD,IAA7CN,EAAaI,UAAU7C,WAAWzB,OAAe,IAAMkE,EAAaI,UAAU7C,WAAayC,EAAaI,WAC5SH,EAAaA,EAAWI,cAAgB,KAAyD,KAAjDJ,EAAWK,WAAa,GAAG/C,WAAWzB,OAAe,KAAOmE,EAAWK,WAAa,GAAG/C,WAAc0C,EAAWK,WAAa,GAAM,KAAkD,IAA3CL,EAAWG,UAAU7C,WAAWzB,OAAe,IAAMmE,EAAWG,UAAU7C,WAAa0C,EAAWG,gBA+nEjRG,sDAznEX,SAAAC,EAAYxG,GAAO,IAAAD,EAAA0G,OAAAC,EAAA,EAAAD,CAAA7F,KAAA4F,IACfzG,EAAA4G,EAAAC,KAAAhG,KAAMZ,IAoDV6G,6BAA+B,WAC3BC,MAAM,mEACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACFnH,EAAKoH,SAAS,CAACC,mBAAoBF,MAGvCG,WAAWtH,EAAK8G,6BAA8B,MA5D/B9G,EA+DnBuH,8BAAgC,WAC5BR,MAAM,oEACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACFnH,EAAKoH,SAAS,CAACI,0BAA2BL,MAG9CG,WAAWtH,EAAKuH,8BAA+B,MAtEhCvH,EAyEnByH,wBAA0B,WACtBV,MAAM,8DACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACFnH,EAAKoH,SAAS,CAACM,oBAAqBP,MAGxCG,WAAWtH,EAAKyH,wBAAyB,MAhF1BzH,EAmFnB2H,wBAA0B,SAACC,GACvBb,MAAM,kEAAoEa,EAAQ1F,GAAGsB,WAAa,IAAK,CACnGqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAWnI,EAAKF,MAAMuH,mBAAmBrD,IAAI,SAAAU,GAC/C,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAGf1E,EAAKoH,SAAS,CAACC,mBAAoBc,OAnGxBnI,EAuGnBqI,8BAAgC,SAACT,GAC7Bb,MAAM,mEAAqEa,EAAQ1F,GAAGsB,WAAa,IAAK,CACpGqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAWnI,EAAKF,MAAM0H,0BAA0BxD,IAAI,SAAAU,GACtD,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAGf1E,EAAKoH,SAAS,CAACI,0BAA2BW,OAvH/BnI,EA2HnBsI,wBAA0B,SAACV,GACvBb,MAAM,6DAA+Da,EAAQ1F,GAAGsB,WAAa,IAAK,CAC9FqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAWnI,EAAKF,MAAM4H,oBAAoB1D,IAAI,SAAAU,GAChD,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAGf1E,EAAKoH,SAAS,CAACM,oBAAqBS,OA3IzBnI,EA+InBuI,yBAA2B,SAAC7D,GACxBA,EAAKxC,GAAKlC,EAAKC,MAAM0E,gBACrB3E,EAAK2H,wBAAwBjD,IAjJd1E,EAoJnBwI,+BAAiC,SAAC9D,GAC9BA,EAAKxC,GAAKlC,EAAKC,MAAM0E,gBACrB3E,EAAKqI,8BAA8B3D,IAtJpB1E,EAyJnByI,yBAA2B,SAAC/D,GACxBA,EAAKxC,GAAKlC,EAAKC,MAAM4E,QACrB7E,EAAKsI,wBAAwB5D,IA3Jd1E,EA8JnB0I,6BAA+B,WAC3B1I,EAAKuI,yBAAyBvI,EAAKF,MAAMuH,mBAAmB,KA/J7CrH,EAkKnB2I,mCAAqC,WACjC3I,EAAKwI,+BAA+BxI,EAAKF,MAAM0H,0BAA0B,KAnK1DxH,EAsKnB4I,6BAA+B,WAC3B5I,EAAKyI,yBAAyBzI,EAAKF,MAAM4H,oBAAoB,KAvK9C1H,EA0KnB6I,iBAAmB,SAACC,EAAetG,GAC/B,OAAO,GA3KQxC,EA8KnB+I,uBAAyB,SAACD,EAAeE,EAAaC,GAClD,IAAIzG,EAAOxC,EAAKC,MAAMiJ,KAAO,YAC7B,OAAOC,IAAO3G,IAhLCxC,EAmLnBoJ,aAAe,SAACN,EAAeO,GAC3B,IAAIC,EAAWR,EAAcS,YAAYF,EAAMlE,YAAYrB,KAkX1D0F,IAASC,OACNrJ,EAAAC,EAAAC,cAACoJ,EAAD,CACI1H,YAAa,kBAAoBsH,EACjC3H,YAAa0H,EAAMzE,MACnBnC,YAAa4G,EAAMtE,MACnBlC,UAAWwG,EAAMrE,IACjB5C,WAAYiH,EAAMpE,MAClB/B,gBAtWR,WAEI,IAFuByG,EAEnBC,GAAc,EACdC,EAAmB,GACnBC,EAAkBtI,SAASuI,iBAAiB,6CAC5CC,EAAgBxI,SAASuI,iBAAiB,8CAC1CE,EAAwB,GANLC,EAAAxD,OAAAyD,EAAA,EAAAzD,CAOAsD,GAPA,IAOvB,IAAAE,EAAAE,MAAAT,EAAAO,EAAA7E,KAAAgF,MAAsC,KAA7BC,EAA6BX,EAAAjG,MACT,WAArB4G,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,YAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,cAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,KA3BvB,MAAA+E,GAAAN,EAAA5I,EAAAkJ,GAAA,QAAAN,EAAAO,IAqGvB,GAtEA3B,EAAc4B,OAAOC,QAAQ,SAASrJ,GAClC,IAAIsJ,EAAStJ,EAAEyD,MACX8F,EAAOvJ,EAAE0D,IACT8F,EAASxJ,EAAEsD,MACXmG,EAA6B,GAC7BD,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAG/C,IA3BqCuF,EA2BjCC,EAAqB,GACrBC,EAAmB,GACnBC,EAA0B,GAC1BC,EAAwB,GA9BSC,EAAA3E,OAAAyD,EAAA,EAAAzD,CA+BjBuD,GA/BiB,IA+BrC,IAAAoB,EAAAjB,MAAAY,EAAAK,EAAAhG,KAAAgF,MAA2C,KAAlCiB,EAAkCN,EAAAtH,MAGvC,GAFAuH,EAAqBK,EAAUjC,EAAMtE,MAAMjD,UAAU,GAAG,IACxDoJ,EAAmBI,EAAUjC,EAAMrE,IAAIlD,UAAU,GAAG,IAChDR,EAAE6D,aAAekE,EAAMlE,WAAY,KAAAoG,EAAAC,EAAA9E,OAAAyD,EAAA,EAAAzD,CACVqE,GADU,IACnC,IAAAS,EAAApB,MAAAmB,EAAAC,EAAAnG,KAAAgF,MAGI,GAFAc,GADKM,EAA4CF,EAAA7H,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAOmH,EAAMnH,GAAK,CACnB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,OAXuB,MAAAkJ,GAAAgB,EAAAlK,EAAAkJ,GAAA,QAAAgB,EAAAf,KAHA,IAAAiB,EAAAC,EAAAjF,OAAAyD,EAAA,EAAAzD,CAkBlBoD,GAlBkB,IAkBvC,IAAA6B,EAAAvB,MAAAsB,EAAAC,EAAAtG,KAAAgF,MAAsC,KAA7BuB,EAA6BF,EAAAhI,MAClC,GAAIpC,EAAEuK,YAAcD,EAASlI,MAAO,KAAAoI,EAAAC,EAAArF,OAAAyD,EAAA,EAAAzD,CACPqE,GADO,IAChC,IAAAgB,EAAA3B,MAAA0B,EAAAC,EAAA1G,KAAAgF,MAAqD,KAA5CoB,EAGL,GAFAN,GADKM,EAA4CK,EAAApI,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAOmH,EAAMnH,GAAK,CACnB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,QAXoB,MAAAkJ,GAAAuB,EAAAzK,EAAAkJ,GAAA,QAAAuB,EAAAtB,OAnBD,MAAAD,GAAAmB,EAAArK,EAAAkJ,GAAA,QAAAmB,EAAAlB,MA/BN,MAAAD,GAAAa,EAAA/J,EAAAkJ,GAAA,QAAAa,EAAAZ,OAsErCb,EAAa,CACb,IADaoC,EACTjM,EAAU,8CACVkM,EAAM,GAFGC,EAAAxF,OAAAyD,EAAA,EAAAzD,CAGMmD,GAHN,IAGb,IAAAqC,EAAA9B,MAAA4B,EAAAE,EAAA7G,KAAAgF,MAAqC,KAA5BK,EAA4BsB,EAAAtI,MAC7BgH,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,YAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,cAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAEV,IAAIE,EAA8BrD,EAAcS,YAAYmB,EAAOvF,YAAYrB,KAC/E/D,GAAO,OAAAqM,OAAW1B,EAAOzF,MAAlB,SAAAmH,OAA+BD,EAA/B,QAAAC,OAAiEH,EAAInK,UAAU,EAAEmK,EAAIlK,OAAO,KA1B1F,MAAAyI,GAAA0B,EAAA5K,EAAAkJ,GAAA,QAAA0B,EAAAzB,IA4Bb4B,MAAMtM,OACH,CAEHsJ,EAAMpE,MAAQzD,SAASC,eAAe,uBAAuBiC,MAAQ,KACvDlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,eAAeiC,MAAQ,IAClGlC,SAASC,eAAe,aAAaiC,MAAQ,MAAQlC,SAASC,eAAe,WAAWiC,MAAQ,IAChGlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,WAAWiC,MAAQ,IAG5GoF,EAAcwD,iBAAiBjD,EAAOkD,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,SAAW,IAAMhE,SAASC,eAAe,eAAeiC,MAAQ,OAG1JoF,EAAc2D,eAAepD,EAAOkD,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,OAAS,IAAMhE,SAASC,eAAe,aAAaiC,MAAQ,OAGpJ,IAAI/B,EAAc,uBAAyB4K,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GACtEyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,IAAM,kBACnDyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,IAAM,kBA+BrE,GA9BIN,SAASC,eAAe,0BAA0BI,QAElDwH,EAAMzE,MAAQjD,EAAc,wBAExBH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,yBAAyBI,UACjDF,GAA4B,OAE5BH,SAASC,eAAe,2BAA2BI,UACnDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAEhC0H,EAAMzE,MAAQjD,EAAYG,UAAU,EAAEH,EAAYI,OAAO,IAI7DP,SAASC,eAAe,gBAAkB6H,EAASlF,QAAQ,MAAO,KAAKvC,SAAU,EAC7EL,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,uBAAuBI,QAAS,CACxD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,yBAAyBI,QAAS,CAC1D,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,oBAAoBI,QAAS,CACrD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAKnByD,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAIfyD,OAAOC,SAASvM,MAAMiN,cAAc9H,EAAwBiE,EAAOkD,OAAOC,SAASvM,MAAM0E,kBACzF4H,OAAOC,SAASvM,MAAMkN,cAEtB3D,IAAS4D,uBAAuB5L,SAASC,eAAe,6BAIkB,IAAtE8K,OAAOC,SAAS1M,MAAM0H,0BAA0B,GAAG6F,iBACnDd,OAAOC,SAASpF,SAAS,CACrBI,0BAA2B,CAACd,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEjB6F,OAAOC,SAAS1M,MAAM0H,0BAA0B,IAFhC,IAGnB6F,eAAgB,OAGzB,WAAYd,OAAOC,SAAS7D,uCAEoC,IAA/D4D,OAAOC,SAAS1M,MAAMuH,mBAAmB,GAAGkG,gBAC5ChB,OAAOC,SAASpF,SAAS,CACrBC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEV6F,OAAOC,SAAS1M,MAAMuH,mBAAmB,IAFhC,IAGZkG,eAAgB,OAGzB,WAAYhB,OAAOC,SAAS9D,iCAC/B6D,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,iCAC/B2D,OAAOkB,gBAAgBrG,SAAS,CAACsG,IAAKnB,OAAOkB,gBAAgB3N,MAAM4N,IAAM,KAEzEnB,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,oCAcvClH,mBAxXR,WACI8H,IAAS4D,uBAAuB5L,SAASC,eAAe,8BAwXpD0B,oBArXR,WAEIoJ,OAAOC,SAASvM,MAAM0N,cAActE,EAAM9D,aAC1CgH,OAAOC,SAASvM,MAAMkN,cAGtBrE,EAAc8E,YAAYvE,GAC1BkD,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAEfU,IAAS4D,uBAAuB5L,SAASC,eAAe,gCA4WpDD,SAASC,eAAe,8BAhjBjBzB,EAojBnB4M,SAAW,SAAC9D,EAAe+E,EAAQvE,EAAUvE,EAAOC,EAAK3C,EAAMsK,GAC3D,IAAID,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,GACrBA,EAAKpH,aAAemH,IAAYA,EAAaC,EAAKpH,YAAc,KAGxE,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAO,cAAgBkE,IAAOpE,GAAO+I,OAAO,WAAa,MAAQ3E,IAAOnE,GAAK8I,OAAO,WAAa,IACjG/I,MAAOA,EACPC,IAAKA,EACLG,WAAY0I,EACZhB,QAAS,UACTC,aAAa,EACblI,MAAO,uBAAyB5E,EAAKC,MAAM2F,WAAW9D,UAAU,EAAE,GAAK9B,EAAKC,MAAM2F,WAAW9D,UAAU,EAAE,GAAK9B,EAAKC,MAAM2F,WAAW9D,UAAU,EAAE,IAAM,kBAAoB9B,EAAKC,MAAMiG,WAAWpE,UAAU,EAAE,GAAK9B,EAAKC,MAAMiG,WAAWpE,UAAU,EAAE,GAAK9B,EAAKC,MAAMiG,WAAWpE,UAAU,EAAE,IAAM,kBAAoB9B,EAAKC,MAAMgM,IAAInK,UAAU,EAAE,GAAGiM,eAGtVjF,EAAckE,SAASJ,GACvB5M,EAAKoH,SAAS,CACV6F,UAAWnE,IAmXfU,IAASC,OACLrJ,EAAAC,EAAAC,cAACoJ,EAAD,CACI1H,YAAa,iBAAmBsH,EAChC3H,YAAaiL,EAAShI,MACtBnC,YAAamK,EAAS7H,MACtBlC,UAAW+J,EAAS5H,IACpB5C,WAAYwK,EAAS3H,MACrB/B,gBAxWR,WAEI,IAFuB8K,EAEnBpE,GAAc,EACdC,EAAmB,GACnBC,EAAkBtI,SAASuI,iBAAiB,6CAC5CC,EAAgBxI,SAASuI,iBAAiB,8CAC1CE,EAAwB,GANLgE,EAAAvH,OAAAyD,EAAA,EAAAzD,CAOAsD,GAPA,IAOvB,IAAAiE,EAAA7D,MAAA4D,EAAAC,EAAA5I,KAAAgF,MAAsC,KAA7BC,EAA6B0D,EAAAtK,MACT,WAArB4G,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,YAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,cAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,KA3BvB,MAAA+E,GAAAyD,EAAA3M,EAAAkJ,GAAA,QAAAyD,EAAAxD,IAqGvB,GAtEA3B,EAAc4B,OAAOC,QAAQ,SAASrJ,GAClC,IAAIsJ,EAAStJ,EAAEyD,MACX8F,EAAOvJ,EAAE0D,IACT8F,EAASxJ,EAAEsD,MACXmG,EAA6B,GAC7BD,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAG/C,IA3BqCyI,EA2BjCjD,EAAqB,GACrBC,EAAmB,GACnBC,EAA0B,GAC1BC,EAAwB,GA9BS+C,EAAAzH,OAAAyD,EAAA,EAAAzD,CA+BjBuD,GA/BiB,IA+BrC,IAAAkE,EAAA/D,MAAA8D,EAAAC,EAAA9I,KAAAgF,MAA2C,KAAlCiB,EAAkC4C,EAAAxK,MAGvC,GAFAuH,EAAqBK,EAAUsB,EAAS7H,MAAMjD,UAAU,GAAG,IAC3DoJ,EAAmBI,EAAUsB,EAAS5H,IAAIlD,UAAU,GAAG,IACnDR,EAAE6D,aAAeyH,EAASzH,WAAY,KAAAiJ,EAAAC,EAAA3H,OAAAyD,EAAA,EAAAzD,CACbqE,GADa,IACtC,IAAAsD,EAAAjE,MAAAgE,EAAAC,EAAAhJ,KAAAgF,MAGI,GAFAc,GADKM,EAA4C2C,EAAA1K,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAO0K,EAAS1K,GAAK,CACtB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,OAX0B,MAAAkJ,GAAA6D,EAAA/M,EAAAkJ,GAAA,QAAA6D,EAAA5D,KAHH,IAAA6D,EAAAC,EAAA7H,OAAAyD,EAAA,EAAAzD,CAkBlBoD,GAlBkB,IAkBvC,IAAAyE,EAAAnE,MAAAkE,EAAAC,EAAAlJ,KAAAgF,MAAsC,KAA7BuB,EAA6B0C,EAAA5K,MAClC,GAAIpC,EAAEuK,YAAcD,EAASlI,MAAO,KAAA8K,EAAAC,EAAA/H,OAAAyD,EAAA,EAAAzD,CACPqE,GADO,IAChC,IAAA0D,EAAArE,MAAAoE,EAAAC,EAAApJ,KAAAgF,MAAqD,KAA5CoB,EAGL,GAFAN,GADKM,EAA4C+C,EAAA9K,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAO0K,EAAS1K,GAAK,CACtB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,QAXoB,MAAAkJ,GAAAiE,EAAAnN,EAAAkJ,GAAA,QAAAiE,EAAAhE,OAnBD,MAAAD,GAAA+D,EAAAjN,EAAAkJ,GAAA,QAAA+D,EAAA9D,MA/BN,MAAAD,GAAA2D,EAAA7M,EAAAkJ,GAAA,QAAA2D,EAAA1D,OAsErCb,EAAa,CACb,IADa8E,EACT3O,EAAU,8CACVkM,EAAM,GAFG0C,EAAAjI,OAAAyD,EAAA,EAAAzD,CAGMmD,GAHN,IAGb,IAAA8E,EAAAvE,MAAAsE,EAAAC,EAAAtJ,KAAAgF,MAAqC,KAA5BK,EAA4BgE,EAAAhL,MAC7BgH,EAAO9F,MAAM9C,UAAU,GAAG4I,EAAO9F,MAAM7C,QAAQH,SAAS,QACxDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAG4I,EAAO9F,MAAM7C,QAAQH,SAAS,QACxDqK,EAAM,YAENvB,EAAO9F,MAAM9C,UAAU,GAAG4I,EAAO9F,MAAM7C,QAAQH,SAAS,QACxDqK,EAAM,cAENvB,EAAO9F,MAAM9C,UAAU,GAAG4I,EAAO9F,MAAM7C,QAAQH,SAAS,QACxDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAG4I,EAAO9F,MAAM7C,QAAQH,SAAS,QACxDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAG4I,EAAO9F,MAAM7C,QAAQH,SAAS,QACxDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAG4I,EAAO9F,MAAM7C,QAAQH,SAAS,QACxDqK,EAAM,WAEV,IAAIE,EAA8BrD,EAAcS,YAAYmB,EAAOvF,YAAYrB,KAC/E/D,GAAO,OAAAqM,OAAW1B,EAAOzF,MAAlB,SAAAmH,OAA+BD,EAA/B,QAAAC,OAAiEH,EAAInK,UAAU,EAAEmK,EAAIlK,OAAO,KA1B1F,MAAAyI,GAAAmE,EAAArN,EAAAkJ,GAAA,QAAAmE,EAAAlE,IA4Bb4B,MAAMtM,OACH,CAEH6M,EAAS3H,MAAQzD,SAASC,eAAe,uBAAuBiC,MAAQ,KACvDlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,eAAeiC,MAAQ,IAClGlC,SAASC,eAAe,aAAaiC,MAAQ,MAAQlC,SAASC,eAAe,WAAWiC,MAAQ,IAChGlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,WAAWiC,MAAQ,IAG/GoF,EAAcwD,iBAAiBM,EAAUL,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,SAAW,IAAMhE,SAASC,eAAe,eAAeiC,MAAQ,OAG7JoF,EAAc2D,eAAeG,EAAUL,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,OAAS,IAAMhE,SAASC,eAAe,aAAaiC,MAAQ,OAGvJ,IAAI/B,EAAc,uBAAyB4K,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GACtEyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,IAAM,kBACnDyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,IAAM,kBA+BrE,GA9BIN,SAASC,eAAe,0BAA0BI,QAElD+K,EAAShI,MAAQjD,EAAc,wBAE3BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,yBAAyBI,UACjDF,GAA4B,OAE5BH,SAASC,eAAe,2BAA2BI,UACnDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAEhCiL,EAAShI,MAAQjD,EAAYG,UAAU,EAAEH,EAAYI,OAAO,IAIhEP,SAASC,eAAe,gBAAkB6H,EAASlF,QAAQ,MAAO,KAAKvC,SAAU,EAC7EL,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqJ,EAAkB,CAClB1M,GAAIwK,EACJzH,MAAO2H,EAAS3H,MAChBF,MAAO6H,EAAS7H,MAChBC,IAAK4H,EAAS5H,IACdG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOgI,EAAShI,OAEpB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmK,EAAiBrC,OAAOC,SAASvM,MAAM0E,kBAC7FmE,EAAckE,SAAS4B,GACvBrC,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqJ,EAAkB,CAClB1M,GAAIwK,EACJzH,MAAO2H,EAAS3H,MAChBF,MAAO6H,EAAS7H,MAChBC,IAAK4H,EAAS5H,IACdG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOgI,EAAShI,OAEpB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmK,EAAiBrC,OAAOC,SAASvM,MAAM0E,kBAC7FmE,EAAckE,SAAS4B,GACvBrC,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,uBAAuBI,QAAS,CACxD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqJ,EAAkB,CAClB1M,GAAIwK,EACJzH,MAAO2H,EAAS3H,MAChBF,MAAO6H,EAAS7H,MAChBC,IAAK4H,EAAS5H,IACdG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOgI,EAAShI,OAEpB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmK,EAAiBrC,OAAOC,SAASvM,MAAM0E,kBAC7FmE,EAAckE,SAAS4B,GACvBrC,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,yBAAyBI,QAAS,CAC1D,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqJ,EAAkB,CAClB1M,GAAIwK,EACJzH,MAAO2H,EAAS3H,MAChBF,MAAO6H,EAAS7H,MAChBC,IAAK4H,EAAS5H,IACdG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOgI,EAAShI,OAEpB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmK,EAAiBrC,OAAOC,SAASvM,MAAM0E,kBAC7FmE,EAAckE,SAAS4B,GACvBrC,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,oBAAoBI,QAAS,CACrD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqJ,EAAkB,CAClB1M,GAAIwK,EACJzH,MAAO2H,EAAS3H,MAChBF,MAAO6H,EAAS7H,MAChBC,IAAK4H,EAAS5H,IACdG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOgI,EAAShI,OAEpB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmK,EAAiBrC,OAAOC,SAASvM,MAAM0E,kBAC7FmE,EAAckE,SAAS4B,GACvBrC,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAKnByD,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAIfyD,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtF4H,OAAOC,SAASvM,MAAMkN,cAEtB3D,IAAS4D,uBAAuB5L,SAASC,eAAe,6BAIkB,IAAtE8K,OAAOC,SAAS1M,MAAM0H,0BAA0B,GAAG6F,iBACnDd,OAAOC,SAASpF,SAAS,CACrBI,0BAA2B,CAACd,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEjB6F,OAAOC,SAAS1M,MAAM0H,0BAA0B,IAFhC,IAGnB6F,eAAgB,OAGzB,WAAYd,OAAOC,SAAS7D,uCAGoC,IAA/D4D,OAAOC,SAAS1M,MAAMuH,mBAAmB,GAAGkG,gBAC5ChB,OAAOC,SAASpF,SAAS,CACrBC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEV6F,OAAOC,SAAS1M,MAAMuH,mBAAmB,IAFhC,IAGZkG,eAAgB,OAGzB,WAAYhB,OAAOC,SAAS9D,iCAC/B6D,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,iCAC/B2D,OAAOkB,gBAAgBrG,SAAS,CAACsG,IAAKnB,OAAOkB,gBAAgB3N,MAAM4N,IAAM,KAEzEnB,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,oCAevClH,mBAxXR,WAEI6K,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtF4H,OAAOC,SAASvM,MAAMkN,cAEtB3D,IAAS4D,uBAAuB5L,SAASC,eAAe,8BAoXpD0B,oBAlXR,WACI2F,EAAc8E,YAAYhB,GAC1BL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAEfU,IAAS4D,uBAAuB5L,SAASC,eAAe,gCA8WpDD,SAASC,eAAe,8BAp8BjBzB,EAw8BnBsM,iBAAmB,SAACxD,EAAeO,EAAOwF,GACtBxF,EAAMtE,MACtB+D,EAAcwD,iBAAiBjD,EAAOwF,GACtCxF,EAAMpE,MAAQoE,EAAMpE,MAAMnD,UAAU,EAAGuH,EAAMpE,MAAMlD,OAAS,IAAM,KAAOsC,EAAW8E,IAAO0F,GAAUf,OAAO,UAAY,MAAQzJ,EAAW8E,IAAOE,EAAMrE,KAAK8I,OAAO,UAAY,IAChL9N,EAAKoH,SAAS,CACV6F,UAAWnE,IAwXf,IAAIQ,EAAWR,EAAcS,YAAYF,EAAMlE,YAAYrB,KAC3D0F,IAASC,OACLrJ,EAAAC,EAAAC,cAACoJ,EAAD,CACI1H,YAAa,kBAAoBsH,EACjC3H,YAAa0H,EAAMzE,MACnBnC,YAAaoM,EACbhM,UAAWwG,EAAMrE,IACjB5C,WAAYiH,EAAMpE,MAClB/B,gBAxWR,WAEI,IAFuB4L,EAEnBlF,GAAc,EACdC,EAAmB,GACnBC,EAAkBtI,SAASuI,iBAAiB,6CAC5CC,EAAgBxI,SAASuI,iBAAiB,8CAC1CE,EAAwB,GANL8E,EAAArI,OAAAyD,EAAA,EAAAzD,CAOAsD,GAPA,IAOvB,IAAA+E,EAAA3E,MAAA0E,EAAAC,EAAA1J,KAAAgF,MAAsC,KAA7BC,EAA6BwE,EAAApL,MACT,WAArB4G,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,YAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,cAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,KA3BvB,MAAA+E,GAAAuE,EAAAzN,EAAAkJ,GAAA,QAAAuE,EAAAtE,IAqGvB,GAtEA3B,EAAc4B,OAAOC,QAAQ,SAASrJ,GAClC,IAAIsJ,EAAStJ,EAAEyD,MACX8F,EAAOvJ,EAAE0D,IACT8F,EAASxJ,EAAEsD,MACXmG,EAA6B,GAC7BD,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAG/C,IA3BqCuJ,EA2BjC/D,EAAqB,GACrBC,EAAmB,GACnBC,EAA0B,GAC1BC,EAAwB,GA9BS6D,EAAAvI,OAAAyD,EAAA,EAAAzD,CA+BjBuD,GA/BiB,IA+BrC,IAAAgF,EAAA7E,MAAA4E,EAAAC,EAAA5J,KAAAgF,MAA2C,KAAlCiB,EAAkC0D,EAAAtL,MAGvC,GAFAuH,EAAqBK,EAAUjC,EAAMtE,MAAMjD,UAAU,GAAG,IACxDoJ,EAAmBI,EAAUjC,EAAMrE,IAAIlD,UAAU,GAAG,IAChDR,EAAE6D,aAAekE,EAAMlE,WAAY,KAAA+J,EAAAC,EAAAzI,OAAAyD,EAAA,EAAAzD,CACVqE,GADU,IACnC,IAAAoE,EAAA/E,MAAA8E,EAAAC,EAAA9J,KAAAgF,MAGI,GAFAc,GADKM,EAA4CyD,EAAAxL,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAOmH,EAAMnH,GAAK,CACnB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,OAXuB,MAAAkJ,GAAA2E,EAAA7N,EAAAkJ,GAAA,QAAA2E,EAAA1E,KAHA,IAAA2E,EAAAC,EAAA3I,OAAAyD,EAAA,EAAAzD,CAkBlBoD,GAlBkB,IAkBvC,IAAAuF,EAAAjF,MAAAgF,EAAAC,EAAAhK,KAAAgF,MAAsC,KAA7BuB,EAA6BwD,EAAA1L,MAClC,GAAIpC,EAAEuK,YAAcD,EAASlI,MAAO,KAAA4L,EAAAC,EAAA7I,OAAAyD,EAAA,EAAAzD,CACPqE,GADO,IAChC,IAAAwE,EAAAnF,MAAAkF,EAAAC,EAAAlK,KAAAgF,MAAqD,KAA5CoB,EAGL,GAFAN,GADKM,EAA4C6D,EAAA5L,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAOmH,EAAMnH,GAAK,CACnB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,QAXoB,MAAAkJ,GAAA+E,EAAAjO,EAAAkJ,GAAA,QAAA+E,EAAA9E,OAnBD,MAAAD,GAAA6E,EAAA/N,EAAAkJ,GAAA,QAAA6E,EAAA5E,MA/BN,MAAAD,GAAAyE,EAAA3N,EAAAkJ,GAAA,QAAAyE,EAAAxE,OAsErCb,EAAa,CACb,IADa4F,EACTzP,EAAU,8CACVkM,EAAM,GAFGwD,EAAA/I,OAAAyD,EAAA,EAAAzD,CAGMmD,GAHN,IAGb,IAAA4F,EAAArF,MAAAoF,EAAAC,EAAApK,KAAAgF,MAAqC,KAA5BK,EAA4B8E,EAAA9L,MAC7BgH,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,YAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,cAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAEV,IAAIE,EAA8BrD,EAAcS,YAAYmB,EAAOvF,YAAYrB,KAC/E/D,GAAO,OAAAqM,OAAW1B,EAAOzF,MAAlB,SAAAmH,OAA+BD,EAA/B,QAAAC,OAAiEH,EAAInK,UAAU,EAAEmK,EAAIlK,OAAO,KA1B1F,MAAAyI,GAAAiF,EAAAnO,EAAAkJ,GAAA,QAAAiF,EAAAhF,IA4Bb4B,MAAMtM,OACH,CAEHsJ,EAAMpE,MAAQzD,SAASC,eAAe,uBAAuBiC,MAAQ,KACvDlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,eAAeiC,MAAQ,IAClGlC,SAASC,eAAe,aAAaiC,MAAQ,MAAQlC,SAASC,eAAe,WAAWiC,MAAQ,IAChGlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,WAAWiC,MAAQ,IAG5GoF,EAAcwD,iBAAiBjD,EAAOkD,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,SAAW,IAAMhE,SAASC,eAAe,eAAeiC,MAAQ,OAG1JoF,EAAc2D,eAAepD,EAAOkD,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,OAAS,IAAMhE,SAASC,eAAe,aAAaiC,MAAQ,OAGpJ,IAAI/B,EAAc,uBAAyB4K,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GACtEyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,IAAM,kBACnDyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,IAAM,kBA+BrE,GA9BIN,SAASC,eAAe,0BAA0BI,QAElDwH,EAAMzE,MAAQjD,EAAc,wBAExBH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,yBAAyBI,UACjDF,GAA4B,OAE5BH,SAASC,eAAe,2BAA2BI,UACnDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAEhC0H,EAAMzE,MAAQjD,EAAYG,UAAU,EAAEH,EAAYI,OAAO,IAI7DP,SAASC,eAAe,gBAAkB6H,EAASlF,QAAQ,MAAO,KAAKvC,SAAU,EAC7EL,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,uBAAuBI,QAAS,CACxD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,yBAAyBI,QAAS,CAC1D,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,oBAAoBI,QAAS,CACrD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAKnByD,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAIfyD,OAAOC,SAASvM,MAAMiN,cAAc9H,EAAwBiE,EAAOkD,OAAOC,SAASvM,MAAM0E,kBACzF4H,OAAOC,SAASvM,MAAMkN,cAEtB3D,IAAS4D,uBAAuB5L,SAASC,eAAe,6BAKkB,IAAtE8K,OAAOC,SAAS1M,MAAM0H,0BAA0B,GAAG6F,iBACnDd,OAAOC,SAASpF,SAAS,CACrBI,0BAA2B,CAACd,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEjB6F,OAAOC,SAAS1M,MAAM0H,0BAA0B,IAFhC,IAGnB6F,eAAgB,OAGzB,WAAYd,OAAOC,SAAS7D,uCAEoC,IAA/D4D,OAAOC,SAAS1M,MAAMuH,mBAAmB,GAAGkG,gBAC5ChB,OAAOC,SAASpF,SAAS,CACrBC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEV6F,OAAOC,SAAS1M,MAAMuH,mBAAmB,IAFhC,IAGZkG,eAAgB,OAGzB,WAAYhB,OAAOC,SAAS9D,iCAC/B6D,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,iCAC/B2D,OAAOkB,gBAAgBrG,SAAS,CAACsG,IAAKnB,OAAOkB,gBAAgB3N,MAAM4N,IAAM,KAEzEnB,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,oCAevClH,mBA9XR,WAEI6K,OAAOC,SAASvM,MAAMiN,cAAc9H,EAAwBiE,EAAOkD,OAAOC,SAASvM,MAAM0E,kBACzF4H,OAAOC,SAASvM,MAAMkN,cAEtB3D,IAAS4D,uBAAuB5L,SAASC,eAAe,8BA0XpD0B,oBAxXR,WAEI2F,EAAc8E,YAAYvE,GAC1BkD,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAIfyD,OAAOC,SAASvM,MAAM0N,cAActE,EAAM9D,aAC1CgH,OAAOC,SAASvM,MAAMkN,cAEtB3D,IAAS4D,uBAAuB5L,SAASC,eAAe,gCA8WpDD,SAASC,eAAe,8BAh1CjBzB,EAo1CnByM,eAAiB,SAAC3D,EAAeO,EAAOqG,GACtBrG,EAAMrE,IACpB8D,EAAc2D,eAAepD,EAAOqG,GACpCrG,EAAMpE,MAAQoE,EAAMpE,MAAMnD,UAAU,EAAGuH,EAAMpE,MAAMlD,OAAS,IAAM,KAAOsC,EAAW8E,IAAOE,EAAMtE,OAAO+I,OAAO,UAAY,MAAQzJ,EAAW8E,IAAOuG,GAAQ5B,OAAO,UAAY,IAChL9N,EAAKoH,SAAS,CACV6F,UAAWnE,IAsXf,IAAIQ,EAAWR,EAAcS,YAAYF,EAAMlE,YAAYrB,KAC3D0F,IAASC,OACLrJ,EAAAC,EAAAC,cAACoJ,EAAD,CACI1H,YAAa,kBAAoBsH,EACjC3H,YAAa0H,EAAMzE,MACnBnC,YAAa4G,EAAMtE,MACnBlC,UAAW6M,EACXtN,WAAYiH,EAAMpE,MAClB/B,gBAvWR,WAEI,IAFuByM,EAEnB/F,GAAc,EACdC,EAAmB,GACnBC,EAAkBtI,SAASuI,iBAAiB,6CAC5CC,EAAgBxI,SAASuI,iBAAiB,8CAC1CE,EAAwB,GANL2F,EAAAlJ,OAAAyD,EAAA,EAAAzD,CAOAsD,GAPA,IAOvB,IAAA4F,EAAAxF,MAAAuF,EAAAC,EAAAvK,KAAAgF,MAAsC,KAA7BC,EAA6BqF,EAAAjM,MACT,WAArB4G,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,YAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,cAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,KA3BvB,MAAA+E,GAAAoF,EAAAtO,EAAAkJ,GAAA,QAAAoF,EAAAnF,IAqGvB,GAtEA3B,EAAc4B,OAAOC,QAAQ,SAASrJ,GAClC,IAAIsJ,EAAStJ,EAAEyD,MACX8F,EAAOvJ,EAAE0D,IACT8F,EAASxJ,EAAEsD,MACXmG,EAA6B,GAC7BD,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAG/C,IA3BqCoK,EA2BjC5E,EAAqB,GACrBC,EAAmB,GACnBC,EAA0B,GAC1BC,EAAwB,GA9BS0E,EAAApJ,OAAAyD,EAAA,EAAAzD,CA+BjBuD,GA/BiB,IA+BrC,IAAA6F,EAAA1F,MAAAyF,EAAAC,EAAAzK,KAAAgF,MAA2C,KAAlCiB,EAAkCuE,EAAAnM,MAGvC,GAFAuH,EAAqBK,EAAUjC,EAAMtE,MAAMjD,UAAU,GAAG,IACxDoJ,EAAmBI,EAAUjC,EAAMrE,IAAIlD,UAAU,GAAG,IAChDR,EAAE6D,aAAekE,EAAMlE,WAAY,KAAA4K,EAAAC,EAAAtJ,OAAAyD,EAAA,EAAAzD,CACVqE,GADU,IACnC,IAAAiF,EAAA5F,MAAA2F,EAAAC,EAAA3K,KAAAgF,MAGI,GAFAc,GADKM,EAA4CsE,EAAArM,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAOmH,EAAMnH,GAAK,CACnB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,OAXuB,MAAAkJ,GAAAwF,EAAA1O,EAAAkJ,GAAA,QAAAwF,EAAAvF,KAHA,IAAAwF,EAAAC,EAAAxJ,OAAAyD,EAAA,EAAAzD,CAkBlBoD,GAlBkB,IAkBvC,IAAAoG,EAAA9F,MAAA6F,EAAAC,EAAA7K,KAAAgF,MAAsC,KAA7BuB,EAA6BqE,EAAAvM,MAClC,GAAIpC,EAAEuK,YAAcD,EAASlI,MAAO,KAAAyM,EAAAC,EAAA1J,OAAAyD,EAAA,EAAAzD,CACPqE,GADO,IAChC,IAAAqF,EAAAhG,MAAA+F,EAAAC,EAAA/K,KAAAgF,MAAqD,KAA5CoB,EAGL,GAFAN,GADKM,EAA4C0E,EAAAzM,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAOmH,EAAMnH,GAAK,CACnB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,QAXoB,MAAAkJ,GAAA4F,EAAA9O,EAAAkJ,GAAA,QAAA4F,EAAA3F,OAnBD,MAAAD,GAAA0F,EAAA5O,EAAAkJ,GAAA,QAAA0F,EAAAzF,MA/BN,MAAAD,GAAAsF,EAAAxO,EAAAkJ,GAAA,QAAAsF,EAAArF,OAsErCb,EAAa,CACb,IADayG,EACTtQ,EAAU,6CACVkM,EAAM,GAFGqE,EAAA5J,OAAAyD,EAAA,EAAAzD,CAGMmD,GAHN,IAGb,IAAAyG,EAAAlG,MAAAiG,EAAAC,EAAAjL,KAAAgF,MAAqC,KAA5BK,EAA4B2F,EAAA3M,MAC7BgH,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,YAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,cAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAEV,IAAIE,EAA8BrD,EAAcS,YAAYmB,EAAOvF,YAAYrB,KAC/E/D,GAAO,OAAAqM,OAAW1B,EAAOzF,MAAlB,SAAAmH,OAA+BD,EAA/B,QAAAC,OAAiEH,EAAInK,UAAU,EAAEmK,EAAIlK,OAAO,KA1B1F,MAAAyI,GAAA8F,EAAAhP,EAAAkJ,GAAA,QAAA8F,EAAA7F,IA4Bb4B,MAAMtM,OACH,CAEHsJ,EAAMpE,MAAQzD,SAASC,eAAe,uBAAuBiC,MAAQ,KACvDlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,eAAeiC,MAAQ,IAClGlC,SAASC,eAAe,aAAaiC,MAAQ,MAAQlC,SAASC,eAAe,WAAWiC,MAAQ,IAChGlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,WAAWiC,MAAQ,IAG5GoF,EAAcwD,iBAAiBjD,EAAOkD,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,SAAW,IAAMhE,SAASC,eAAe,eAAeiC,MAAQ,OAG1JoF,EAAc2D,eAAepD,EAAOkD,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,OAAS,IAAMhE,SAASC,eAAe,aAAaiC,MAAQ,OAGpJ,IAAI/B,EAAc,uBAAyB4K,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GACtEyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,IAAM,kBACnDyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,IAAM,kBA+BrE,GA9BIN,SAASC,eAAe,0BAA0BI,QAElDwH,EAAMzE,MAAQjD,EAAc,wBAExBH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,yBAAyBI,UACjDF,GAA4B,OAE5BH,SAASC,eAAe,2BAA2BI,UACnDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAEhC0H,EAAMzE,MAAQjD,EAAYG,UAAU,EAAEH,EAAYI,OAAO,IAI7DP,SAASC,eAAe,gBAAkB6H,EAASlF,QAAQ,MAAO,KAAKvC,SAAU,EAC7EL,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,uBAAuBI,QAAS,CACxD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,yBAAyBI,QAAS,CAC1D,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,oBAAoBI,QAAS,CACrD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAKnByD,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAIfyD,OAAOC,SAASvM,MAAMiN,cAAc9H,EAAwBiE,EAAOkD,OAAOC,SAASvM,MAAM0E,kBACzF4H,OAAOC,SAASvM,MAAMkN,cAEtB3D,IAAS4D,uBAAuB5L,SAASC,eAAe,6BAGkB,IAAtE8K,OAAOC,SAAS1M,MAAM0H,0BAA0B,GAAG6F,iBACnDd,OAAOC,SAASpF,SAAS,CACrBI,0BAA2B,CAACd,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEjB6F,OAAOC,SAAS1M,MAAM0H,0BAA0B,IAFhC,IAGnB6F,eAAgB,OAGzB,WAAYd,OAAOC,SAAS7D,uCAEoC,IAA/D4D,OAAOC,SAAS1M,MAAMuH,mBAAmB,GAAGkG,gBAC5ChB,OAAOC,SAASpF,SAAS,CACrBC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEV6F,OAAOC,SAAS1M,MAAMuH,mBAAmB,IAFhC,IAGZkG,eAAgB,OAGzB,WAAYhB,OAAOC,SAAS9D,iCAC/B6D,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,iCAC/B2D,OAAOkB,gBAAgBrG,SAAS,CAACsG,IAAKnB,OAAOkB,gBAAgB3N,MAAM4N,IAAM,KAEzEnB,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,oCAgBvClH,mBA5XR,WACI8H,IAAS4D,uBAAuB5L,SAASC,eAAe,6BAGxD8K,OAAOC,SAASvM,MAAMiN,cAAc9H,EAAwBiE,EAAOkD,OAAOC,SAASvM,MAAM0E,kBACzF4H,OAAOC,SAASvM,MAAMkN,eAwXlBhK,oBAtXR,WAEIoJ,OAAOC,SAASvM,MAAM0N,cAActE,EAAM9D,aAC1CgH,OAAOC,SAASvM,MAAMkN,cAGtBrE,EAAc8E,YAAYvE,GAC1BkD,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAEfU,IAAS4D,uBAAuB5L,SAASC,eAAe,gCA6WpDD,SAASC,eAAe,8BA1tDjBzB,EA8tDnBuQ,UAAY,SAACzH,EAAeO,EAAOwE,EAAQvE,EAAUvE,EAAOC,GACxCqE,EAAMtE,MACRsE,EAAMrE,IACpB8D,EAAcwD,iBAAiBjD,EAAOtE,GACtC+D,EAAc2D,eAAepD,EAAOrE,GACpCqE,EAAMpE,MAAQoE,EAAMpE,MAAMnD,UAAU,EAAGuH,EAAMpE,MAAMlD,OAAS,IAAM,KAAOsC,EAAW8E,IAAOpE,GAAO+I,OAAO,UAAY,MAAQzJ,EAAW8E,IAAOnE,GAAK8I,OAAO,UAAY,IACvK9N,EAAKoH,SAAS,CACV6F,UAAWnE,IAuXfU,IAASC,OACLrJ,EAAAC,EAAAC,cAACoJ,EAAD,CACI1H,YAAa,kBAAoBsH,EACjC3H,YAAa0H,EAAMzE,MACnBnC,YAAasC,EACblC,UAAWmC,EACX5C,WAAYiH,EAAMpE,MAClB/B,gBAtWR,WAEI,IAFuBsN,EAEnB5G,GAAc,EACdC,EAAmB,GACnBC,EAAkBtI,SAASuI,iBAAiB,6CAC5CC,EAAgBxI,SAASuI,iBAAiB,8CAC1CE,EAAwB,GANLwG,EAAA/J,OAAAyD,EAAA,EAAAzD,CAOAsD,GAPA,IAOvB,IAAAyG,EAAArG,MAAAoG,EAAAC,EAAApL,KAAAgF,MAAsC,KAA7BC,EAA6BkG,EAAA9M,MACT,WAArB4G,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,YAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,cAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,aAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,IAEjB,WAArB6E,EAAW5G,OACXuG,EAAsBM,KAAK9E,IAAW,KA3BvB,MAAA+E,GAAAiG,EAAAnP,EAAAkJ,GAAA,QAAAiG,EAAAhG,IAqGvB,GAtEA3B,EAAc4B,OAAOC,QAAQ,SAASrJ,GAClC,IAAIsJ,EAAStJ,EAAEyD,MACX8F,EAAOvJ,EAAE0D,IACT8F,EAASxJ,EAAEsD,MACXmG,EAA6B,GAC7BD,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAE3CqF,EAAOhJ,UAAU,GAAIgJ,EAAO/I,QAAQH,SAAS,OAC7CmJ,EAA2BR,KAAK9E,IAAW,IAG/C,IA3BqCiL,EA2BjCzF,EAAqB,GACrBC,EAAmB,GACnBC,EAA0B,GAC1BC,EAAwB,GA9BSuF,EAAAjK,OAAAyD,EAAA,EAAAzD,CA+BjBuD,GA/BiB,IA+BrC,IAAA0G,EAAAvG,MAAAsG,EAAAC,EAAAtL,KAAAgF,MAA2C,KAAlCiB,EAAkCoF,EAAAhN,MAGvC,GAFAuH,EAAqBK,EAAUjC,EAAMtE,MAAMjD,UAAU,GAAG,IACxDoJ,EAAmBI,EAAUjC,EAAMrE,IAAIlD,UAAU,GAAG,IAChDR,EAAE6D,aAAekE,EAAMlE,WAAY,KAAAyL,EAAAC,EAAAnK,OAAAyD,EAAA,EAAAzD,CACVqE,GADU,IACnC,IAAA8F,EAAAzG,MAAAwG,EAAAC,EAAAxL,KAAAgF,MAGI,GAFAc,GADKM,EAA4CmF,EAAAlN,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAOmH,EAAMnH,GAAK,CACnB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,OAXuB,MAAAkJ,GAAAqG,EAAAvP,EAAAkJ,GAAA,QAAAqG,EAAApG,KAHA,IAAAqG,EAAAC,EAAArK,OAAAyD,EAAA,EAAAzD,CAkBlBoD,GAlBkB,IAkBvC,IAAAiH,EAAA3G,MAAA0G,EAAAC,EAAA1L,KAAAgF,MAAsC,KAA7BuB,EAA6BkF,EAAApN,MAClC,GAAIpC,EAAEuK,YAAcD,EAASlI,MAAO,KAAAsN,EAAAC,EAAAvK,OAAAyD,EAAA,EAAAzD,CACPqE,GADO,IAChC,IAAAkG,EAAA7G,MAAA4G,EAAAC,EAAA5L,KAAAgF,MAAqD,KAA5CoB,EAGL,GAFAN,GADKM,EAA4CuF,EAAAtN,OACRkH,EAAO9I,UAAU,GAAG,IAC7DsJ,EAAwBK,EAAeZ,EAAK/I,UAAU,GAAG,KACnDmJ,GAAsBE,GAA2BF,EAAqBG,GACrEF,EAAmBC,GAA2BD,GAAoBE,GAClED,GAA2BF,GAAsBE,EAA0BD,GAC3EE,EAAwBH,GAAsBG,GAAyBF,IACvE5J,EAAEY,KAAOmH,EAAMnH,GAAK,CACnB0H,GAAc,EACdC,EAAiBU,KAAKjJ,GACtB,QAXoB,MAAAkJ,GAAAyG,EAAA3P,EAAAkJ,GAAA,QAAAyG,EAAAxG,OAnBD,MAAAD,GAAAuG,EAAAzP,EAAAkJ,GAAA,QAAAuG,EAAAtG,MA/BN,MAAAD,GAAAmG,EAAArP,EAAAkJ,GAAA,QAAAmG,EAAAlG,OAsErCb,EAAa,CACb,IADasH,EACTnR,EAAU,6CACVkM,EAAM,GAFGkF,EAAAzK,OAAAyD,EAAA,EAAAzD,CAGMmD,GAHN,IAGb,IAAAsH,EAAA/G,MAAA8G,EAAAC,EAAA9L,KAAAgF,MAAqC,KAA5BK,EAA4BwG,EAAAxN,MAC7BgH,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,YAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,cAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,aAENvB,EAAO9F,MAAM9C,UAAU,GAAGuH,EAAMzE,MAAM7C,QAAQH,SAAS,QACvDqK,EAAM,WAEV,IAAIE,EAA8BrD,EAAcS,YAAYmB,EAAOvF,YAAYrB,KAC/E/D,GAAO,OAAAqM,OAAW1B,EAAOzF,MAAlB,SAAAmH,OAA+BD,EAA/B,QAAAC,OAAiEH,EAAInK,UAAU,EAAEmK,EAAIlK,OAAO,KA1B1F,MAAAyI,GAAA2G,EAAA7P,EAAAkJ,GAAA,QAAA2G,EAAA1G,IA4Bb4B,MAAMtM,OACH,CAEHsJ,EAAMpE,MAAQzD,SAASC,eAAe,uBAAuBiC,MAAQ,KACvDlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,eAAeiC,MAAQ,IAClGlC,SAASC,eAAe,aAAaiC,MAAQ,MAAQlC,SAASC,eAAe,WAAWiC,MAAQ,IAChGlC,SAASC,eAAe,aAAaiC,MAAQ,IAAMlC,SAASC,eAAe,WAAWiC,MAAQ,IAG5GoF,EAAcwD,iBAAiBjD,EAAOkD,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,SAAW,IAAMhE,SAASC,eAAe,eAAeiC,MAAQ,OAG1JoF,EAAc2D,eAAepD,EAAOkD,OAAOC,SAASvM,MAAMiJ,KAAO,IAAM1D,EAAiB,OAAS,IAAMhE,SAASC,eAAe,aAAaiC,MAAQ,OAGpJ,IAAI/B,EAAc,uBAAyB4K,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GACtEyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAM2F,WAAW9D,UAAU,EAAE,IAAM,kBACnDyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,GAC7CyK,OAAOC,SAASvM,MAAMiG,WAAWpE,UAAU,EAAE,IAAM,kBA+BrE,GA9BIN,SAASC,eAAe,0BAA0BI,QAElDwH,EAAMzE,MAAQjD,EAAc,wBAExBH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,yBAAyBI,UACjDF,GAA4B,OAE5BH,SAASC,eAAe,2BAA2BI,UACnDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAE5BH,SAASC,eAAe,0BAA0BI,UAClDF,GAA4B,OAE5BH,SAASC,eAAe,wBAAwBI,UAChDF,GAA4B,OAEhC0H,EAAMzE,MAAQjD,EAAYG,UAAU,EAAEH,EAAYI,OAAO,IAI7DP,SAASC,eAAe,gBAAkB6H,EAASlF,QAAQ,MAAO,KAAKvC,SAAU,EAC7EL,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,wBAAwBI,QAAS,CACzD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,uBAAuBI,QAAS,CACxD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,yBAAyBI,QAAS,CAC1D,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAGnB,GAAItH,SAASC,eAAe,oBAAoBI,QAAS,CACrD,IAAI6K,EAAa,EACjB5D,EAAc4B,OAAOC,QAAQ,SAAAgC,IACrBA,EAAKpH,aAAemH,GAAcC,EAAKzK,IAAMwK,KAC7CA,EAAaC,EAAKpH,eAG1B,IAAIqH,EAAW,CACX1K,GAAIwK,EACJzH,MAAOoE,EAAMpE,MACbF,MAAOsE,EAAMtE,MACbC,IAAKqE,EAAMrE,IACXG,WAAY,EACZ0H,QAAS,UACTC,aAAa,EACblI,MAAOyE,EAAMzE,OAEjB2H,OAAOC,SAASvM,MAAM8M,WAAWtI,EAAqBmI,EAAUL,OAAOC,SAASvM,MAAM0E,kBACtFmE,EAAckE,SAASJ,GACvBL,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAKnByD,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAIfyD,OAAOC,SAASvM,MAAMiN,cAAc9H,EAAwBiE,EAAOkD,OAAOC,SAASvM,MAAM0E,kBACzF4H,OAAOC,SAASvM,MAAMkN,cAEtB3D,IAAS4D,uBAAuB5L,SAASC,eAAe,6BAGkB,IAAtE8K,OAAOC,SAAS1M,MAAM0H,0BAA0B,GAAG6F,iBACnDd,OAAOC,SAASpF,SAAS,CACrBI,0BAA2B,CAACd,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEjB6F,OAAOC,SAAS1M,MAAM0H,0BAA0B,IAFhC,IAGnB6F,eAAgB,OAGzB,WAAYd,OAAOC,SAAS7D,uCAEoC,IAA/D4D,OAAOC,SAAS1M,MAAMuH,mBAAmB,GAAGkG,gBAC5ChB,OAAOC,SAASpF,SAAS,CACrBC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEV6F,OAAOC,SAAS1M,MAAMuH,mBAAmB,IAFhC,IAGZkG,eAAgB,OAGzB,WAAYhB,OAAOC,SAAS9D,iCAC/B6D,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,iCAC/B2D,OAAOkB,gBAAgBrG,SAAS,CAACsG,IAAKnB,OAAOkB,gBAAgB3N,MAAM4N,IAAM,KAEzEnB,OAAOC,SAASpF,SAAS,CACrBM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEX6F,OAAOC,SAAS1M,MAAM4H,oBAAoB,IAFhC,IAGb8F,OAAQjB,OAAOC,SAAS1M,MAAM4H,oBAAoB,GAAG8F,OAAS,OAGvE,WAAYjB,OAAOC,SAAS5D,oCAevClH,mBA5XR,WACI8H,IAAS4D,uBAAuB5L,SAASC,eAAe,6BAGxD8K,OAAOC,SAASvM,MAAMiN,cAAc9H,EAAwBiE,EAAOkD,OAAOC,SAASvM,MAAM0E,kBACzF4H,OAAOC,SAASvM,MAAMkN,eAwXlBhK,oBArXR,WAEIoJ,OAAOC,SAASvM,MAAM0N,cAActE,EAAM9D,aAC1CgH,OAAOC,SAASvM,MAAMkN,cAGtBrE,EAAc8E,YAAYvE,GAC1BkD,OAAOC,SAASpF,SAAS,CACrB6F,UAAWnE,IAEfU,IAAS4D,uBAAuB5L,SAASC,eAAe,gCA4WpDD,SAASC,eAAe,8BAtmEjBzB,EA0mEnBoR,iBAAmB,SAACtI,EAAeuI,EAAQhI,EAAOhH,EAAMwL,EAAQvE,EAAUvE,EAAOC,GAC7EsM,QAAQC,IAAIF,GACZC,QAAQC,IAAIlP,GACZmH,IAASC,OACLrJ,EAAAC,EAAAC,cAACkR,EAAD,CACIzR,QAAS,+CAAiDuJ,EAAW,IACrEnI,KAAM,WACFqI,IAAS4D,uBAAuB5L,SAASC,eAAe,qBAE5DD,SAASC,eAAe,mBAjnEhC,IAAIqH,EAAgB,IAAI2I,gBACpBzR,EAAKC,MAAMiJ,KACXwI,YAAUC,KACV,GACA,EACA,CACIC,eAAe,EACfC,wBAAwB,EACxBC,8BAA8B,EAC9BC,mBAAmB,GACpB,CACCC,2BAA4BhS,EAAK+I,uBACjCkJ,qBAAsBjS,EAAK6I,mBAdpB,OAiBfC,EAAcoJ,aAAa,CAAC,CAAChQ,GAAG,EAAG4B,KAAK,WAAY,CAAC5B,GAAG,EAAG4B,KAAK,OAAQ,CAAC5B,GAAG,EAAG4B,KAAK,UAAW,CAAC5B,GAAG,EAAG4B,KAAK,WAAY,CAAC5B,GAAG,EAAG4B,KAAK,eACnIgF,EAAcqJ,UAAUnS,EAAKC,MAAMyK,QACnC1K,EAAKF,MAAQ,CACTmN,UAAWnE,EACXzB,mBAAoB,GACpBG,0BAA2B,GAC3BE,oBAAqB,IAEzB6E,OAAOC,SAAP9F,OAAA0L,EAAA,EAAA1L,CAAA1G,GAzBeA,uDA4BV,IACGiN,EAAcpM,KAAKf,MAAnBmN,UACR,OACI7M,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAC+R,EAAAhS,EAAD,CACIyI,cAAemE,EACfqF,eAAgBzR,KAAKuI,aACrBkD,iBAAkBzL,KAAKyL,iBACvBG,eAAgB5L,KAAK4L,eACrB8D,UAAW1P,KAAK0P,UAChB3D,SAAU/L,KAAK+L,SACfwE,iBAAkBvQ,KAAKuQ,iEAQvCvQ,KAAKiG,+BACLjG,KAAK0G,gCACL1G,KAAK4G,iCAnDU1G,cC1JvB,SAASwR,EAAQlS,EAAEmS,GACf,IAAIC,EAAa,EAMjB,OALIpS,EAAE2B,YAAcwQ,EAAExQ,YAClByQ,EAAa,EACNpS,EAAE2B,YAAcwQ,EAAExQ,cACzByQ,GAAc,GAEXA,MAKLC,8MACF5S,MAAQ,CACJ6S,MAAO,GACPjF,IAAK,KAOTkF,UAAY,WAER7L,MAAM,uDACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACFA,EAAK0L,KAAKN,GACVvS,EAAKoH,SAAS,CAACuL,MAAOxL,EAAMuG,IAAK1N,EAAKF,MAAM4N,IAAI,MAGpDpG,WAAWtH,EAAK4S,UAAW,QAG/BE,WAAa,SAAClL,GACVb,MAAM,sDAAwDa,EAAQ1F,GAAGsB,WAAa,IAAK,CACvFqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAWnI,EAAKF,MAAM6S,MAAM3O,IAAI,SAAAU,GAClC,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAGf1E,EAAKoH,SAAS,CAACuL,MAAOxK,yEA/B1BtH,KAAK+R,6CAoCL,OACIxS,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACI7B,EAAAC,EAAAC,cAAA,OAAK4B,GAAG,wBACJ9B,EAAAC,EAAAC,cAACyS,EAAD,CACIrF,IAAK7M,KAAKf,MAAM4N,IAChBiF,MAAO9R,KAAKf,MAAM6S,MAClBzF,cAAerM,KAAKiS,cAG5B1S,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACqS,MAAM,UAAjB,yFApDqBjS,aA0D/BkS,yKACO,IAAAC,EAAArS,KACC8R,EAAQ9R,KAAKZ,MAAM0S,MAAM3O,IAAI,SAAAU,GAAI,OACnCtE,EAAAC,EAAAC,cAAC6S,EAAD,CACIzF,IAAKhJ,EAAKxC,GACVA,GAAIwC,EAAKxC,GACT2C,QAASH,EAAKG,QACd7C,YAAa0C,EAAK1C,YAClBoR,aAAc1O,EAAK0O,aACnBlG,cAAegG,EAAKjT,MAAMiN,kBAGlC,OACI9M,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACI7B,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAACqS,MAAM,UACf5S,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACiC,WAAW,OAAQyQ,aAAa,QAA3C,YACAjT,EAAAC,EAAAC,cAACgT,EAAD,CAAoBpR,GAAG,SAASqR,gBAAgB,EAAMZ,MAAO9R,KAAKZ,MAAM0S,SAE5EvS,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAAC6S,OAAO,OAAQ3P,MAAM,gBAC7B8O,WArBW5R,aA4B1B0S,8MACFC,aAAe,SAAChP,GACZA,EAAKxC,GAAKyR,EAAK1T,MAAMiC,GACrByR,EAAK1T,MAAMiN,cAAcxI,2DAGpB,IAAAkP,EAAA/S,KAcL,OAXQT,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACI7B,EAAAC,EAAAC,cAACuT,EAAD,CACI3R,GAAI0R,EAAK3T,MAAMiC,GACf2C,QAAS+O,EAAK3T,MAAM4E,QACpB7C,YAAa4R,EAAK3T,MAAM+B,YACxBoR,aAAcQ,EAAK3T,MAAMmT,aACzBU,aAAcF,EAAKF,uBAfH3S,aA0BlCgT,8MACFjU,MAAQ,CACJ+E,QAASmP,EAAK/T,MAAM4E,QACpB7C,YAAagS,EAAK/T,MAAM+B,YACxBoR,aAAcY,EAAK/T,MAAMmT,aACzB/L,mBAAoB,GACpBK,oBAAqB,MAqBzBC,wBAA0B,SAACC,GACvBb,MAAM,kEAAoEa,EAAQ1F,GAAGsB,WAAa,IAAK,CACnGqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAW6L,EAAKlU,MAAMuH,mBAAmBrD,IAAI,SAAAU,GAC/C,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAGfsP,EAAK5M,SAAS,CAACC,mBAAoBc,SAI3CG,wBAA0B,SAACV,GACvBb,MAAM,6DAA+Da,EAAQ1F,GAAGsB,WAAa,IAAK,CAC9FqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAW6L,EAAKlU,MAAM4H,oBAAoB1D,IAAI,SAAAU,GAChD,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAGfsP,EAAK5M,SAAS,CAACM,oBAAqBS,SAI5CI,yBAA2B,SAAC7D,GACxBA,EAAKxC,GAAK8R,EAAK/T,MAAM4E,QACrBmP,EAAKrM,wBAAwBjD,MAGjC+D,yBAA2B,SAAC/D,GACxBA,EAAKxC,GAAK8R,EAAK/T,MAAM4E,QACrBmP,EAAK1L,wBAAwB5D,MAGjCgE,6BAA+B,WAC3BsL,EAAKzL,yBAAyByL,EAAKlU,MAAMuH,mBAAmB,OAGhEuB,6BAA+B,WAC3BoL,EAAKvL,yBAAyBuL,EAAKlU,MAAM4H,oBAAoB,OAGjEuM,iBAAmB,WACfD,EAAK/T,MAAM6T,aAAXpN,OAAA4G,EAAA,EAAA5G,CAAA,GAA4BsN,EAAKlU,WAGrCoU,WAAa,WACT,IAAIC,EAAkBH,EAAKlU,MAAMkC,YAAc,eAO/C,GANAR,SAASC,eAAe0S,GAAiBtS,SAAU,EACnDmS,EAAK5M,SAAS,CAACgM,cAAc,GAAQ,WAAYvS,KAAKoT,qBACtDzK,IAAS4D,uBAAuB5L,SAASC,eAAe,kBACxD2S,IAGsD,IAAlDJ,EAAKlU,MAAMuH,mBAAmB,GAAGgN,aAAoB,CACrDL,EAAK5M,SAAS,CACVC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEVsN,EAAKlU,MAAMuH,mBAAmB,IAFrB,IAGZgN,aAAc,OAGvB,WAAYxT,KAAK6H,iCACpBsL,EAAK5M,SAAS,CACVM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEXsN,EAAKlU,MAAM4H,oBAAoB,IAFrB,IAGb8F,OAAQwG,EAAKlU,MAAM4H,oBAAoB,GAAG8F,OAAS,OAG5D,WAAY3M,KAAK+H,iCACpB2D,OAAOkB,gBAAgBrG,SAAS,CAACsG,IAAKnB,OAAOkB,gBAAgB3N,MAAM4N,IAAM,IAExE,IAEI4G,EAFS,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aACpE,IAAI3O,MACWQ,UAAY,WACvC3E,SAASC,eAAe6S,GAAWC,UAAU,WAC7CjN,WAAW,WAAY9F,SAASC,eAAe6S,GAAWE,SAAU,QAI7EC,WAAa,WACT,IAAIN,EAAkBH,EAAKlU,MAAMkC,YAAc,eAO/C,GANAR,SAASC,eAAe0S,GAAiBtS,SAAU,EACnDmS,EAAK5M,SAAS,CAACgM,cAAc,GAAO,WAAYvS,KAAKoT,qBACrDzK,IAAS4D,uBAAuB5L,SAASC,eAAe,kBACxD2S,IAGsD,IAAlDJ,EAAKlU,MAAMuH,mBAAmB,GAAGgN,aAAoB,CACrDL,EAAK5M,SAAS,CACVC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEVsN,EAAKlU,MAAMuH,mBAAmB,IAFrB,IAGZgN,aAAc,OAGvB,WAAYxT,KAAK6H,iCACpBsL,EAAK5M,SAAS,CACVM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEXsN,EAAKlU,MAAM4H,oBAAoB,IAFrB,IAGb8F,OAAQwG,EAAKlU,MAAM4H,oBAAoB,GAAG8F,OAAS,OAG5D,WAAY3M,KAAK+H,iCACpB2D,OAAOkB,gBAAgBrG,SAAS,CAACsG,IAAKnB,OAAOkB,gBAAgB3N,MAAM4N,IAAM,IAEzE,IAEI4G,EAFS,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aACpE,IAAI3O,MACWQ,UAAY,WACvC3E,SAASC,eAAe6S,GAAWC,UAAU,WAC7CjN,WAAW,WAAY9F,SAASC,eAAe6S,GAAWE,SAAU,QAI5EE,UAAY,WACR,IAAIC,EAAkBX,EAAKlU,MAAMkC,YAAc,eAC/CR,SAASC,eAAekT,GAAiB9S,SAAU,EACnDmS,EAAK5M,SAAS,CAACgM,cAAc,GAAO,WAAYvS,KAAKoT,qBACrDzK,IAAS4D,uBAAuB5L,SAASC,eAAe,qBAG5DmT,UAAY,WACR,IAAID,EAAkBX,EAAKlU,MAAMkC,YAAc,eAC/CR,SAASC,eAAekT,GAAiB9S,SAAU,EACnDmS,EAAK5M,SAAS,CAACgM,cAAc,GAAQ,WAAYvS,KAAKoT,qBACtDzK,IAAS4D,uBAAuB5L,SAASC,eAAe,qBAG5DoT,SAAW,SAACvT,GAER,GADAA,EAAEwT,iBAC6B,YAA3Bd,EAAKlU,MAAMkC,aAAwD,WAA3BgS,EAAKlU,MAAMkC,aACnB,IAA5BgS,EAAKlU,MAAMsT,aACP5R,SAASC,eAAe,iBAAiBsT,WAAWhT,OAAS,EAE7DiS,EAAK5M,SAAS,CAACgM,cAAc,GAAQ,WAAYvS,KAAKoT,qBAEtDzK,IAASC,OAAOrJ,EAAAC,EAAAC,cAAC0U,EAAD,CACIjV,QAAS,8BAAgCiU,EAAKlU,MAAMkC,YAAc,IAClE9B,UAAa8T,EAAKE,WAClB/T,SAAY6T,EAAKU,YACjBlT,SAASC,eAAe,kBAG5CD,SAASC,eAAe,iBAAiBsT,WAAWhT,OAAS,EAE7DiS,EAAK5M,SAAS,CAACgM,cAAc,GAAO,WAAYvS,KAAKoT,qBAErDzK,IAASC,OAAOrJ,EAAAC,EAAAC,cAAC0U,EAAD,CACIjV,QAAS,6BAA+BiU,EAAKlU,MAAMkC,YAAc,IACjE9B,UAAa8T,EAAKS,WAClBtU,SAAY6T,EAAKY,YACjBpT,SAASC,eAAe,uBASpD,GAJAuS,EAAK5M,SAAS,CAACgM,aAAc9R,EAAEC,OAAOM,SAAU,WAAYhB,KAAKoT,qBACjEG,IAGsD,IAAlDJ,EAAKlU,MAAMuH,mBAAmB,GAAGgN,aAAoB,CACrDL,EAAK5M,SAAS,CACVC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEVsN,EAAKlU,MAAMuH,mBAAmB,IAFrB,IAGZgN,aAAc,OAGvB,WAAYxT,KAAK6H,iCACpBsL,EAAK5M,SAAS,CACVM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEXsN,EAAKlU,MAAM4H,oBAAoB,IAFrB,IAGb8F,OAAQwG,EAAKlU,MAAM4H,oBAAoB,GAAG8F,OAAS,OAG5D,WAAY3M,KAAK+H,iCACpB2D,OAAOkB,gBAAgBrG,SAAS,CAACsG,IAAKnB,OAAOkB,gBAAgB3N,MAAM4N,IAAM,IAEzE,IAEI4G,EAFS,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aACpE,IAAI3O,MACWQ,UAAY,WACvC3E,SAASC,eAAe6S,GAAWC,UAAU,WAC7CjN,WAAW,WAAY9F,SAASC,eAAe6S,GAAWE,SAAU,wEA3N5D,IAAAS,EAAApU,KAEhBkG,MAAM,mEACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACF8N,EAAK7N,SAAS,CAACC,mBAAoBF,MAIvCJ,MAAM,8DACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACF8N,EAAK7N,SAAS,CAACM,oBAAqBP,MAGxCiN,qCAmNA,IAAgC,IAA5BvT,KAAKf,MAAMsT,aACX,IAAI8B,EAA4B,WAC5BC,EAAuB,kBAAoBtU,KAAKf,MAAMkC,YAAYwB,WAAa,gBAEnF0R,EAA4B,YAC5BC,EAAuB,kBAAoBtU,KAAKf,MAAMkC,YAAYwB,WAAa,UAGnF,OACIpD,EAAAC,EAAAC,cAAA,OAAK4B,GAAIrB,KAAKf,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,YAAamQ,UAAU,mBACvEnU,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACyU,UAAU,SAAUrS,WAAW,OAAQnC,MAAM,UAAxD,IAAoEC,KAAKf,MAAMkC,YAA/E,KACA5B,EAAAC,EAAAC,cAAA,OAAK4B,GAAIrB,KAAKf,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,cAChDhE,EAAAC,EAAAC,cAAA,OAAKC,MAAO2U,GACR9U,EAAAC,EAAAC,cAAA,OAAKC,MAAM,aACPH,EAAAC,EAAAC,cAAA,OAAKC,MAAM,eAAe8U,IAAKF,EAAsBG,IAAI,YAIrElV,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,iBACXnU,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLkS,UAAU,yBACVrS,GAAIrB,KAAKf,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,eAC/CvC,QAAShB,KAAKf,MAAMsT,aACpBG,eAAgB1S,KAAKf,MAAMsT,aAC3ByB,SAAUhU,KAAKgU,WAEnBzU,EAAAC,EAAAC,cAAA,SAAOiU,UAAU,sBAAsB3Q,QAAS/C,KAAKf,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,gBACvFhE,EAAAC,EAAAC,cAAA,QAAMiU,UAAU,sBAAsBgB,WAAS,KAAKC,UAAQ,QAC5DpV,EAAAC,EAAAC,cAAA,QAAMiU,UAAU,mCAzQRxT,aAiR1B0U,oDAKF,SAAAA,EAAYxV,GAAO,IAAAyV,EAAA,OAAAhP,OAAAC,EAAA,EAAAD,CAAA7F,KAAA4U,IACfC,EAAAC,EAAA9O,KAAAhG,KAAMZ,IALVH,MAAQ,CACJ+B,QAAS6T,EAAKzV,MAAMsT,gBAGLmC,EAKnBxB,WAAa,WAE8C,OAAnD1S,SAASC,eAAe,yBACuC,IAA3DD,SAASC,eAAe,uBAAuBI,SAC/CL,SAASC,eAAe,uBAAuB+S,QAGA,OAAnDhT,SAASC,eAAe,yBACuC,IAA3DD,SAASC,eAAe,uBAAuBI,SAC/CL,SAASC,eAAe,uBAAuB+S,QAGD,OAAlDhT,SAASC,eAAe,wBACsC,IAA1DD,SAASC,eAAe,sBAAsBI,SAC9CL,SAASC,eAAe,sBAAsB+S,QAGE,OAApDhT,SAASC,eAAe,0BACwC,IAA5DD,SAASC,eAAe,wBAAwBI,SAChDL,SAASC,eAAe,wBAAwB+S,QAGL,OAA/ChT,SAASC,eAAe,qBACmC,IAAvDD,SAASC,eAAe,mBAAmBI,SAC3CL,SAASC,eAAe,mBAAmB+S,QAGnDhT,SAASC,eAAe,UAAUI,SAAU,EAC5C6T,EAAKtO,SAAS,CAACvF,SAAS,IACxB2H,IAAS4D,uBAAuB5L,SAASC,eAAe,mBAlCzCiU,EAqCnBjB,WAAa,WAE8C,OAAnDjT,SAASC,eAAe,yBACuC,IAA3DD,SAASC,eAAe,uBAAuBI,SAC/CL,SAASC,eAAe,uBAAuB+S,QAGA,OAAnDhT,SAASC,eAAe,yBACuC,IAA3DD,SAASC,eAAe,uBAAuBI,SAC/CL,SAASC,eAAe,uBAAuB+S,QAGD,OAAlDhT,SAASC,eAAe,wBACsC,IAA1DD,SAASC,eAAe,sBAAsBI,SAC9CL,SAASC,eAAe,sBAAsB+S,QAGE,OAApDhT,SAASC,eAAe,0BACwC,IAA5DD,SAASC,eAAe,wBAAwBI,SAChDL,SAASC,eAAe,wBAAwB+S,QAGL,OAA/ChT,SAASC,eAAe,qBACmC,IAAvDD,SAASC,eAAe,mBAAmBI,SAC3CL,SAASC,eAAe,mBAAmB+S,QAGnDhT,SAASC,eAAe,UAAUI,SAAU,EAC5C6T,EAAKtO,SAAS,CAACvF,SAAS,IACxB2H,IAAS4D,uBAAuB5L,SAASC,eAAe,mBAlEzCiU,EAqEnBhB,UAAY,WACRlT,SAASC,eAAe,UAAUI,SAAU,EAC5C6T,EAAKtO,SAAS,CAACvF,SAAS,IACxB2H,IAAS4D,uBAAuB5L,SAASC,eAAe,mBAxEzCiU,EA2EnBd,UAAY,WACRpT,SAASC,eAAe,UAAUI,SAAU,EAC5C6T,EAAKtO,SAAS,CAACvF,SAAS,IACxB2H,IAAS4D,uBAAuB5L,SAASC,eAAe,mBA9EzCiU,EAiFnBb,SAAW,SAACvT,GACRA,EAAEwT,kBACyB,IAAvBY,EAAK5V,MAAM+B,QACX2H,IAASC,OAAOrJ,EAAAC,EAAAC,cAAC0U,EAAD,CACIjV,QAAQ,0CACRG,UAAawV,EAAKxB,WAClB/T,SAAYuV,EAAKhB,YAChBlT,SAASC,eAAe,kBAE7C+H,IAASC,OAAOrJ,EAAAC,EAAAC,cAAC0U,EAAD,CACIjV,QAAQ,yCACRG,UAAawV,EAAKjB,WAClBtU,SAAYuV,EAAKd,YACjBpT,SAASC,eAAe,mBA5FhD8K,OAAOqJ,OAAPlP,OAAA0L,EAAA,EAAA1L,CAAAgP,GAFeA,uDAmGf,IADK/L,EACD4J,GAAiB,EADhBrJ,EAAAxD,OAAAyD,EAAA,EAAAzD,CAEY7F,KAAKZ,MAAM0S,OAFvB,IAEL,IAAAzI,EAAAE,MAAAT,EAAAO,EAAA7E,KAAAgF,MAAmC,EACL,IADKV,EAAAjG,MACtB0P,eACLG,GAAiB,IAJpB,MAAA/I,GAAAN,EAAA5I,EAAAkJ,GAAA,QAAAN,EAAAO,IAOL,OACIrK,EAAAC,EAAAC,cAAA,OAAKiU,UAAW,iBAAmB1T,KAAKZ,MAAM4V,MAAQ,gBAAkB,KACpEzV,EAAAC,EAAAC,cAAA,SACI+B,KAAK,WACLyB,KAAMjD,KAAKZ,MAAM6V,KACjBvB,UAAU,yBACVrS,GAAIrB,KAAKZ,MAAMiC,GACfL,QAAShB,KAAKgB,QACd0R,eAAgBA,EAChBzS,QAASD,KAAKgU,SACdkB,SAAUlV,KAAKZ,MAAM8V,WAExBlV,KAAKZ,MAAMiC,GACR9B,EAAAC,EAAAC,cAAA,SAAOiU,UAAU,sBAAsB3Q,QAAS/C,KAAKZ,MAAMiC,IACvD9B,EAAAC,EAAAC,cAAA,QACIiU,UAAW1T,KAAKZ,MAAM8V,SAAW,6CAA+C,sBAChFR,WAAS,KACTC,UAAQ,QAEZpV,EAAAC,EAAAC,cAAA,QACIiU,UAAW1T,KAAKZ,MAAM8V,SAAW,8CAA+C,0BAGxF,aArIahV,aA6IjC,SAASqT,IAED5S,SAASC,eAAe,uBAAuBI,SAAWL,SAASC,eAAe,uBAAuBI,SACzGL,SAASC,eAAe,sBAAsBI,SAAWL,SAASC,eAAe,wBAAwBI,SACzGL,SAASC,eAAe,mBAAmBI,SAC3C0K,OAAOqJ,OAAOxO,SAAS,CAACvF,SAAS,IACjCL,SAASC,eAAe,UAAUI,SAAU,GAGvCL,SAASC,eAAe,uBAAuBI,SAAYL,SAASC,eAAe,uBAAuBI,SAC1GL,SAASC,eAAe,sBAAsBI,SAAYL,SAASC,eAAe,wBAAwBI,SAC1GL,SAASC,eAAe,mBAAmBI,UAC5C0K,OAAOqJ,OAAOxO,SAAS,CAACvF,SAAS,IACjCL,SAASC,eAAe,UAAUI,SAAU,GAQxD,SAASmU,EAAY3V,EAAEmS,GACnB,IAAIC,EAAa,EAMjB,OALIpS,EAAE0E,MAAQyN,EAAEzN,MACZ0N,EAAa,EACNpS,EAAE0E,MAAQyN,EAAEzN,QACnB0N,GAAc,GAEXA,EAGX,SAASpO,EAAWhB,GAChB,IAAIiB,EAAWhB,OAAOD,EAAKvB,UAAU,EAAE,IACnCyC,EAAWD,GAAY,GAAK,KAAO,KAEnCE,GADJF,EAAYA,EAAW,IAAO,IACH,IAAMjB,EAAKvB,UAAU,EAAE,GAAK,IAAMyC,EAK7D,OAHyB,IAArBC,EAAUzC,SACVyC,EAAY,IAAMA,GAEdA,EAGZ,SAASiB,IACL,IAAIC,EAAQ,IAAIC,KACZC,EAAa,IAAID,KACjBE,EAAc,IAAIF,KAClBG,EAAgB,IAAIH,KACpBI,EAAe,IAAIJ,KACnBK,EAAa,IAAIL,KACjBM,EAAe,IAAIN,KACnBO,EAAa,IAAIP,KA6BrB,OA3BuB,IAAnBD,EAAMS,UAENP,EAAWQ,QAAQV,EAAMW,UAAY,GACrCR,EAAYO,QAAQV,EAAMW,UAAY,GACtCP,EAAcM,QAAQV,EAAMW,UAAY,GACxCN,EAAaK,QAAQV,EAAMW,UAAY,GACvCL,EAAWI,QAAQV,EAAMW,UAAY,GACrCJ,EAAaG,QAAQV,EAAMW,UAAY,GACvCH,EAAWE,QAAQV,EAAMW,aAEzBT,EAAWQ,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WAChDN,EAAYO,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WACjDL,EAAcM,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WACnDJ,EAAaK,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WAClDH,EAAWI,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WAChDF,EAAaG,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,WAClDD,EAAWE,QAAQV,EAAMW,WAAa,EAAIX,EAAMS,YAW7C,CARPP,EAAaA,EAAWU,cAAgB,KAAyD,KAAjDV,EAAWW,WAAa,GAAG/C,WAAWzB,OAAe,KAAO6D,EAAWW,WAAa,GAAG/C,WAAcoC,EAAWW,WAAa,GAAM,KAAkD,IAA3CX,EAAWS,UAAU7C,WAAWzB,OAAe,IAAM6D,EAAWS,UAAU7C,WAAaoC,EAAWS,WAC5RR,EAAcA,EAAYS,cAAgB,KAA0D,KAAlDT,EAAYU,WAAa,GAAG/C,WAAWzB,OAAe,KAAO8D,EAAYU,WAAa,GAAG/C,WAAcqC,EAAYU,WAAa,GAAM,KAAmD,IAA5CV,EAAYQ,UAAU7C,WAAWzB,OAAe,IAAM8D,EAAYQ,UAAU7C,WAAaqC,EAAYQ,WACpSP,EAAgBA,EAAcQ,cAAgB,KAA4D,KAApDR,EAAcS,WAAa,GAAG/C,WAAWzB,OAAe,KAAO+D,EAAcS,WAAa,GAAG/C,WAAcsC,EAAcS,WAAa,GAAM,KAAqD,IAA9CT,EAAcO,UAAU7C,WAAWzB,OAAe,IAAM+D,EAAcO,UAAU7C,WAAasC,EAAcO,WACpTN,EAAeA,EAAaO,cAAgB,KAA2D,KAAnDP,EAAaQ,WAAa,GAAG/C,WAAWzB,OAAe,KAAOgE,EAAaQ,WAAa,GAAG/C,WAAcuC,EAAaQ,WAAa,GAAO,KAAoD,IAA7CR,EAAaM,UAAU7C,WAAWzB,OAAe,IAAMgE,EAAaM,UAAU7C,WAAauC,EAAaM,WAC7SL,EAAaA,EAAWM,cAAgB,KAAyD,KAAjDN,EAAWO,WAAa,GAAG/C,WAAWzB,OAAe,KAAOiE,EAAWO,WAAa,GAAG/C,WAAcwC,EAAWO,WAAa,GAAM,KAAkD,IAA3CP,EAAWK,UAAU7C,WAAWzB,OAAe,IAAMiE,EAAWK,UAAU7C,WAAawC,EAAWK,WAC5RJ,EAAeA,EAAaK,cAAgB,KAA2D,KAAnDL,EAAaM,WAAa,GAAG/C,WAAWzB,OAAe,KAAOkE,EAAaM,WAAa,GAAG/C,WAAcyC,EAAaM,WAAa,GAAM,KAAoD,IAA7CN,EAAaI,UAAU7C,WAAWzB,OAAe,IAAMkE,EAAaI,UAAU7C,WAAayC,EAAaI,WAC5SH,EAAaA,EAAWI,cAAgB,KAAyD,KAAjDJ,EAAWK,WAAa,GAAG/C,WAAWzB,OAAe,KAAOmE,EAAWK,WAAa,GAAG/C,WAAc0C,EAAWK,WAAa,GAAM,KAAkD,IAA3CL,EAAWG,UAAU7C,WAAWzB,OAAe,IAAMmE,EAAWG,UAAU7C,WAAa0C,EAAWG,YAhFhSmD,IAASC,OAAOrJ,EAAAC,EAAAC,cAAC2V,EAAD,MAA4BzU,SAASC,eAAe,uBAoG9DyU,8MACFpW,MAAQ,CACJ4K,OAAQ,GACRyL,MAAO,GACPC,WAAY,GACZzD,MAAO,GACPhO,gBAAiB,KA8FrBwI,YAAc,WAEVpG,MAAM,yDACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACFkP,EAAKjP,SAAS,CAACuL,MAAOxL,IACtB,IAFU6D,EAENsL,EAAe,GAFTjL,EAAA3E,OAAAyD,EAAA,EAAAzD,CAGQS,GAHR,IAGV,IAAAkE,EAAAjB,MAAAY,EAAAK,EAAAhG,KAAAgF,MAAwB,KAAfkM,EAAevL,EAAAtH,MACpB2S,EAAKjP,SAAS,CAACzC,gBAAiB4R,EAAM1R,SAAU,WAAYyM,QAAQC,IAAI1Q,KAAKf,MAAM6E,mBACnF,IAAIQ,EAAaoR,EAAMrR,eACnBsR,EAAUD,EAAMzR,SAChBrC,EAAc8T,EAAM9T,YACpBI,EAAY0T,EAAM1T,UAGlB4T,EAAapS,EAAW5B,GACxBiU,EAAWrS,EAAWxB,GACtBT,EAAamU,EAAMnU,WAAa,KAAOqU,EAAa,MAAQC,EAAW,IAVvDC,EAY+ElR,IAZ/EmR,EAAAlQ,OAAAmQ,EAAA,EAAAnQ,CAAAiQ,EAAA,GAYf/Q,EAZegR,EAAA,GAYH/Q,EAZG+Q,EAAA,GAYU9Q,EAZV8Q,EAAA,GAYyB7Q,EAZzB6Q,EAAA,GAYuC5Q,EAZvC4Q,EAAA,GAYmD3Q,EAZnD2Q,EAAA,GAYiE1Q,EAZjE0Q,EAAA,GAahBjV,EAAc,uBAAyBiE,EAAW9D,UAAU,EAAE,GAAK8D,EAAW9D,UAAU,EAAE,GAAK8D,EAAW9D,UAAU,EAAE,IAAM,kBAAoBoE,EAAWpE,UAAU,EAAE,GAAKoE,EAAWpE,UAAU,EAAE,GAAKoE,EAAWpE,UAAU,EAAE,IAAM,kBACzOW,EAAcmD,EAAa,IAAMnD,EACjCI,EAAY+C,EAAa,IAAM/C,EAC3B0T,EAAM5U,YAAYC,SAAS,YAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,aAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,eAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,cAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,YAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,cAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,YAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAK5C2U,EAAa/L,KAAK,CAACrI,GAAIsU,EAASzR,MAAOtC,EAAauC,IAAKnC,EAAWoC,MAAO7C,EAAYwC,MAAOjD,EAAawD,WAAYA,EAAY2H,aAAa,EAAOD,QAAS,UAAWtH,YAAagR,EAAMrU,MAtExL,MAAAsI,GAAAa,EAAA/J,EAAAkJ,GAAA,QAAAa,EAAAZ,IAwEV6L,EAAazD,KAAKmD,GAClBK,EAAKjP,SAAS,CACVsD,OAAQ4L,EACRH,MAAO,CAACvQ,EAAYC,EAAaC,EAAeC,EAAcC,EAAYC,EAAcC,UAKpG6Q,cAAgB,SAACrS,GACb,IAAMsS,EAxMd,SAAmBlT,GACf,IAAImT,EAAc,KAClB,GAAIzV,SAAS0V,QAA8B,KAApB1V,SAAS0V,OAE5B,IADA,IAAMC,EAAU3V,SAAS0V,OAAOE,MAAM,KAC7BC,EAAI,EAAGA,EAAIF,EAAQpV,OAAQsV,IAAK,CACrC,IAAMH,EAASC,EAAQE,GAAGC,OAC1B,GAAIJ,EAAOpV,UAAU,EAAEgC,EAAK/B,OAAO,KAAQ+B,EAAO,IAAM,CACpDmT,EAAcM,mBAAmBL,EAAOpV,UAAUgC,EAAK/B,OAAS,IAChE,OAIZ,OAAOkV,EA4LeO,CAAU,aAC5BzQ,MAAM,wDAAyD,CAC3Dc,OAAQ,OACRC,QAAS,CACLC,eAAgB,mBAChB0P,cAAeT,GAEnBhP,KAAMC,KAAKC,UAAUxD,KAExBsC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAtC,GACF2R,EAAKjP,SAAS,CAACuL,MAAO0D,EAAKvW,MAAM6S,MAAMvG,OAAO,CAAC1H,WAIvDoO,WAAa,SAAClL,GACVb,MAAM,wDAA0Da,EAAQ1F,GAAGsB,WAAa,IAAK,CACzFqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAWkO,EAAKvW,MAAM6S,MAAM3O,IAAI,SAAAU,GAClC,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAIf2R,EAAKjP,SAAS,CAACuL,MAAOxK,SAI9BuP,WAAa,SAACC,GACV5Q,MAAM,wDAA0D4Q,EAAS,IAAK,CAC1E9P,OAAQ,SACRC,QAAS,CACLC,eAAgB,sBAGvBf,KAAK,WACFqP,EAAKjP,SAAS,CAACuL,MAAO0D,EAAKvW,MAAM6S,MAAMiF,OAAO,SAAAlT,GAAI,OAAIA,EAAKxC,KAAOyV,WAI1EE,qBAAuB,WACnBrW,SAASC,eAAe,QAAQsT,WAAW,GAAGA,WAAW,GAAGA,WAAW,GAAG+C,YAAYtW,SAASC,eAAe,QAAQsT,WAAW,GAAGA,WAAW,GAAGA,WAAW,GAAGA,WAAW,OAG/KgD,SAAW,WAGP,IAAIV,EACAW,EACJ,IAJAxW,SAASyW,uBAAuB,sBAAsB,GAAGlD,WAAW,GAAGA,WAAW,GAAGA,WAAW,IAAIpU,MAAMuX,YAAc,EAInHb,EAAE,EAAGA,EAAE,EAAGA,IACX,IAAKW,EAAE,EAAGA,EAAE,GAAIA,GAAG,EACfxW,SAASyW,uBAAuB,sBAAsB,GAAGlD,WAAW,GAAGA,WAAWsC,GAAGtC,WAAWiD,GAAGrX,MAAMuX,YAAc,uBAKnIC,aAAe,WACX9B,EAAKlJ,cAELkJ,EAAKjP,SAAS,CAACgP,WAAY,WAG3B5U,SAASC,eAAe,kBAAkB8S,UAAY,WACtD/S,SAASC,eAAe,mBAAmB8S,UAAY,GACvD/S,SAASC,eAAe,qBAAqB8S,UAAY,GACzD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GAGtD/K,IAAS4D,uBAAuB5L,SAASC,eAAe,SACxD+H,IAASC,OACLrJ,EAAAC,EAAAC,cAAC8X,EAAD,CACIjL,YAAakJ,EAAKlJ,YAClBzC,OAAQ2L,EAAKvW,MAAM4K,OACnBxB,KAAMmN,EAAKvW,MAAMqW,MAAM,GACvBxI,cAAe0I,EAAKqB,WACpB3K,WAAYsJ,EAAKU,cACjB7J,cAAemJ,EAAKvD,WACpBH,MAAO0D,EAAKvW,MAAM6S,MAClB/M,WAAYyQ,EAAKvW,MAAMqW,MAAM,GAC7BjQ,WAAYmQ,EAAKvW,MAAMqW,MAAM,GAC7BlK,IAAI,SACJtH,gBAAiB0R,EAAKvW,MAAM6E,kBAC5BnD,SAASC,eAAe,SAChC4U,EAAKwB,uBACLxB,EAAK0B,cAGTM,cAAgB,WACZhC,EAAKlJ,cAELkJ,EAAKjP,SAAS,CAACgP,WAAY,YAG3B5U,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,mBAAmB8S,UAAY,WACvD/S,SAASC,eAAe,qBAAqB8S,UAAY,GACzD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GAGtD/K,IAAS4D,uBAAuB5L,SAASC,eAAe,SACxD+H,IAASC,OACLrJ,EAAAC,EAAAC,cAAC8X,EAAD,CACIjL,YAAakJ,EAAKlJ,YAClBzC,OAAQ2L,EAAKvW,MAAM4K,OACnBxB,KAAMmN,EAAKvW,MAAMqW,MAAM,GACvBxI,cAAe0I,EAAKqB,WACpB3K,WAAYsJ,EAAKU,cACjB7J,cAAemJ,EAAKvD,WACpBH,MAAO0D,EAAKvW,MAAM6S,MAClB/M,WAAYyQ,EAAKvW,MAAMqW,MAAM,GAC7BjQ,WAAYmQ,EAAKvW,MAAMqW,MAAM,GAC7BlK,IAAI,UACJtH,gBAAiB0R,EAAKvW,MAAM6E,kBAC5BnD,SAASC,eAAe,SAChC4U,EAAKwB,uBACLxB,EAAK0B,cAGTO,gBAAkB,WACdjC,EAAKlJ,cAELkJ,EAAKjP,SAAS,CAACgP,WAAY,cAG3B5U,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,mBAAmB8S,UAAY,GACvD/S,SAASC,eAAe,qBAAqB8S,UAAY,WACzD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GAGtD/K,IAAS4D,uBAAuB5L,SAASC,eAAe,SACxD+H,IAASC,OACLrJ,EAAAC,EAAAC,cAAC8X,EAAD,CACIjL,YAAakJ,EAAKlJ,YAClBzC,OAAQ2L,EAAKvW,MAAM4K,OACnBxB,KAAMmN,EAAKvW,MAAMqW,MAAM,GACvBxI,cAAe0I,EAAKqB,WACpB3K,WAAYsJ,EAAKU,cACjB7J,cAAemJ,EAAKvD,WACpBH,MAAO0D,EAAKvW,MAAM6S,MAClB/M,WAAYyQ,EAAKvW,MAAMqW,MAAM,GAC7BjQ,WAAYmQ,EAAKvW,MAAMqW,MAAM,GAC7BlK,IAAI,YACJtH,gBAAiB0R,EAAKvW,MAAM6E,kBAC5BnD,SAASC,eAAe,SAChC4U,EAAKwB,uBACLxB,EAAK0B,cAGTQ,eAAiB,WACblC,EAAKlJ,cAELkJ,EAAKjP,SAAS,CAACgP,WAAY,aAG3B5U,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,mBAAmB8S,UAAY,GACvD/S,SAASC,eAAe,qBAAqB8S,UAAY,GACzD/S,SAASC,eAAe,oBAAoB8S,UAAY,WACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GAGtD/K,IAAS4D,uBAAuB5L,SAASC,eAAe,SACxD+H,IAASC,OACLrJ,EAAAC,EAAAC,cAAC8X,EAAD,CACIjL,YAAakJ,EAAKlJ,YAClBzC,OAAQ2L,EAAKvW,MAAM4K,OACnBxB,KAAMmN,EAAKvW,MAAMqW,MAAM,GACvBxI,cAAe0I,EAAKqB,WACpB3K,WAAYsJ,EAAKU,cACjB7J,cAAemJ,EAAKvD,WACpBH,MAAO0D,EAAKvW,MAAM6S,MAClB/M,WAAYyQ,EAAKvW,MAAMqW,MAAM,GAC7BjQ,WAAYmQ,EAAKvW,MAAMqW,MAAM,GAC7BlK,IAAI,WACJtH,gBAAiB0R,EAAKvW,MAAM6E,kBAC5BnD,SAASC,eAAe,SAChC4U,EAAKwB,uBACLxB,EAAK0B,cAGTS,aAAe,WACXnC,EAAKlJ,cAELkJ,EAAKjP,SAAS,CAACgP,WAAY,WAG3B5U,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,mBAAmB8S,UAAY,GACvD/S,SAASC,eAAe,qBAAqB8S,UAAY,GACzD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,WACtD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GAGtD/K,IAAS4D,uBAAuB5L,SAASC,eAAe,SACxD+H,IAASC,OACLrJ,EAAAC,EAAAC,cAAC8X,EAAD,CACIjL,YAAakJ,EAAKlJ,YAClBzC,OAAQ2L,EAAKvW,MAAM4K,OACnBxB,KAAMmN,EAAKvW,MAAMqW,MAAM,GACvBxI,cAAe0I,EAAKqB,WACpB3K,WAAYsJ,EAAKU,cACjB7J,cAAemJ,EAAKvD,WACpBH,MAAO0D,EAAKvW,MAAM6S,MAClB/M,WAAYyQ,EAAKvW,MAAMqW,MAAM,GAC7BjQ,WAAYmQ,EAAKvW,MAAMqW,MAAM,GAC7BlK,IAAI,SACJtH,gBAAiB0R,EAAKvW,MAAM6E,kBAC5BnD,SAASC,eAAe,SAChC4U,EAAKwB,uBACLxB,EAAK0B,cAGTU,eAAiB,WACbpC,EAAKlJ,cAELkJ,EAAKjP,SAAS,CAACgP,WAAY,aAG3B5U,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,mBAAmB8S,UAAY,GACvD/S,SAASC,eAAe,qBAAqB8S,UAAY,GACzD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,oBAAoB8S,UAAY,WACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GAGtD/K,IAAS4D,uBAAuB5L,SAASC,eAAe,SACxD+H,IAASC,OACLrJ,EAAAC,EAAAC,cAAC8X,EAAD,CACIjL,YAAakJ,EAAKlJ,YAClBzC,OAAQ2L,EAAKvW,MAAM4K,OACnBxB,KAAMmN,EAAKvW,MAAMqW,MAAM,GACvBxI,cAAe0I,EAAKqB,WACpB3K,WAAYsJ,EAAKU,cACjB7J,cAAemJ,EAAKvD,WACpBH,MAAO0D,EAAKvW,MAAM6S,MAClB/M,WAAYyQ,EAAKvW,MAAMqW,MAAM,GAC7BjQ,WAAYmQ,EAAKvW,MAAMqW,MAAM,GAC7BlK,IAAI,WACJtH,gBAAiB0R,EAAKvW,MAAM6E,kBAC5BnD,SAASC,eAAe,SAChC4U,EAAKwB,uBACLxB,EAAK0B,cAGTW,aAAe,WACXrC,EAAKlJ,cAELkJ,EAAKjP,SAAS,CAACgP,WAAY,WAG3B5U,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,mBAAmB8S,UAAY,GACvD/S,SAASC,eAAe,qBAAqB8S,UAAY,GACzD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,GACtD/S,SAASC,eAAe,oBAAoB8S,UAAY,GACxD/S,SAASC,eAAe,kBAAkB8S,UAAY,WAGtD/K,IAAS4D,uBAAuB5L,SAASC,eAAe,SACxD+H,IAASC,OACLrJ,EAAAC,EAAAC,cAAC8X,EAAD,CACIjL,YAAakJ,EAAKlJ,YAClBzC,OAAQ2L,EAAKvW,MAAM4K,OACnBxB,KAAMmN,EAAKvW,MAAMqW,MAAM,GACvBxI,cAAe0I,EAAKqB,WACpB3K,WAAYsJ,EAAKU,cACjB7J,cAAemJ,EAAKvD,WACpBH,MAAO0D,EAAKvW,MAAM6S,MAClB/M,WAAYyQ,EAAKvW,MAAMqW,MAAM,GAC7BjQ,WAAYmQ,EAAKvW,MAAMqW,MAAM,GAC7BlK,IAAI,SACJtH,gBAAiB0R,EAAKvW,MAAM6E,kBAC5BnD,SAASC,eAAe,SAChC4U,EAAKwB,uBACLxB,EAAK0B,8EA3dW,IAAAY,EAAA9X,KAEhBkG,MAAM,yDACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACFwR,EAAKvR,SAAS,CAACuL,MAAOxL,IACtB,IAFUoE,EAEN+K,EAAe,GAFT9K,EAAA9E,OAAAyD,EAAA,EAAAzD,CAGQS,GAHR,IAGV,IAAAqE,EAAApB,MAAAmB,EAAAC,EAAAnG,KAAAgF,MAAwB,KAAfkM,EAAehL,EAAA7H,MACpBiV,EAAKvR,SAAS,CAACzC,gBAAiB4R,EAAM1R,SAAU,WAAWyM,QAAQC,IAAI1Q,KAAKf,MAAM6E,mBAClF,IAAIQ,EAAaoR,EAAMrR,eACnBsR,EAAUD,EAAMzR,SAChBrC,EAAc8T,EAAM9T,YACpBI,EAAY0T,EAAM1T,UAGlB4T,EAAapS,EAAW5B,GACxBiU,EAAWrS,EAAWxB,GACtBT,EAAamU,EAAMnU,WAAa,KAAOqU,EAAa,MAAQC,EAAW,IAVvDkC,EAY+EnT,IAZ/EoT,EAAAnS,OAAAmQ,EAAA,EAAAnQ,CAAAkS,EAAA,GAYfhT,EAZeiT,EAAA,GAYHhT,EAZGgT,EAAA,GAYU/S,EAZV+S,EAAA,GAYyB9S,EAZzB8S,EAAA,GAYuC7S,EAZvC6S,EAAA,GAYmD5S,EAZnD4S,EAAA,GAYiE3S,EAZjE2S,EAAA,GAahBlX,EAAc,uBAAyBiE,EAAW9D,UAAU,EAAE,GAAK8D,EAAW9D,UAAU,EAAE,GAAK8D,EAAW9D,UAAU,EAAE,IAAM,kBAAoBoE,EAAWpE,UAAU,EAAE,GAAKoE,EAAWpE,UAAU,EAAE,GAAKoE,EAAWpE,UAAU,EAAE,IAAM,kBACzOW,EAAcmD,EAAa,IAAMnD,EACjCI,EAAY+C,EAAa,IAAM/C,EAC3B0T,EAAM5U,YAAYC,SAAS,YAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,aAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,eAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,cAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,YAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,cAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAGxC4U,EAAM5U,YAAYC,SAAS,YAC8B,MAA7CD,EAAYmV,OAAOnV,EAAYI,OAAO,GACtCJ,GAA4B,KAE5BA,GAA4B,OAK5C2U,EAAa/L,KAAK,CAACrI,GAAIsU,EAASzR,MAAOtC,EAAauC,IAAKnC,EAAWoC,MAAO7C,EAAYwC,MAAOjD,EAAawD,WAAYA,EAAY2H,aAAa,EAAOD,QAAS,UAAWtH,YAAagR,EAAMrU,KAG9L,IAEIoS,EAFS,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aACpE,IAAI3O,MACWQ,UAAY,WACvC3E,SAASC,eAAe6S,GAAWC,UAAU,WAC7CjN,WAAW,WAAY9F,SAASC,eAAe6S,GAAWE,SAAU,KA7E9D,MAAAhK,GAAAgB,EAAAlK,EAAAkJ,GAAA,QAAAgB,EAAAf,IA+EV6L,EAAazD,KAAKmD,GAClB2C,EAAKvR,SAAS,CACVsD,OAAQ4L,EACRH,MAAO,CAACvQ,EAAYC,EAAaC,EAAeC,EAAcC,EAAYC,EAAcC,wCAyYhG,OACI9F,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACI7B,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,OACXnU,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,iBAAiBpB,QAASD,KAAKsX,cAA1C,YACA/X,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,kBAAkBpB,QAASD,KAAKwX,eAA3C,aACAjY,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,oBAAoBpB,QAASD,KAAKyX,iBAA7C,eACAlY,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,mBAAmBpB,QAASD,KAAK0X,gBAA5C,cACAnY,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,iBAAiBpB,QAASD,KAAK2X,cAA1C,YACApY,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,mBAAmBpB,QAASD,KAAK4X,gBAA5C,cACArY,EAAAC,EAAAC,cAAA,UAAQ4B,GAAG,iBAAiBpB,QAASD,KAAK6X,cAA1C,aAEJtY,EAAAC,EAAAC,cAACwY,EAAD,CACI3L,YAAatM,KAAKsM,YAClBzC,OAAQ7J,KAAKf,MAAM4K,OACnByL,MAAOtV,KAAKf,MAAMqW,MAClBxI,cAAe9M,KAAK6W,WACpB3K,WAAYlM,KAAKkW,cACjB7J,cAAerM,KAAKiS,WACpBH,MAAO9R,KAAKf,MAAM6S,MAClBhO,gBAAiB9D,KAAKf,MAAM6E,kBAEhCvE,EAAAC,EAAAC,cAAA,OAAK4B,GAAG,4BAAR,aA7fuBnB,aAmgBjCgY,yKAEE,IACIrT,EAAQ,IAAIC,KACZqT,EAAatT,EAAMY,cAAgB,KAAoD,KAA5CZ,EAAMa,WAAa,GAAG/C,WAAWzB,OAAe,KAAO2D,EAAMa,WAAa,GAAG/C,WAAckC,EAAMa,WAAa,GAAM,KAA6C,IAAtCb,EAAMW,UAAU7C,WAAWzB,OAAe,IAAM2D,EAAMW,UAAU7C,WAAakC,EAAMW,WAC7P,OACIjG,EAAAC,EAAAC,cAAA,OAAK4B,GAAG,QACJ9B,EAAAC,EAAAC,cAAC8X,EAAD,CACIjL,YAAatM,KAAKZ,MAAMkN,YACxBzC,OAAQ7J,KAAKZ,MAAMyK,OACnBxB,KAAM8P,EACNrL,cAAe9M,KAAKZ,MAAM0N,cAC1BZ,WAAYlM,KAAKZ,MAAM8M,WACvBG,cAAerM,KAAKZ,MAAMiN,cAC1ByF,MAAO9R,KAAKZ,MAAM0S,MAClB/M,WAAY/E,KAAKZ,MAAMkW,MAAM,GAC7BjQ,WAAYrF,KAAKZ,MAAMkW,MAAM,GAC7BlK,IAfD,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAexDvG,EAAMS,UAChBxB,gBAAiB9D,KAAKZ,MAAM0E,0BAlBd5D,aAyBlCyI,IAASC,OAAOrJ,EAAAC,EAAAC,cAAC2Y,EAAD,MAA8BzX,SAASC,eAAe,+BAIhEyX,oDAMF,SAAAA,EAAYjZ,GAAO,IAAAkZ,EAAA,OAAAzS,OAAAC,EAAA,EAAAD,CAAA7F,KAAAqY,IACfC,EAAAC,EAAAvS,KAAAhG,KAAMZ,IANVH,MAAQ,CACJ6S,MAAO,GACPjF,IAAK,GAGUyL,EAenBrG,WAAa,SAAClL,GACVb,MAAM,wDAA0Da,EAAQ1F,GAAGsB,WAAa,IAAK,CACzFqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAWgR,EAAKrZ,MAAM6S,MAAM3O,IAAI,SAAAU,GAClC,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAGfyU,EAAK/R,SAAS,CAACuL,MAAOxK,OA7B1BoE,OAAOkB,gBAAP/G,OAAA0L,EAAA,EAAA1L,CAAAyS,GAFeA,kEAKC,IAAAE,EAAAxY,KAEhBkG,MAAM,yDACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACFA,EAAK0L,KAAKN,GACV8G,EAAKjS,SAAS,CAACuL,MAAOxL,uCAyB1B,OACI/G,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACE7B,EAAAC,EAAAC,cAAA,WAEIF,EAAAC,EAAAC,cAACgZ,EAAD,CACI5L,IAAK7M,KAAKf,MAAM4N,IAChBiF,MAAO9R,KAAKf,MAAM6S,MAClBzF,cAAerM,KAAKiS,qBAjDH/R,aAyDjCwY,yKACO,IAAAC,EAAA3Y,KACC8R,EAAQ9R,KAAKZ,MAAM0S,MAAM3O,IAAI,SAAAU,GAAI,OACnCtE,EAAAC,EAAAC,cAACmZ,EAAD,CACI/L,IAAKhJ,EAAKxC,GACVA,GAAIwC,EAAKxC,GACT2C,QAASH,EAAKG,QACd7C,YAAa0C,EAAK1C,YAClB0X,iBAAkBhV,EAAKgV,iBACvBxM,cAAesM,EAAKvZ,MAAMiN,kBAGlC,OACI9M,EAAAC,EAAAC,cAAA,OAAKC,MAAM,iBACNoS,UAdiB5R,aAoB5B4Y,8MACFjG,aAAe,SAAChP,GACZA,EAAKxC,GAAK0X,EAAK3Z,MAAMiC,GACrB0X,EAAK3Z,MAAMiN,cAAcxI,2DAGpB,IAAAmV,EAAAhZ,KAcL,OAXQT,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACI7B,EAAAC,EAAAC,cAACwZ,GAAD,CACI5X,GAAI2X,EAAK5Z,MAAMiC,GACf2C,QAASgV,EAAK5Z,MAAM4E,QACpB7C,YAAa6X,EAAK5Z,MAAM+B,YACxB0X,iBAAkBG,EAAK5Z,MAAMyZ,iBAC7B5F,aAAc+F,EAAKnG,uBAfD3S,aA0BpCgZ,+MACFja,MAAQ,CACJ+E,QAASmV,EAAK/Z,MAAM4E,QACpB7C,YAAagY,EAAK/Z,MAAM+B,YACxB0X,iBAAkBM,EAAK/Z,MAAMyZ,iBAC7BrS,mBAAoB,GACpBK,oBAAqB,MAQzBZ,6BAA+B,WAC3BC,MAAM,mEACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACF6S,EAAK5S,SAAS,CAACC,mBAAoBF,MAGvCG,WAAW0S,EAAKlT,6BAA8B,QAGlDW,wBAA0B,WACtBV,MAAM,8DACLC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACF6S,EAAK5S,SAAS,CAACM,oBAAqBP,MAGxCG,WAAW0S,EAAKvS,wBAAyB,QAG7CE,wBAA0B,SAACC,GACvBb,MAAM,kEAAoEa,EAAQ1F,GAAGsB,WAAa,IAAK,CACnGqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAW6R,EAAKla,MAAMuH,mBAAmBrD,IAAI,SAAAU,GAC/C,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAGfsV,EAAK5S,SAAS,CAACC,mBAAoBc,SAI3CG,wBAA0B,SAACV,GACvBb,MAAM,6DAA+Da,EAAQ1F,GAAGsB,WAAa,IAAK,CAC9FqE,OAAQ,MACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAUN,KACtBZ,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC5BF,KAAK,SAAAY,GACF,IAAMO,EAAW6R,EAAKla,MAAM4H,oBAAoB1D,IAAI,SAAAU,GAChD,OAAIA,EAAKxC,KAAO0F,EAAQ1F,GACbwE,OAAO0B,OAAO,GAAIR,GAElBlD,IAGfsV,EAAK5S,SAAS,CAACM,oBAAqBS,SAI5CI,yBAA2B,SAAC7D,GACxBA,EAAKxC,GAAK8X,EAAK/Z,MAAM4E,QACrBmV,EAAKrS,wBAAwBjD,MAGjC+D,yBAA2B,SAAC/D,GACxBA,EAAKxC,GAAK8X,EAAK/Z,MAAM4E,QACrBmV,EAAK1R,wBAAwB5D,MAGjCgE,6BAA+B,WAC3BsR,EAAKzR,yBAAyByR,EAAKla,MAAMuH,mBAAmB,OAGhEuB,6BAA+B,WAC3BoR,EAAKvR,yBAAyBuR,EAAKla,MAAM4H,oBAAoB,OAGjEwM,WAAa,WAMT,GAJA8F,EAAK5S,SAAS,CAACsS,iBAAkB,WAAY,WAAY7Y,KAAKoT,qBAC9DzK,IAAS4D,uBAAuB5L,SAASC,eAAe,kBAGA,IAApDuY,EAAKla,MAAMuH,mBAAmB,GAAG4S,eAAsB,CACvDD,EAAK5S,SAAS,CACVC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEVsT,EAAKla,MAAMuH,mBAAmB,IAFrB,IAGZ4S,eAAgB,OAGzB,WAAYpZ,KAAK6H,iCAEpBsR,EAAK5S,SAAS,CACVM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEXsT,EAAKla,MAAM4H,oBAAoB,IAFrB,IAGb8F,OAAQwM,EAAKla,MAAM4H,oBAAoB,GAAG8F,OAAS,OAG5D,WAAY3M,KAAK+H,iCAEpB,IAEI0L,EAFS,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aACpE,IAAI3O,MACWQ,UAAY,WACvC3E,SAASC,eAAe6S,GAAWC,UAAU,WAC7CjN,WAAW,WAAY9F,SAASC,eAAe6S,GAAWE,SAAU,QAI5EE,UAAY,WACRlT,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAO,IAAM,UAAUV,MAAQsW,EAAKla,MAAM4Z,iBACjGlQ,IAAS4D,uBAAuB5L,SAASC,eAAe,qBAG5DwS,iBAAmB,WACf+F,EAAK/Z,MAAM6T,aAAXpN,OAAA4G,EAAA,EAAA5G,CAAA,GAA4BsT,EAAKla,WAGrCoa,oBAAsB,SAACC,GACnB,GAAyB,UAArBA,EAAI5Y,OAAOmC,OAA0C,YAArByW,EAAI5Y,OAAOmC,QAE3C8F,IAAS4D,uBAAuB5L,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,qBAEnG4V,EAAK5S,SAAS,CAACsS,iBAAkBS,EAAI5Y,OAAOmC,OAAQ,WAAY7C,KAAKoT,qBAGb,IAApD+F,EAAKla,MAAMuH,mBAAmB,GAAG4S,gBAAsB,CACvDD,EAAK5S,SAAS,CACVC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEVsT,EAAKla,MAAMuH,mBAAmB,IAFrB,IAGZ4S,eAAgB,OAGzB,WAAYpZ,KAAK6H,iCACpBsR,EAAK5S,SAAS,CACVM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEXsT,EAAKla,MAAM4H,oBAAoB,IAFrB,IAGb8F,OAAQwM,EAAKla,MAAM4H,oBAAoB,GAAG8F,OAAS,OAG5D,WAAY3M,KAAK+H,iCAEpB,IAEI0L,EAFS,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aACpE,IAAI3O,MACWQ,UAAY,WACvC3E,SAASC,eAAe6S,GAAWC,UAAU,WAC7CjN,WAAW,WAAY9F,SAASC,eAAe6S,GAAWE,SAAU,IAGnD,UAArB2F,EAAI5Y,OAAOmC,OAEX8F,IAASC,OACLrJ,EAAAC,EAAAC,cAAC8Z,GAAD,CACIpY,YAAagY,EAAKla,MAAMkC,YACxBqY,kBAAmBL,EAAKK,kBACxBC,iBAAkBN,EAAKM,iBACvBC,oBAAqBP,EAAKO,oBAC1BrX,gBAAiB8W,EAAK9W,kBACtB1B,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,qBAGtD,YAArB+V,EAAI5Y,OAAOmC,QAEX8F,IAAS4D,uBAAuB5L,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,qBACnGoF,IAASC,OAAOrJ,EAAAC,EAAAC,cAAC0U,EAAD,CACIjV,QAAS,mDAAqDia,EAAKla,MAAMkC,YAAc,IACvF9B,UAAa8Z,EAAK9F,WAClB/T,SAAY6Z,EAAKtF,YACjBlT,SAASC,eAAe,sBAIpD4Y,kBAAoB,SAACF,GACjBH,EAAK5S,SAAS,CAACsS,iBAAkBS,EAAI5Y,OAAOmC,WAGhD4W,iBAAmB,SAACH,GACA,UAAZA,EAAIzM,KAAmC,KAAhByM,EAAIK,SAC3BR,EAAK9W,qBAIbuR,WAAa,WAYT,GAVAjT,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,KAAKmQ,UAAY,UAE9E/S,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,KAAK2Q,WAAW,GAAGA,WAAW,GAAGM,IAAM,kBAAoB2E,EAAKla,MAAMkC,YAAYwB,WAAa,WAE5JhC,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,UAAUV,MAAQ,UAErFsW,EAAK5S,SAAS,CAACsS,iBAAkB,WAAY,WAAY7Y,KAAKoT,qBAC9DzK,IAAS4D,uBAAuB5L,SAASC,eAAe,kBAGA,IAApDuY,EAAKla,MAAMuH,mBAAmB,GAAG4S,eAAsB,CACvDD,EAAK5S,SAAS,CACVC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEVsT,EAAKla,MAAMuH,mBAAmB,IAFrB,IAGZ4S,eAAgB,OAGzB,WAAYpZ,KAAK6H,iCACpBsR,EAAK5S,SAAS,CACVM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEXsT,EAAKla,MAAM4H,oBAAoB,IAFrB,IAGb8F,OAAQwM,EAAKla,MAAM4H,oBAAoB,GAAG8F,OAAS,QAK/D,IAEI8G,EAFS,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aACpE,IAAI3O,MACWQ,UAAY,WACvC3E,SAASC,eAAe6S,GAAWC,UAAU,WAC7CjN,WAAW,WAAY9F,SAASC,eAAe6S,GAAWE,SAAU,QAI5EI,UAAY,WACRpL,IAAS4D,uBAAuB5L,SAASC,eAAe,qBAG5DgZ,wBAA0B,WACtB,GAAoF,cAAhFjZ,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,KAAKmQ,UAClE/K,IAASC,OAAOrJ,EAAAC,EAAAC,cAAC0U,EAAD,CACIjV,QAAS,mDAAqDia,EAAKla,MAAMkC,YAAc,IACvF9B,UAAa8Z,EAAKvF,WAClBtU,SAAY6Z,EAAKpF,YACjBpT,SAASC,eAAe,uBAY5C,GATAD,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,KAAKmQ,UAAY,YAE9E/S,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,KAAK2Q,WAAW,GAAGA,WAAW,GAAGM,IAAM,kBAAoB2E,EAAKla,MAAMkC,YAAYwB,WAAa,UAE5JhC,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,UAAUV,MAAQ,IAErFsW,EAAK5S,SAAS,CAACsS,iBAAkB,KAAM,WAAY7Y,KAAKoT,qBAGA,IAApD+F,EAAKla,MAAMuH,mBAAmB,GAAG4S,eAAsB,CACvDD,EAAK5S,SAAS,CACVC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEVsT,EAAKla,MAAMuH,mBAAmB,IAFrB,IAGZ4S,eAAgB,OAGzB,WAAYpZ,KAAK6H,iCACpBsR,EAAK5S,SAAS,CACVM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEXsT,EAAKla,MAAM4H,oBAAoB,IAFrB,IAGb8F,OAAQwM,EAAKla,MAAM4H,oBAAoB,GAAG8F,OAAS,OAG5D,WAAY3M,KAAK+H,iCAEpB,IAEI0L,EAFS,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aACpE,IAAI3O,MACWQ,UAAY,WACvC3E,SAASC,eAAe6S,GAAWC,UAAU,WAC7CjN,WAAW,WAAY9F,SAASC,eAAe6S,GAAWE,SAAU,QAKhF+F,oBAAsB,WAElB/Q,IAAS4D,uBAAuB5L,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,qBAEnG5C,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,UAAUV,MAAQ,IACrFsW,EAAK5S,SAAS,CAACsS,iBAAkB,GAAI,WAAY7Y,KAAKoT,wBAI1D/Q,gBAAkB,WAWd,GATA1B,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,UAAUV,MAAQlC,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,aAAaV,MAErKlC,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,aAAaV,MAAQ,GAExF8F,IAAS4D,uBAAuB5L,SAASC,eAAeuY,EAAKla,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,qBAEnG4V,EAAK/F,mBAGmD,IAApD+F,EAAKla,MAAMuH,mBAAmB,GAAG4S,eAAsB,CACvDD,EAAK5S,SAAS,CACVC,mBAAoB,CAACX,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEVsT,EAAKla,MAAMuH,mBAAmB,IAFrB,IAGZ4S,eAAgB,OAGzB,WAAYpZ,KAAK6H,iCACpBsR,EAAK5S,SAAS,CACVM,oBAAqB,CAAChB,OAAA4G,EAAA,EAAA5G,QAAA4G,EAAA,EAAA5G,CAAA,GAEXsT,EAAKla,MAAM4H,oBAAoB,IAFrB,IAGb8F,OAAQwM,EAAKla,MAAM4H,oBAAoB,GAAG8F,OAAS,OAG5D,WAAY3M,KAAK+H,iCAEpB,IAEI0L,EAFS,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,aACpE,IAAI3O,MACWQ,UAAY,WACvC3E,SAASC,eAAe6S,GAAWC,UAAU,WAC7CjN,WAAW,WAAY9F,SAASC,eAAe6S,GAAWE,SAAU,wEA/TxE3T,KAAKiG,+BACLjG,KAAK4G,2DAoUL,GADwB,CAAC,UAAW,IAAK,KAAM,KAAM,KAAM,KAAM,SAC7C7F,SAASf,KAAKf,MAAM4Z,iBAAiBlW,YACrD,IAAIuS,GAAW,EACX2E,EAAgB,GAChBC,EAAe,QAEnB5E,GAAW,EACX2E,EAAgB7Z,KAAKf,MAAM4Z,iBAC3BiB,EAAe9Z,KAAKf,MAAM4Z,iBAAmB,WAGjD,GAA+C,YAA3C7Y,KAAKf,MAAM4Z,iBAAiBlW,WAC5B,IAAIoX,EAA8B,UAC9BC,EAAyB,kBAAoBha,KAAKf,MAAMkC,YAAYwB,WAAa,gBAErFoX,EAA8B,YAC9BC,EAAyB,kBAAoBha,KAAKf,MAAMkC,YAAYwB,WAAa,UAGrF,OACIpD,EAAAC,EAAAC,cAAA,OAAK4B,GAAIrB,KAAKf,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,cAAemQ,UAAU,oBAAoBzT,QAASD,KAAKia,WAC3G1a,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,gBACXnU,EAAAC,EAAAC,cAAA,OAAKiU,UAAWqG,EAA6B1Y,GAAIrB,KAAKf,MAAMkC,YAAYoC,QAAQ,MAAM,IAAKtD,QAASD,KAAK4Z,yBACrGra,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,aACXnU,EAAAC,EAAAC,cAAA,OAAKC,MAAM,eAAe8U,IAAKwF,EAAwBvF,IAAI,YAIvElV,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAACkD,MAAM,QAASkX,OAAO,OAAQC,UAAU,YACjD5a,EAAAC,EAAAC,cAAA,OAAKK,MAAO,CAACsa,SAAS,WAAYpX,MAAM,QAASkX,OAAO,MAAOC,UAAU,YACrE5a,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,mBAAmBrS,GAAIrB,KAAKf,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,YAC7EhE,EAAAC,EAAAC,cAAA,OAAKC,MAAM,gBACPH,EAAAC,EAAAC,cAAA,aAAKO,KAAKf,MAAMkC,YAAhB,MAEJ5B,EAAAC,EAAAC,cAAA,UAAQ6B,aAActB,KAAKf,MAAM4Z,iBAAkB7E,SAAUhU,KAAKqZ,oBAAqBhY,GAAIrB,KAAKf,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,UAClIhE,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,WAAd,gBACAtD,EAAAC,EAAAC,cAAA,YAAU4a,MAAM,0BACZ9a,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,KAAd,eACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,gBACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,gBACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,gBACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,MAAd,YACAtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAM,SAAd,kBAEJtD,EAAAC,EAAAC,cAAA,UAAQoD,MAAOgX,EAAe3E,SAAUA,GAAxC,IAAoD4E,EAApD,OAIRva,EAAAC,EAAAC,cAAA,OAAK4B,GAAIrB,KAAKf,MAAMkC,YAAYoC,QAAQ,MAAM,IAAM,oBAApD,eA9XUrD,aAuY5Boa,+MACFL,UAAY,WACRM,EAAKnb,MAAMsa,8EAGX,OACAna,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4B,SAAA,KACI7B,EAAAC,EAAAC,cAAA,OAAK4B,GAAG,uBAAuBqS,UAAU,yBAAyBzT,QAASD,KAAKia,YAChF1a,EAAAC,EAAAC,cAAA,OAAK4B,GAAIrB,KAAKZ,MAAM+B,YAAYoC,QAAQ,MAAM,IAAM,gBAAiBmQ,UAAU,mBAC3EnU,EAAAC,EAAAC,cAAA,SAAO+B,KAAK,OAAOH,GAAIrB,KAAKZ,MAAM+B,YAAYoC,QAAQ,MAAM,IAAM,YAAayQ,SAAUhU,KAAKZ,MAAMoa,kBAAmBgB,QAASxa,KAAKZ,MAAMqa,mBAC3Ila,EAAAC,EAAAC,cAAA,KAAGC,MAAM,WAAT,aACAH,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,UAAQ4B,GAAIrB,KAAKZ,MAAM+B,YAAYoC,QAAQ,MAAM,IAAM,eAAgBtD,QAASD,KAAKZ,MAAMsa,qBAA3F,YACAna,EAAAC,EAAAC,cAAA,UAAQ4B,GAAIrB,KAAKZ,MAAM+B,YAAYoC,QAAQ,MAAM,IAAM,WAAYtD,QAASD,KAAKZ,MAAMiD,iBAAvF,iBAbmBnC,aAoBnCyI,IAASC,OAAOrJ,EAAAC,EAAAC,cAACgb,EAAD,MAA8B9Z,SAASC,eAAe,2BAKtE,IAAI8Z,GAAuB/Z,SAASC,eAAe,qBAC/C+Z,GAAiBha,SAASC,eAAe,kBACzCga,GAAkBja,SAASC,eAAe,qBAC1Cia,GAAmBla,SAASC,eAAe,YAC3Cka,GAAkBna,SAASC,eAAe,qBAC1Cma,GAAmBpa,SAASC,eAAe,oBAE/C8K,OAAOsP,OAAS,WACd,IAAIC,EAAwBP,GAAqBQ,wBAC7CC,EAAqBR,GAAeO,wBACpCE,EAAeH,EAAsBI,MAAQF,EAAmBE,MAAQ,GAC5EV,GAAeW,YAAc,WAC3B3S,IAASC,OACLrJ,EAAAC,EAAAC,cAAA,OAAK4B,GAAI,wBACP9B,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACC,MAAM,UAAjB,mJACMY,SAASC,eAAe,kBACpCD,SAASC,eAAe,wBAAwBd,MAAMkD,MAAQoY,EAAazY,WAAa,MAE1FgY,GAAeY,WAAa,WAC1B5S,IAAS4D,uBAAuB5L,SAASC,eAAe,mBAE1D,IAAI4a,EAAmBZ,GAAgBM,wBACnCO,EAAuBZ,GAAiBK,wBACxCQ,EAAiBF,EAAiBH,MAAQI,EAAqBJ,MAAQ,GAC3ER,GAAiBS,YAAc,WAC7B3S,IAASC,OACLrJ,EAAAC,EAAAC,cAAA,OAAK4B,GAAI,kBACP9B,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACC,MAAM,UAAjB,0IACMY,SAASC,eAAe,YACpCD,SAASC,eAAe,kBAAkBd,MAAMkD,MAAQ0Y,EAAe/Y,WAAa,MAEtFkY,GAAiBU,WAAa,WAC5B5S,IAAS4D,uBAAuB5L,SAASC,eAAe,aAE1D,IAAI+a,EAAmBb,GAAgBI,wBACnCU,EAAuBb,GAAiBG,wBACxCW,EAAiBF,EAAiBN,MAAQO,EAAqBP,MAAQ,GAC3EN,GAAiBO,YAAc,WAC7B3S,IAASC,OACLrJ,EAAAC,EAAAC,cAAA,OAAK4B,GAAI,0BACP9B,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACC,MAAM,UAAjB,yKACMY,SAASC,eAAe,oBACpCD,SAASC,eAAe,0BAA0Bd,MAAMkD,MAAQ6Y,EAAelZ,WAAa,MAE9FoY,GAAiBQ,WAAa,WAC5B5S,IAAS4D,uBAAuB5L,SAASC,eAAe,sBAI5D8K,OAAOoQ,SAAW,WAEhB,IAAIb,EAAwBP,GAAqBQ,wBAC7CC,EAAqBR,GAAeO,wBACpCE,EAAeH,EAAsBI,MAAQF,EAAmBE,MAAQ,GAC5EV,GAAeW,YAAc,WAC3B3S,IAASC,OACLrJ,EAAAC,EAAAC,cAAA,OAAK4B,GAAI,wBACP9B,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACC,MAAM,UAAjB,mJACMY,SAASC,eAAe,kBACpCD,SAASC,eAAe,wBAAwBd,MAAMkD,MAAQoY,EAAazY,WAAa,MAE1FgY,GAAeY,WAAa,WAC1B5S,IAAS4D,uBAAuB5L,SAASC,eAAe,mBAE1D,IAAI4a,EAAmBZ,GAAgBM,wBACnCO,EAAuBZ,GAAiBK,wBACxCQ,EAAiBF,EAAiBH,MAAQI,EAAqBJ,MAAQ,GAC3ER,GAAiBS,YAAc,WAC7B3S,IAASC,OACLrJ,EAAAC,EAAAC,cAAA,OAAK4B,GAAI,kBACP9B,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACC,MAAM,UAAjB,0IACMY,SAASC,eAAe,YACpCD,SAASC,eAAe,kBAAkBd,MAAMkD,MAAQ0Y,EAAe/Y,WAAa,MAEtFkY,GAAiBU,WAAa,WAC5B5S,IAAS4D,uBAAuB5L,SAASC,eAAe,aAE1D,IAAI+a,EAAmBb,GAAgBI,wBACnCU,EAAuBb,GAAiBG,wBACxCW,EAAiBF,EAAiBN,MAAQO,EAAqBP,MAAQ,GAC3EN,GAAiBO,YAAc,WAC7B3S,IAASC,OACLrJ,EAAAC,EAAAC,cAAA,OAAK4B,GAAI,0BACP9B,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAACC,MAAM,UAAjB,yKACMY,SAASC,eAAe,oBACpCD,SAASC,eAAe,0BAA0Bd,MAAMkD,MAAQ6Y,EAAelZ,WAAa,MAE9FoY,GAAiBQ,WAAa,WAC5B5S,IAAS4D,uBAAuB5L,SAASC,eAAe,sBAK5D,IAAImb,GAAarQ,OAAOsQ,OACpBC,GAASvQ,OAAOwQ,UAChBC,GAAaF,GAAOG,OACpBC,GAAgC,qBAAf3Q,OAAO4Q,IACxBC,GAAWN,GAAOO,UAAU/X,QAAQ,SAAW,EACjCwX,GAAOO,UAAUC,MAAM,SAItC9b,SAAS+b,UAAY,SAASlU,IACb,IAAhBA,EAAMmU,SAAmC,OAAhBnU,EAAMoU,OAAkC,QAAhBpU,EAAMoU,OAAmC,QAAhBpU,EAAMoU,OAAmC,QAAhBpU,EAAMoU,OAAoC,QAAhBpU,EAAMoU,OAAoC,QAAhBpU,EAAMoU,OACzJpU,EAAMyL,kBAQG,OAAf8H,IACsB,qBAAfA,IACQ,gBAAfI,KACY,IAAZE,KACa,IAAbE,KAGC5b,SAAS+b,UAAY,SAASlU,IACX,IAAlBA,EAAMmU,SAAqC,OAAhBnU,EAAMoU,OAAkC,QAAhBpU,EAAMoU,OAAmC,QAAhBpU,EAAMoU,OAAmC,QAAhBpU,EAAMoU,OAAoC,QAAhBpU,EAAMoU,OAAoC,QAAhBpU,EAAMoU,OAC3JpU,EAAMyL","file":"static/js/main.830a2391.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faExclamationTriangle} from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass ConfirmAlert extends Component {\r\n    state = {\r\n        message: this.props.message,\r\n        onConfirm: this.props.onConfirm,\r\n        onCancel: this.props.onCancel\r\n    }\r\n    render() {\r\n        return (\r\n            <div class=\"confirm_alert_overlay\">\r\n                <div class=\"confirm_alert_popup\">\r\n                    <div class=\"confirm_alert_content\">\r\n                        <FontAwesomeIcon icon={faExclamationTriangle} class=\"confirm_alert_icon\"/>\r\n                        <br/>\r\n                        <br/>\r\n                        <p style={{color:\"black\"}}> {this.state.message} </p>\r\n                        <br/>\r\n                        <div class=\"confirm_alert_buttons\">\r\n                            <button class=\"confirm_alert_cancel\" onClick={this.state.onCancel}> Cancel </button>\r\n                            <button class=\"confirm_alert_confirm\" onClick={this.state.onConfirm}> Confirm </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ConfirmAlert;","// This is the component that wraps the calendar in a drag and drop context to allow dragging. \r\n\r\nimport { DragDropContext } from \"react-dnd\";\r\nimport HTML5Backend from \"react-dnd-html5-backend\";\r\n\r\nexport default DragDropContext(HTML5Backend);\r\n","import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faExclamationTriangle} from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass OnlyAlert extends Component {\r\n    state = {\r\n        message: this.props.message,\r\n        onOK: this.props.onOK\r\n    }\r\n    render() {\r\n        return (\r\n            <div class=\"confirm_alert_overlay\">\r\n                <div class=\"confirm_alert_popup\">\r\n                    <div class=\"confirm_alert_content\">\r\n                        <FontAwesomeIcon icon={faExclamationTriangle} class=\"confirm_alert_icon\"/>\r\n                        <br/>\r\n                        <br/>\r\n                        <p style={{color:\"black\"}}> {this.state.message} </p>\r\n                        <br/>\r\n                        <div class=\"confirm_alert_buttons\">\r\n                            <button class=\"alert_ok\" onClick={this.state.onOK}> OK </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default OnlyAlert;","import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faClock, faTrash } from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nclass ScheduleControlPopup extends Component {\r\n\r\n    componentDidMount() {\r\n        // Automatically select day\r\n        if (this.props.event_rrule.includes(\"MO,TU,WE,TH,FR,SA,SU\")) {\r\n            document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"MO\")) {\r\n            // Automatically select Monday\r\n            document.getElementById(\"ScheduleRepeatMonday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"TU\")) {\r\n            // Automatically select Tuesday\r\n            document.getElementById(\"ScheduleRepeatTuesday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"WE\")) {\r\n            // Automatically select Wednesday\r\n            document.getElementById(\"ScheduleRepeatWednesday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"TH\")) {\r\n            // Automatically select Thursday\r\n            document.getElementById(\"ScheduleRepeatThursday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"FR\")) {\r\n            // Automatically select Friday\r\n            document.getElementById(\"ScheduleRepeatFriday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"SA\")) {\r\n            // Automatically select Saturday\r\n            document.getElementById(\"ScheduleRepeatSaturday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"SU\")) {\r\n            // Automatically select Sunday\r\n            document.getElementById(\"ScheduleRepeatSunday\").checked = true;\r\n        }\r\n\r\n        // Automatically select plug load\r\n        if (this.props.device_type.includes(\"Desktop\")) {\r\n            // Automatically select Desktop\r\n            document.getElementById(\"ScheduleApplyDesktop\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Monitor\")) {\r\n            // Automatically select Monitor\r\n            document.getElementById(\"ScheduleApplyMonitor\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Laptop\")) {\r\n            // Automatically select Laptop\r\n            document.getElementById(\"ScheduleApplyLaptop\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Task Lamp\")) {\r\n            // Automatically select Task Lamp\r\n            document.getElementById(\"ScheduleApplyTaskLamp\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Fan\")) {\r\n            // Automatically select Fan\r\n            document.getElementById(\"ScheduleApplyFan\").checked = true;\r\n        }\r\n    }\r\n\r\n    exitPopup = (e) => {\r\n        if (e.target === document.getElementById(\"schedule_popup_overlay\")) {\r\n            this.props.closeButtonClicked();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div id=\"schedule_popup_overlay\" onClick={this.exitPopup}>\r\n                    <div id=\"schedule_popup\">\r\n                        <p id=\"schedule_device_type\"> {this.props.device_type} </p>\r\n                        <button id=\"schedule_popup_close\" onClick={this.props.closeButtonClicked}> &times; </button>\r\n                        <br/>\r\n                        <input id=\"schedule_name_input\" defaultValue={this.props.event_name.substring(0,this.props.event_name.length-22)} type=\"text\" />\r\n                        <div id=\"schedule_time_input\">\r\n                            <FontAwesomeIcon icon={faClock} style={{color:\"#4E73DF\"}} />\r\n                            <ScheduleControlTimepicker type=\"Start\" time={this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length)} />\r\n                            <p style={{display: \"inline-block\", marginRight:\"-5px\", marginLeft:\"5px\"}}> - </p>\r\n                            <ScheduleControlTimepicker type=\"End\" time={this.props.event_end.substring(this.props.event_end.length-8, this.props.event_end.length)} />\r\n                        </div>\r\n                        <div id=\"schedule_repeat_input\">\r\n                            <ScheduleControlRepeat />\r\n                        </div>\r\n                        <div id=\"schedule_apply_input\">\r\n                            <p style={{fontWeight:\"bold\"}}> Also apply to: </p>\r\n                            <ScheduleControlApply devices={[\"Desktop\", \"Monitor\", \"Laptop\", \"Fan\", \"Task Lamp\"]} />\r\n                        </div>\r\n                        <br/>\r\n                        <button id=\"schedule_popup_ok\" onClick={this.props.okButtonClicked}> OK </button>\r\n                        <button id=\"schedule_popup_delete\" onClick={this.props.deleteButtonClicked}> Delete </button>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlTimepicker extends Component {\r\n    render() {\r\n        var hour = this.props.time.substring(0,2);\r\n        if (Number(hour) >= 12) {\r\n            var am_pm = \"PM\"\r\n        } else {\r\n            am_pm = \"AM\"\r\n        }\r\n        if (Number(hour) > 12 && Number(hour) < 22) {\r\n            hour = \"0\" + (Number(hour)-12).toString();\r\n        } else {\r\n            if (Number(hour) >= 22) {\r\n                hour = (Number(hour)-12).toString();\r\n            } else {\r\n                if (hour === \"00\") {\r\n                    hour = \"12\"\r\n                }\r\n            }\r\n        }\r\n        var minute = this.props.time.substring(3,5);\r\n\r\n\r\n\r\n        return (\r\n            <div id={this.props.type + \"Time\"}>\r\n                <select id={this.props.type + \"Hour\"} defaultValue={hour}>\r\n                    <option value=\"01\"> 1 </option>\r\n                    <option value=\"02\"> 2 </option>\r\n                    <option value=\"03\"> 3 </option>\r\n                    <option value=\"04\"> 4 </option>\r\n                    <option value=\"05\"> 5 </option>\r\n                    <option value=\"06\"> 6 </option>\r\n                    <option value=\"07\"> 7 </option>\r\n                    <option value=\"08\"> 8 </option>\r\n                    <option value=\"09\"> 9 </option>\r\n                    <option value=\"10\"> 10 </option>\r\n                    <option value=\"11\"> 11 </option>\r\n                    <option value=\"12\"> 12 </option>\r\n                </select>\r\n                <span style={{marginLeft:\"-10px\", marginRight:\"1px\"}}> : </span>\r\n                <select id={this.props.type + \"Minute\"} defaultValue={minute}>\r\n                    <option value=\"00\"> 00 </option>\r\n                    <option value=\"15\"> 15 </option>\r\n                    <option value=\"30\"> 30 </option>\r\n                    <option value=\"45\"> 45 </option>\r\n                </select>\r\n                <select id={this.props.type + \"AMPM\"} defaultValue={am_pm}>\r\n                    <option value=\"AM\"> AM </option>\r\n                    <option value=\"PM\"> PM </option>\r\n                </select>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlRepeat extends Component {\r\n    render() {\r\n        return (\r\n            <>\r\n                <p style={{fontWeight:\"bold\"}}> Repeat: </p>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id=\"ScheduleRepeatEveryDay\"\r\n                    value=\"Every Day\"\r\n                    onClick={function(e) {\r\n                        if (e.target.checked) {\r\n                            document.getElementById(\"ScheduleRepeatMonday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatTuesday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatWednesday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatThursday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatFriday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatSaturday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatSunday\").checked = true;\r\n                        } else {\r\n                            document.getElementById(\"ScheduleRepeatMonday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatTuesday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatWednesday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatThursday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatFriday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatSaturday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatSunday\").checked = false;\r\n                        }\r\n                    }}\r\n                />\r\n                <label htmlFor=\"ScheduleRepeatEveryDay\" style={{marginLeft: \"2px\"}}> Every Day </label>\r\n                <br />\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Monday\"\r\n                        id=\"ScheduleRepeatMonday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatTuesday\").checked && document.getElementById(\"ScheduleRepeatWednesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatThursday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"2px\"}}> Monday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Tuesday\"\r\n                        id=\"ScheduleRepeatTuesday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatWednesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatThursday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"2px\"}}> Tuesday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Wednesday\"\r\n                        id=\"ScheduleRepeatWednesday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatThursday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"2px\"}}> Wednesday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Thursday\"\r\n                        id=\"ScheduleRepeatThursday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"2px\"}}> Thursday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Friday\"\r\n                        id=\"ScheduleRepeatFriday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatThursday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"2px\"}}> Friday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Saturday\"\r\n                        id=\"ScheduleRepeatSaturday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatThursday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatFriday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"2px\"}}> Saturday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Sunday\"\r\n                        id=\"ScheduleRepeatSunday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatThursday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatFriday\").checked && document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"2px\"}}> Sunday </label>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlApply extends Component {\r\n    render() {\r\n        const devices = this.props.devices.map(device =>\r\n            <ScheduleControlApplyItem device_type={device} />\r\n        )\r\n        return(\r\n            <>\r\n                {devices}\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlApplyItem extends Component {\r\n    render() {\r\n        return (\r\n            <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name=\"ScheduleApplyOption\"\r\n                    id={\"ScheduleApply\" + this.props.device_type.replace(/\\s/g,'')}\r\n                />\r\n                <label style={{marginLeft: \"2px\"}}> {this.props.device_type} </label>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default ScheduleControlPopup;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport moment from 'moment';\r\nimport Scheduler, { SchedulerData, ViewTypes } from 'react-big-scheduler';\r\nimport 'react-big-scheduler/lib/css/style.css';\r\nimport withDragDropContext from './withDnDContext';\r\nimport OnlyAlert from './OnlyAlert';\r\nimport ScheduleControlPopup from './ScheduleControlPopup';\r\nimport './index.css';\r\n\r\nfunction from24to12(hour) {\r\n    var new_hour = Number(hour.substring(0,2));\r\n    var am_or_pm = new_hour >= 12 ? \"PM\" : \"AM\";\r\n    new_hour = (new_hour % 12) || 12;\r\n    var finalTime = new_hour + \":\" + hour.substring(3,5) + \" \" + am_or_pm;\r\n\r\n    if (finalTime.length !== 8) {\r\n        finalTime = \"0\" + finalTime\r\n    }\r\n    return (finalTime);\r\n}\r\n\r\nfunction formatForDatabaseAdd(book, current_user_id) {\r\n    var event_rrule = \"\"\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"MO\")) {\r\n        event_rrule = event_rrule + \"Monday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TU\")) {\r\n        event_rrule = event_rrule + \"Tuesday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"WE\")) {\r\n        event_rrule = event_rrule + \"Wednesday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TH\")) {\r\n        event_rrule = event_rrule + \"Thursday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"FR\")) {\r\n        event_rrule = event_rrule + \"Friday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SA\")) {\r\n        event_rrule = event_rrule + \"Saturday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SU\")) {\r\n        event_rrule = event_rrule + \"Sunday, \"\r\n    }\r\n\r\n\r\n    const devices = [\"Desktop\", \"Laptop\", \"Monitor\", \"Task Lamp\", \"Fan\"]\r\n\r\n    return({\r\n        user_id: Number(current_user_id),\r\n        event_id: book.id,\r\n        event_start: book.start.substring(book.start.length-8, book.start.length),\r\n        event_end: book.end.substring(book.end.length-8, book.end.length),\r\n        event_name: book.title.substring(0, book.title.length-22),\r\n        event_rrule: event_rrule.substring(0,event_rrule.length-2),\r\n        device_type_id: book.resourceId,\r\n        device_type: devices[book.resourceId - 1]\r\n    })\r\n}\r\n\r\nfunction formatForDatabaseUpdate(book, current_user_id) {\r\n    var event_rrule = \"\"\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"MO\")) {\r\n        event_rrule = event_rrule + \"Monday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TU\")) {\r\n        event_rrule = event_rrule + \"Tuesday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"WE\")) {\r\n        event_rrule = event_rrule + \"Wednesday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TH\")) {\r\n        event_rrule = event_rrule + \"Thursday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"FR\")) {\r\n        event_rrule = event_rrule + \"Friday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SA\")) {\r\n        event_rrule = event_rrule + \"Saturday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SU\")) {\r\n        event_rrule = event_rrule + \"Sunday, \"\r\n    }\r\n\r\n    const devices = [\"Desktop\", \"Laptop\", \"Monitor\", \"Task Lamp\", \"Fan\"]\r\n\r\n    if (typeof book.id === \"string\") {\r\n        var n = book.id.indexOf(\"-\")\r\n        var event_id = Number(book.id.substring(0,n))\r\n    } else {\r\n        event_id = book.id\r\n    }\r\n    return({\r\n        user_id: Number(current_user_id),\r\n        event_id: event_id,\r\n        event_start: book.start.substring(book.start.length-8, book.start.length),\r\n        event_end: book.end.substring(book.end.length-8, book.end.length),\r\n        event_name: book.title.substring(0, book.title.length-22),\r\n        event_rrule: event_rrule.substring(0,event_rrule.length-2),\r\n        device_type_id: book.resourceId,\r\n        device_type: devices[book.resourceId - 1],\r\n        id: book.database_id\r\n    })\r\n}\r\n\r\nfunction processHourInput(type) {\r\n    var hour = document.getElementById(type + \"Hour\").value;\r\n    if (document.getElementById(type + \"AMPM\").value === \"PM\") {\r\n        if (document.getElementById(type + \"Hour\").value !== \"12\") {\r\n            hour = (Number(document.getElementById(type + \"Hour\").value) + 12).toString();\r\n        }\r\n    } else {\r\n        if (document.getElementById(type + \"Hour\").value === \"12\") {\r\n            hour = \"00\";\r\n        }\r\n    }\r\n    return(hour)\r\n}\r\n\r\nfunction getDates() {\r\n    var today = new Date();\r\n    var mondayDate = new Date();\r\n    var tuesdayDate = new Date();\r\n    var wednesdayDate = new Date();\r\n    var thursdayDate = new Date();\r\n    var fridayDate = new Date();\r\n    var saturdayDate = new Date();\r\n    var sundayDate = new Date();\r\n\r\n    if (today.getDay() === 0) {\r\n        // Today is Sunday\r\n        mondayDate.setDate(today.getDate() - 6);\r\n        tuesdayDate.setDate(today.getDate() - 5);\r\n        wednesdayDate.setDate(today.getDate() - 4);\r\n        thursdayDate.setDate(today.getDate() - 3);\r\n        fridayDate.setDate(today.getDate() - 2);\r\n        saturdayDate.setDate(today.getDate() - 1);\r\n        sundayDate.setDate(today.getDate());\r\n    } else {\r\n        mondayDate.setDate(today.getDate() + (1 - today.getDay()));\r\n        tuesdayDate.setDate(today.getDate() + (2 - today.getDay()));\r\n        wednesdayDate.setDate(today.getDate() + (3 - today.getDay()));\r\n        thursdayDate.setDate(today.getDate() + (4 - today.getDay()));\r\n        fridayDate.setDate(today.getDate() + (5 - today.getDay()));\r\n        saturdayDate.setDate(today.getDate() + (6 - today.getDay()));\r\n        sundayDate.setDate(today.getDate() + (7 - today.getDay()));\r\n    }\r\n\r\n    mondayDate = mondayDate.getFullYear() + \"-\" + ((mondayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (mondayDate.getMonth() + 1).toString() : (mondayDate.getMonth() + 1)) + \"-\" + (mondayDate.getDate().toString().length === 1 ? \"0\" + mondayDate.getDate().toString() : mondayDate.getDate())\r\n    tuesdayDate = tuesdayDate.getFullYear() + \"-\" + ((tuesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (tuesdayDate.getMonth() + 1).toString() : (tuesdayDate.getMonth() + 1)) + \"-\" + (tuesdayDate.getDate().toString().length === 1 ? \"0\" + tuesdayDate.getDate().toString() : tuesdayDate.getDate())\r\n    wednesdayDate = wednesdayDate.getFullYear() + \"-\" + ((wednesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (wednesdayDate.getMonth() + 1).toString() : (wednesdayDate.getMonth() + 1)) + \"-\" + (wednesdayDate.getDate().toString().length === 1 ? \"0\" + wednesdayDate.getDate().toString() : wednesdayDate.getDate())\r\n    thursdayDate = thursdayDate.getFullYear() + \"-\" + ((thursdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (thursdayDate.getMonth() + 1).toString() : (thursdayDate.getMonth() + 1))  + \"-\" + (thursdayDate.getDate().toString().length === 1 ? \"0\" + thursdayDate.getDate().toString() : thursdayDate.getDate())\r\n    fridayDate = fridayDate.getFullYear() + \"-\" + ((fridayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (fridayDate.getMonth() + 1).toString() : (fridayDate.getMonth() + 1)) + \"-\" + (fridayDate.getDate().toString().length === 1 ? \"0\" + fridayDate.getDate().toString() : fridayDate.getDate())\r\n    saturdayDate = saturdayDate.getFullYear() + \"-\" + ((saturdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (saturdayDate.getMonth() + 1).toString() : (saturdayDate.getMonth() + 1)) + \"-\" + (saturdayDate.getDate().toString().length === 1 ? \"0\" + saturdayDate.getDate().toString() : saturdayDate.getDate())\r\n    sundayDate = sundayDate.getFullYear() + \"-\" + ((sundayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (sundayDate.getMonth() + 1).toString() : (sundayDate.getMonth() + 1)) + \"-\" + (sundayDate.getDate().toString().length === 1 ? \"0\" + sundayDate.getDate().toString() : sundayDate.getDate())\r\n\r\n    return([mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate])\r\n}\r\n\r\nclass Calendar extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let schedulerData = new SchedulerData(\r\n            this.props.date,\r\n            ViewTypes.Day,\r\n            false,\r\n            false,\r\n            {\r\n                checkConflict: true,\r\n                recurringEventsEnabled: true,\r\n                scrollToSpecialMomentEnabled: true,\r\n                crossResourceMove: false\r\n            }, {\r\n                getScrollSpecialMomentFunc: this.getScrollSpecialMoment,\r\n                isNonWorkingTimeFunc: this.isNonWorkingTime\r\n            }\r\n        );\r\n        schedulerData.setResources([{id:1, name:\"Desktop\"}, {id:5, name:\"Fan\"}, {id:2, name:\"Laptop\"}, {id:3, name:\"Monitor\"}, {id:4, name:\"Task Lamp\"}]);\r\n        schedulerData.setEvents(this.props.events);\r\n        this.state = {\r\n            viewModel: schedulerData,\r\n            achievements_books: [],\r\n            weekly_achievements_books: [],\r\n            points_wallet_books: []\r\n        };\r\n        window.calendar = this;\r\n    }\r\n\r\n    render() {\r\n        const { viewModel } = this.state;\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Scheduler\r\n                        schedulerData={viewModel}\r\n                        eventItemClick={this.eventClicked}\r\n                        updateEventStart={this.updateEventStart}\r\n                        updateEventEnd={this.updateEventEnd}\r\n                        moveEvent={this.moveEvent}\r\n                        newEvent={this.newEvent}\r\n                        conflictOccurred={this.conflictOccurred}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refetchBonusAchievementsData();\r\n        this.refetchWeeklyAchievementsData();\r\n        this.refetchPointsWalletData();\r\n    }\r\n\r\n    refetchBonusAchievementsData = () => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({achievements_books: data})\r\n        })\r\n\r\n        setTimeout(this.refetchBonusAchievementsData, 5000)\r\n    }\r\n\r\n    refetchWeeklyAchievementsData = () => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_weekly/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({weekly_achievements_books: data})\r\n        })\r\n\r\n        setTimeout(this.refetchWeeklyAchievementsData, 5000)\r\n    }\r\n\r\n    refetchPointsWalletData = () => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/points_wallet/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({points_wallet_books: data})\r\n        })\r\n\r\n        setTimeout(this.refetchPointsWalletData, 5000)\r\n    }\r\n\r\n    updateAchievementsBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updateWeeklyAchievementsBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_weekly/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.weekly_achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({weekly_achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updatePointsWalletBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/points_wallet/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.points_wallet_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({points_wallet_books: newBooks})\r\n        })\r\n    }\r\n\r\n    handleAchievementsUpdate = (book) => {\r\n        book.id = this.props.current_user_id;\r\n        this.updateAchievementsBooks(book);\r\n    }\r\n\r\n    handleWeeklyAchievementsUpdate = (book) => {\r\n        book.id = this.props.current_user_id;\r\n        this.updateWeeklyAchievementsBooks(book);\r\n    }\r\n\r\n    handlePointsWalletUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updatePointsWalletBooks(book);\r\n    }\r\n\r\n    handleAchievementsFormSubmit = () => {\r\n        this.handleAchievementsUpdate(this.state.achievements_books[0])\r\n    }\r\n\r\n    handleWeeklyAchievementsFormSubmit = () => {\r\n        this.handleWeeklyAchievementsUpdate(this.state.weekly_achievements_books[0])\r\n    }\r\n\r\n    handlePointsWalletFormSubmit = () => {\r\n        this.handlePointsWalletUpdate(this.state.points_wallet_books[0])\r\n    }\r\n\r\n    isNonWorkingTime = (schedulerData, time) => {\r\n        return true;\r\n    }\r\n\r\n    getScrollSpecialMoment = (schedulerData, startMoment, endMoment) => {\r\n        var time = this.props.date + \" 07:00:00\";\r\n        return moment(time);\r\n    }\r\n\r\n    eventClicked = (schedulerData, event) => {\r\n        var slotName = schedulerData.getSlotById(event.resourceId).name;\r\n\r\n        function closeButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function deleteButtonClicked() {\r\n            // Update database (Delete)\r\n            window.calendar.props.onDeleteClick(event.database_id)\r\n            window.calendar.props.refetchData();\r\n\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            });\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + event.start.substring(10,19);\r\n                    new_end_for_this = new_day + event.end.substring(10,19);\r\n                    if (e.resourceId === event.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== event.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== event.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occurred for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                              document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                              document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                              document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n\r\n                // Update weekly achievement\r\n                if (window.calendar.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    window.calendar.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...window.calendar.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    }, function() {window.calendar.handleWeeklyAchievementsFormSubmit()})\r\n                    // If first time clicking, update achievement\r\n                    if (window.calendar.state.achievements_books[0].first_schedule === 0) {\r\n                        window.calendar.setState({\r\n                            achievements_books: [\r\n                                {\r\n                                    ...window.calendar.state.achievements_books[0],\r\n                                    first_schedule: 70\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handleAchievementsFormSubmit()})\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 90\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                        window.presencecontrol.setState({key: window.presencecontrol.state.key + 1})\r\n                    } else {\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 20\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n         ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={event.start}\r\n                event_end={event.end}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    newEvent = (schedulerData, slotId, slotName, start, end, type, item) => {\r\n        let newFreshId = 0;\r\n        schedulerData.events.forEach(item => {\r\n            if (item.database_id >= newFreshId) newFreshId = item.database_id + 1;\r\n        });\r\n\r\n        let newEvent = {\r\n            id: newFreshId,\r\n            title: \"(no name) (\" + moment(start).format(\"hh:mm A\") + \" - \" + moment(end).format(\"hh:mm A\") + \")\",\r\n            start: start,\r\n            end: end,\r\n            resourceId: slotId,\r\n            bgColor: \"#06D6A0\",\r\n            showPopover: false,\r\n            rrule: \"FREQ=WEEKLY;DTSTART=\" + this.props.mondayDate.substring(0,4) + this.props.mondayDate.substring(5,7) + this.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" + this.props.sundayDate.substring(0,4) + this.props.sundayDate.substring(5,7) + this.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\" + this.props.day.substring(0,2).toUpperCase()\r\n        }\r\n\r\n        schedulerData.addEvent(newEvent);\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            // Update database (Add)\r\n            window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id))\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n        function deleteButtonClicked() {\r\n            schedulerData.removeEvent(newEvent);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + newEvent.start.substring(10,19);\r\n                    new_end_for_this = new_day + newEvent.end.substring(10,19);\r\n                    if (e.resourceId === newEvent.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== newEvent.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== newEvent.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occurred for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                newEvent.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                                 document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                                 document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                                 document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(newEvent, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(newEvent, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    newEvent.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    newEvent.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n\r\n                // Update weekly achievement\r\n                if (window.calendar.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    window.calendar.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...window.calendar.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    }, function() {window.calendar.handleWeeklyAchievementsFormSubmit()})\r\n\r\n                    // If first time clicking, update achievement\r\n                    if (window.calendar.state.achievements_books[0].first_schedule === 0) {\r\n                        window.calendar.setState({\r\n                            achievements_books: [\r\n                                {\r\n                                    ...window.calendar.state.achievements_books[0],\r\n                                    first_schedule: 70\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handleAchievementsFormSubmit()})\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 90\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                        window.presencecontrol.setState({key: window.presencecontrol.state.key + 1})\r\n                    } else {\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 20\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Add Schedule: \" + slotName}\r\n                event_rrule={newEvent.rrule}\r\n                event_start={newEvent.start}\r\n                event_end={newEvent.end}\r\n                event_name={newEvent.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    updateEventStart = (schedulerData, event, newStart) => {\r\n        var old_start = event.start;\r\n        schedulerData.updateEventStart(event, newStart);\r\n        event.title = event.title.substring(0, event.title.length - 20) + \" (\" + from24to12(moment(newStart).format('HH:mm')) + \" - \" + from24to12(moment(event.end).format('HH:mm')) + \")\";\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            // Update database (Update)\r\n            window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n        function deleteButtonClicked() {\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n\r\n            // Update database\r\n            window.calendar.props.onDeleteClick(event.database_id);\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + event.start.substring(10,19);\r\n                    new_end_for_this = new_day + event.end.substring(10,19);\r\n                    if (e.resourceId === event.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== event.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== event.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occurred for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                              document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                              document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                              document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n\r\n\r\n                // Update weekly achievement\r\n                if (window.calendar.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    window.calendar.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...window.calendar.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    }, function() {window.calendar.handleWeeklyAchievementsFormSubmit()})\r\n                    // If first time clicking, update achievement\r\n                    if (window.calendar.state.achievements_books[0].first_schedule === 0) {\r\n                        window.calendar.setState({\r\n                            achievements_books: [\r\n                                {\r\n                                    ...window.calendar.state.achievements_books[0],\r\n                                    first_schedule: 70\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handleAchievementsFormSubmit()})\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 90\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                        window.presencecontrol.setState({key: window.presencecontrol.state.key + 1})\r\n                    } else {\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 20\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        var slotName = schedulerData.getSlotById(event.resourceId).name;\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={newStart}\r\n                event_end={event.end}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    updateEventEnd = (schedulerData, event, newEnd) => {\r\n        var old_end = event.end;\r\n        schedulerData.updateEventEnd(event, newEnd);\r\n        event.title = event.title.substring(0, event.title.length - 20) + \" (\" + from24to12(moment(event.start).format('HH:mm')) + \" - \" + from24to12(moment(newEnd).format('HH:mm')) + \")\";\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Update database (Update)\r\n            window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n            window.calendar.props.refetchData();\r\n        }\r\n        function deleteButtonClicked() {\r\n            // Update database (Delete)\r\n            window.calendar.props.onDeleteClick(event.database_id)\r\n            window.calendar.props.refetchData();\r\n\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n                        // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + event.start.substring(10,19);\r\n                    new_end_for_this = new_day + event.end.substring(10,19);\r\n                    if (e.resourceId === event.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== event.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== event.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occured for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                              document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                              document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                              document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                // Update weekly achievement\r\n                if (window.calendar.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    window.calendar.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...window.calendar.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    }, function() {window.calendar.handleWeeklyAchievementsFormSubmit()})\r\n                    // If first time clicking, update achievement\r\n                    if (window.calendar.state.achievements_books[0].first_schedule === 0) {\r\n                        window.calendar.setState({\r\n                            achievements_books: [\r\n                                {\r\n                                    ...window.calendar.state.achievements_books[0],\r\n                                    first_schedule: 70\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handleAchievementsFormSubmit()})\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 90\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                        window.presencecontrol.setState({key: window.presencecontrol.state.key + 1})\r\n                    } else {\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 20\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        var slotName = schedulerData.getSlotById(event.resourceId).name;\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={event.start}\r\n                event_end={newEnd}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    moveEvent = (schedulerData, event, slotId, slotName, start, end) => {\r\n        var old_start = event.start;\r\n        var old_end = event.end;\r\n        schedulerData.updateEventStart(event, start);\r\n        schedulerData.updateEventEnd(event, end);\r\n        event.title = event.title.substring(0, event.title.length - 20) + \" (\" + from24to12(moment(start).format('HH:mm')) + \" - \" + from24to12(moment(end).format('HH:mm')) + \")\";\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Update database (Update)\r\n            window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n            window.calendar.props.refetchData();\r\n        }\r\n\r\n        function deleteButtonClicked() {\r\n            // Update database (Delete)\r\n            window.calendar.props.onDeleteClick(event.database_id);\r\n            window.calendar.props.refetchData();\r\n\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n                        // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + event.start.substring(10,19);\r\n                    new_end_for_this = new_day + event.end.substring(10,19);\r\n                    if (e.resourceId === event.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== event.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== event.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occured for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                              document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                              document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                              document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                // Update weekly achievement\r\n                if (window.calendar.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    window.calendar.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...window.calendar.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    }, function() {window.calendar.handleWeeklyAchievementsFormSubmit()})\r\n                    // If first time clicking, update achievement\r\n                    if (window.calendar.state.achievements_books[0].first_schedule === 0) {\r\n                        window.calendar.setState({\r\n                            achievements_books: [\r\n                                {\r\n                                    ...window.calendar.state.achievements_books[0],\r\n                                    first_schedule: 70\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handleAchievementsFormSubmit()})\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 90\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                        window.presencecontrol.setState({key: window.presencecontrol.state.key + 1})\r\n                    } else {\r\n                        window.calendar.setState({\r\n                            points_wallet_books: [\r\n                                {\r\n                                    ...window.calendar.state.points_wallet_books[0],\r\n                                    points: window.calendar.state.points_wallet_books[0].points + 20\r\n                                }\r\n                            ]\r\n                        }, function() {window.calendar.handlePointsWalletFormSubmit()})\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={start}\r\n                event_end={end}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    conflictOccurred = (schedulerData, action, event, type, slotId, slotName, start, end) => {\r\n        console.log(action)\r\n        console.log(type)\r\n        ReactDOM.render(\r\n            <OnlyAlert\r\n                message={\"This is conflicting with a schedule set for \" + slotName + \".\"}\r\n                onOK={function() {\r\n                    ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                }}\r\n            />, document.getElementById(\"confirm-alert\")\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withDragDropContext(Calendar);","import React, {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport ConfirmAlert from './ConfirmAlert';\r\nimport Calendar from './Calendar';\r\n\r\nfunction compare(a,b) {\r\n    let comparison = 0;\r\n    if (a.device_type > b.device_type) {\r\n        comparison = 1;\r\n    } else if (a.device_type < b.device_type) {\r\n        comparison = -1\r\n    }\r\n    return comparison\r\n}\r\n\r\n// Remote Control\r\n\r\nclass RemoteControlDashboard extends Component {\r\n    state = {\r\n        books: [],\r\n        key: 1\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    fetchData = () => {\r\n        // Fetch data from database\r\n        fetch('http://127.0.0.1:8000/control_interface/api/remote/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            data.sort(compare);\r\n            this.setState({books: data, key: this.state.key+1})\r\n        })\r\n\r\n        setTimeout(this.fetchData, 5000)\r\n    }\r\n\r\n    updateBook = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/remote/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook)\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({books: newBooks});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div id=\"remote_control_space\">\r\n                    <RemoteControlList\r\n                        key={this.state.key}\r\n                        books={this.state.books}\r\n                        onUpdateClick={this.updateBook}\r\n                    />\r\n                </div>\r\n                <p style={{float:\"right\"}}> Note: It will take around 5 seconds for your devices to be switched ON/OFF. </p>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass RemoteControlList extends Component {\r\n    render() {\r\n        const books = this.props.books.map(book => (\r\n            <RemoteControlEditableItem\r\n                key={book.id}\r\n                id={book.id}\r\n                user_id={book.user_id}\r\n                device_type={book.device_type}\r\n                device_state={book.device_state}\r\n                onUpdateClick={this.props.onUpdateClick}\r\n            />\r\n        ));\r\n        return (\r\n            <>\r\n                <div style={{float:\"right\"}}>\r\n                    <p style={{marginLeft:\"50px\", marginBottom:\"5px\"}}> Master </p>\r\n                    <RemoteToggleButton id=\"master\" defaultChecked={true} books={this.props.books} />\r\n                </div>\r\n                <br/>\r\n                <br/>\r\n                <div style={{margin:\"auto\", width:\"fit-content\"}}>\r\n                    {books}\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass RemoteControlEditableItem extends Component {\r\n    handleUpdate = (book) => {\r\n        book.id = this.props.id;\r\n        this.props.onUpdateClick(book);\r\n    }\r\n\r\n    render() {\r\n        const component = () => {\r\n            return (\r\n                <>\r\n                    <RemoteControlItem\r\n                        id={this.props.id}\r\n                        user_id={this.props.user_id}\r\n                        device_type={this.props.device_type}\r\n                        device_state={this.props.device_state}\r\n                        onFormSubmit={this.handleUpdate}\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        return (\r\n            component()\r\n        )\r\n    }\r\n}\r\n\r\nclass RemoteControlItem extends Component {\r\n    state = {\r\n        user_id: this.props.user_id,\r\n        device_type: this.props.device_type,\r\n        device_state: this.props.device_state,\r\n        achievements_books: [],\r\n        points_wallet_books: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data for achievements\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({achievements_books: data})\r\n        })\r\n\r\n        // Fetch data for points wallet\r\n        fetch('http://127.0.0.1:8000/control_interface/api/points_wallet/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({points_wallet_books: data})\r\n        })\r\n\r\n        Main();\r\n    }\r\n\r\n    updateAchievementsBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updatePointsWalletBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/points_wallet/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.points_wallet_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({points_wallet_books: newBooks})\r\n        })\r\n    }\r\n\r\n    handleAchievementsUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updateAchievementsBooks(book);\r\n    }\r\n\r\n    handlePointsWalletUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updatePointsWalletBooks(book);\r\n    }\r\n\r\n    handleAchievementsFormSubmit = () => {\r\n        this.handleAchievementsUpdate(this.state.achievements_books[0])\r\n    }\r\n\r\n    handlePointsWalletFormSubmit = () => {\r\n        this.handlePointsWalletUpdate(this.state.points_wallet_books[0])\r\n    }\r\n\r\n    handleFormSubmit = () => {\r\n        this.props.onFormSubmit({...this.state});\r\n    }\r\n\r\n    onConfirm1 = () => {\r\n        var to_be_confirmed = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_confirmed).checked = false;\r\n        this.setState({device_state: false}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n        Main();\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_remote === 0) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_remote: 60\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n            this.setState({\r\n                points_wallet_books: [\r\n                    {\r\n                        ...this.state.points_wallet_books[0],\r\n                        points: this.state.points_wallet_books[0].points + 60\r\n                    }\r\n                ]\r\n            }, function() {this.handlePointsWalletFormSubmit()})\r\n            window.presencecontrol.setState({key: window.presencecontrol.state.key + 1})\r\n             // Open the calendar for today\r\n             const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n             var today = new Date();\r\n             var wanted_id = days[today.getDay()] + \"Calendar\";\r\n             document.getElementById(wanted_id).className=\"selected\";\r\n             setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n        }\r\n    }\r\n\r\n    onConfirm2 = () => {\r\n        var to_be_confirmed = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_confirmed).checked = true;\r\n        this.setState({device_state: true}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n        Main();\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_remote === 0) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_remote: 60\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n            this.setState({\r\n                points_wallet_books: [\r\n                    {\r\n                        ...this.state.points_wallet_books[0],\r\n                        points: this.state.points_wallet_books[0].points + 60\r\n                    }\r\n                ]\r\n            }, function() {this.handlePointsWalletFormSubmit()})\r\n            window.presencecontrol.setState({key: window.presencecontrol.state.key + 1})\r\n            // Open the calendar for today\r\n            const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n            var today = new Date();\r\n            var wanted_id = days[today.getDay()] + \"Calendar\";\r\n            document.getElementById(wanted_id).className=\"selected\";\r\n            setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n        }\r\n    }\r\n\r\n    onCancel1 = () => {\r\n        var to_be_cancelled = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_cancelled).checked = true;\r\n        this.setState({device_state: true}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel2 = () => {\r\n        var to_be_cancelled = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_cancelled).checked = false;\r\n        this.setState({device_state: false}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onChange = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.device_type === \"Desktop\" || this.state.device_type === \"Laptop\") {\r\n            if (this.state.device_state === true) {\r\n                if (document.getElementById(\"confirm-alert\").childNodes.length > 0) {\r\n                    // Switch OFF\r\n                    this.setState({device_state: false}, function() {this.handleFormSubmit()})\r\n                } else {\r\n                    ReactDOM.render(<ConfirmAlert\r\n                                        message={\"You are switching off your \" + this.state.device_type + \".\"}\r\n                                        onConfirm = {this.onConfirm1}\r\n                                        onCancel = {this.onCancel1}\r\n                                    />, document.getElementById(\"confirm-alert\"))\r\n                }\r\n            } else {\r\n                if (document.getElementById(\"confirm-alert\").childNodes.length > 0) {\r\n                    // Switch ON\r\n                    this.setState({device_state: true}, function() {this.handleFormSubmit()})\r\n                } else {\r\n                    ReactDOM.render(<ConfirmAlert\r\n                                        message={\"You are switching on your \" + this.state.device_type + \".\"}\r\n                                        onConfirm = {this.onConfirm2}\r\n                                        onCancel = {this.onCancel2}\r\n                                    />, document.getElementById(\"confirm-alert\"))\r\n                }\r\n            }\r\n        } else {\r\n            // Update database\r\n            this.setState({device_state: e.target.checked}, function() {this.handleFormSubmit()})\r\n            Main();\r\n\r\n            // If first time clicking, update achievement\r\n            if (this.state.achievements_books[0].first_remote === 0) {\r\n                this.setState({\r\n                    achievements_books: [\r\n                        {\r\n                            ...this.state.achievements_books[0],\r\n                            first_remote: 60\r\n                        }\r\n                    ]\r\n                }, function() {this.handleAchievementsFormSubmit()})\r\n                this.setState({\r\n                    points_wallet_books: [\r\n                        {\r\n                            ...this.state.points_wallet_books[0],\r\n                            points: this.state.points_wallet_books[0].points + 60\r\n                        }\r\n                    ]\r\n                }, function() {this.handlePointsWalletFormSubmit()})\r\n                window.presencecontrol.setState({key: window.presencecontrol.state.key + 1})\r\n                // Open the calendar for today\r\n                const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n                var today = new Date();\r\n                var wanted_id = days[today.getDay()] + \"Calendar\";\r\n                document.getElementById(wanted_id).className=\"selected\";\r\n                setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.state.device_state === false) {\r\n            var remote_control_outer_ring = \"greyRing\";\r\n            var remote_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" OFF.png\";\r\n        } else {\r\n            remote_control_outer_ring = \"greenRing\";\r\n            remote_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" ON.png\";\r\n        }\r\n\r\n        return (\r\n            <div id={this.state.device_type.replace(/\\s/g,'') + \"BoxRemote\"} className=\"containerRemote\">\r\n                <p style={{textAlign:\"center\", fontWeight:\"bold\", color:\"black\"}}> {this.state.device_type} </p>\r\n                <div id={this.state.device_type.replace(/\\s/g,'') + \"IconRemote\"}>\r\n                    <div class={remote_control_outer_ring}>\r\n                        <div class=\"whiteRing\">\r\n                            <img class=\"PlugLoadIcon\" src={remote_control_image} alt=\"Icon\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br/>\r\n                <div className=\"toggle-switch\">\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        className=\"toggle-switch-checkbox\"\r\n                        id={this.state.device_type.replace(/\\s/g,'') + \"ToggleRemote\"}\r\n                        checked={this.state.device_state}\r\n                        defaultChecked={this.state.device_state}\r\n                        onChange={this.onChange}\r\n                    />\r\n                    <label className=\"toggle-switch-label\" htmlFor={this.state.device_type.replace(/\\s/g,'') + \"ToggleRemote\"}>\r\n                        <span className=\"toggle-switch-inner\" data-yes=\"ON\" data-no=\"OFF\" />\r\n                        <span className=\"toggle-switch-switch\" />\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass RemoteToggleButton extends Component {\r\n    state = {\r\n        checked: this.props.defaultChecked\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        window.master = this;\r\n    }\r\n\r\n    onConfirm1 = () => {\r\n        // Switch OFF all plug loads\r\n        if (document.getElementById(\"DesktopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"DesktopToggleRemote\").checked === true) {\r\n                document.getElementById(\"DesktopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"MonitorToggleRemote\") !== null) {\r\n            if (document.getElementById(\"MonitorToggleRemote\").checked === true) {\r\n                document.getElementById(\"MonitorToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"LaptopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"LaptopToggleRemote\").checked === true) {\r\n                document.getElementById(\"LaptopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"TaskLampToggleRemote\") !== null) {\r\n            if (document.getElementById(\"TaskLampToggleRemote\").checked === true) {\r\n                document.getElementById(\"TaskLampToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"FanToggleRemote\") !== null) {\r\n            if (document.getElementById(\"FanToggleRemote\").checked === true) {\r\n                document.getElementById(\"FanToggleRemote\").click();\r\n            }\r\n        }\r\n        document.getElementById(\"master\").checked = false;\r\n        this.setState({checked: false})\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onConfirm2 = () => {\r\n        // Switch ON all plug loads\r\n        if (document.getElementById(\"DesktopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"DesktopToggleRemote\").checked === false) {\r\n                document.getElementById(\"DesktopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"MonitorToggleRemote\") !== null) {\r\n            if (document.getElementById(\"MonitorToggleRemote\").checked === false) {\r\n                document.getElementById(\"MonitorToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"LaptopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"LaptopToggleRemote\").checked === false) {\r\n                document.getElementById(\"LaptopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"TaskLampToggleRemote\") !== null) {\r\n            if (document.getElementById(\"TaskLampToggleRemote\").checked === false) {\r\n                document.getElementById(\"TaskLampToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"FanToggleRemote\") !== null) {\r\n            if (document.getElementById(\"FanToggleRemote\").checked === false) {\r\n                document.getElementById(\"FanToggleRemote\").click();\r\n            }\r\n        }\r\n        document.getElementById(\"master\").checked = true;\r\n        this.setState({checked: true});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel1 = () => {\r\n        document.getElementById(\"master\").checked = true;\r\n        this.setState({checked: true});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel2 = () => {\r\n        document.getElementById(\"master\").checked = false;\r\n        this.setState({checked: false});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onChange = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.checked === true) {\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message=\"You are switching off all your devices.\"\r\n                                onConfirm = {this.onConfirm1}\r\n                                onCancel = {this.onCancel1}\r\n                             />, document.getElementById(\"confirm-alert\"))\r\n        } else {\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message=\"You are switching on all your devices.\"\r\n                                onConfirm = {this.onConfirm2}\r\n                                onCancel = {this.onCancel2}\r\n                            />, document.getElementById(\"confirm-alert\"))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var defaultChecked = false\r\n        for (var book of this.props.books) {\r\n            if (book.device_state === true) {\r\n                defaultChecked = true\r\n            }\r\n        }\r\n        return (\r\n            <div className={\"toggle-switch\" + (this.props.Small ? \" small-switch\" : \"\")}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name={this.props.Name}\r\n                    className=\"toggle-switch-checkbox\"\r\n                    id={this.props.id}\r\n                    checked={this.checked}\r\n                    defaultChecked={defaultChecked}\r\n                    onClick={this.onChange}\r\n                    disabled={this.props.disabled}\r\n                />\r\n                {this.props.id ? (\r\n                    <label className=\"toggle-switch-label\" htmlFor={this.props.id}>\r\n                        <span\r\n                            className={this.props.disabled ? \"toggle-switch-inner toggle-switch-disabled\" : \"toggle-switch-inner\"}\r\n                            data-yes=\"ON\"\r\n                            data-no=\"OFF\"\r\n                        />\r\n                        <span\r\n                            className={this.props.disabled ? \"toggle-switch-switch toggle-switch-disabled\": \"toggle-switch-switch\"}\r\n                        />\r\n                    </label>\r\n                ) : null}\r\n          </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<RemoteControlDashboard />, document.getElementById('remote-control'))\r\n\r\nfunction Main() {\r\n    // If at least one plug load is ON, master button is automatically toggled to ON.\r\n    if (document.getElementById(\"DesktopToggleRemote\").checked || document.getElementById(\"MonitorToggleRemote\").checked ||\r\n        document.getElementById(\"LaptopToggleRemote\").checked || document.getElementById(\"TaskLampToggleRemote\").checked ||\r\n        document.getElementById(\"FanToggleRemote\").checked) {\r\n        window.master.setState({checked: true});\r\n        document.getElementById(\"master\").checked = true;\r\n    } else {\r\n        // If all plug loads are OFF, master button is automatically toggled to OFF.\r\n        if (!document.getElementById(\"DesktopToggleRemote\").checked && !document.getElementById(\"MonitorToggleRemote\").checked &&\r\n            !document.getElementById(\"LaptopToggleRemote\").checked && !document.getElementById(\"TaskLampToggleRemote\").checked &&\r\n            !document.getElementById(\"FanToggleRemote\").checked) {\r\n            window.master.setState({checked: false});\r\n            document.getElementById(\"master\").checked = false;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n// Schedule Based control\r\n\r\nfunction sort_events(a,b) {\r\n    let comparison = 0;\r\n    if (a.start > b.start) {\r\n        comparison = 1;\r\n    } else if (a.start < b.start) {\r\n        comparison = -1\r\n    }\r\n    return comparison\r\n}\r\n\r\nfunction from24to12(hour) {\r\n    var new_hour = Number(hour.substring(0,2));\r\n    var am_or_pm = new_hour >= 12 ? \"PM\" : \"AM\";\r\n    new_hour = (new_hour % 12) || 12;\r\n    var finalTime = new_hour + \":\" + hour.substring(3,5) + \" \" + am_or_pm;\r\n\r\n    if (finalTime.length !== 8) {\r\n        finalTime = \"0\" + finalTime\r\n    }\r\n    return (finalTime);\r\n}\r\n\r\nfunction getDates() {\r\n    var today = new Date();\r\n    var mondayDate = new Date();\r\n    var tuesdayDate = new Date();\r\n    var wednesdayDate = new Date();\r\n    var thursdayDate = new Date();\r\n    var fridayDate = new Date();\r\n    var saturdayDate = new Date();\r\n    var sundayDate = new Date();\r\n\r\n    if (today.getDay() === 0) {\r\n        // Today is Sunday\r\n        mondayDate.setDate(today.getDate() - 6);\r\n        tuesdayDate.setDate(today.getDate() - 5);\r\n        wednesdayDate.setDate(today.getDate() - 4);\r\n        thursdayDate.setDate(today.getDate() - 3);\r\n        fridayDate.setDate(today.getDate() - 2);\r\n        saturdayDate.setDate(today.getDate() - 1);\r\n        sundayDate.setDate(today.getDate());\r\n    } else {\r\n        mondayDate.setDate(today.getDate() + (1 - today.getDay()));\r\n        tuesdayDate.setDate(today.getDate() + (2 - today.getDay()));\r\n        wednesdayDate.setDate(today.getDate() + (3 - today.getDay()));\r\n        thursdayDate.setDate(today.getDate() + (4 - today.getDay()));\r\n        fridayDate.setDate(today.getDate() + (5 - today.getDay()));\r\n        saturdayDate.setDate(today.getDate() + (6 - today.getDay()));\r\n        sundayDate.setDate(today.getDate() + (7 - today.getDay()));\r\n    }\r\n\r\n    mondayDate = mondayDate.getFullYear() + \"-\" + ((mondayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (mondayDate.getMonth() + 1).toString() : (mondayDate.getMonth() + 1)) + \"-\" + (mondayDate.getDate().toString().length === 1 ? \"0\" + mondayDate.getDate().toString() : mondayDate.getDate())\r\n    tuesdayDate = tuesdayDate.getFullYear() + \"-\" + ((tuesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (tuesdayDate.getMonth() + 1).toString() : (tuesdayDate.getMonth() + 1)) + \"-\" + (tuesdayDate.getDate().toString().length === 1 ? \"0\" + tuesdayDate.getDate().toString() : tuesdayDate.getDate())\r\n    wednesdayDate = wednesdayDate.getFullYear() + \"-\" + ((wednesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (wednesdayDate.getMonth() + 1).toString() : (wednesdayDate.getMonth() + 1)) + \"-\" + (wednesdayDate.getDate().toString().length === 1 ? \"0\" + wednesdayDate.getDate().toString() : wednesdayDate.getDate())\r\n    thursdayDate = thursdayDate.getFullYear() + \"-\" + ((thursdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (thursdayDate.getMonth() + 1).toString() : (thursdayDate.getMonth() + 1))  + \"-\" + (thursdayDate.getDate().toString().length === 1 ? \"0\" + thursdayDate.getDate().toString() : thursdayDate.getDate())\r\n    fridayDate = fridayDate.getFullYear() + \"-\" + ((fridayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (fridayDate.getMonth() + 1).toString() : (fridayDate.getMonth() + 1)) + \"-\" + (fridayDate.getDate().toString().length === 1 ? \"0\" + fridayDate.getDate().toString() : fridayDate.getDate())\r\n    saturdayDate = saturdayDate.getFullYear() + \"-\" + ((saturdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (saturdayDate.getMonth() + 1).toString() : (saturdayDate.getMonth() + 1)) + \"-\" + (saturdayDate.getDate().toString().length === 1 ? \"0\" + saturdayDate.getDate().toString() : saturdayDate.getDate())\r\n    sundayDate = sundayDate.getFullYear() + \"-\" + ((sundayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (sundayDate.getMonth() + 1).toString() : (sundayDate.getMonth() + 1)) + \"-\" + (sundayDate.getDate().toString().length === 1 ? \"0\" + sundayDate.getDate().toString() : sundayDate.getDate())\r\n\r\n    return([mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate])\r\n}\r\n\r\nfunction getCookie(name) {\r\n    let cookieValue = null;\r\n    if (document.cookie && document.cookie !== '') {\r\n        const cookies = document.cookie.split(';');\r\n        for (let i = 0; i < cookies.length; i++) {\r\n            const cookie = cookies[i].trim();\r\n            if (cookie.substring(0,name.length+1) === (name + '=')) {\r\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue\r\n}\r\n\r\nclass ScheduleControlDashboard extends Component {\r\n    state = {\r\n        events: [],\r\n        dates: [],\r\n        chosen_day: \"\",\r\n        books: [],\r\n        current_user_id: 1\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data from database\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({books: data})\r\n            var events_datas = [];\r\n            for (var input of data) {\r\n                this.setState({current_user_id: input.user_id}, function(){console.log(this.state.current_user_id)})\r\n                var resourceId = input.device_type_id;\r\n                var eventId = input.event_id;\r\n                var event_start = input.event_start;\r\n                var event_end = input.event_end;\r\n\r\n                // Format the title to be shown for each event on the scheduler\r\n                var finalStart = from24to12(event_start);\r\n                var finalEnd = from24to12(event_end)\r\n                var event_name = input.event_name + \" (\" + finalStart + \" - \" + finalEnd + \")\"\r\n\r\n                var [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate] = getDates();\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + mondayDate.substring(0,4) + mondayDate.substring(5,7) + mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" + sundayDate.substring(0,4) + sundayDate.substring(5,7) + sundayDate.substring(8,10) + \"T235900Z;BYDAY=\";\r\n                event_start = mondayDate + \" \" + event_start;\r\n                event_end = mondayDate + \" \" + event_end;\r\n                if (input.event_rrule.includes(\"Monday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"MO\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",MO\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Tuesday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"TU\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",TU\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Wednesday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"WE\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",WE\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Thursday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"TH\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",TH\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Friday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"FR\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",FR\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Saturday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"SA\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",SA\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Sunday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"SU\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",SU\";\r\n                            }\r\n                        }\r\n\r\n                // Set the events for the scheduler\r\n                events_datas.push({id: eventId, start: event_start, end: event_end, title: event_name, rrule: event_rrule, resourceId: resourceId, showPopover: false, bgColor: '#06D6A0', database_id: input.id})\r\n\r\n                // Open the calendar for today\r\n                const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n                var today = new Date();\r\n                var wanted_id = days[today.getDay()] + \"Calendar\";\r\n                document.getElementById(wanted_id).className=\"selected\";\r\n                setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n            }\r\n            events_datas.sort(sort_events)\r\n            this.setState({\r\n                events: events_datas,\r\n                dates: [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate]\r\n            })\r\n        })\r\n    }\r\n\r\n    refetchData = () => {\r\n        // Fetch data from database\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({books: data})\r\n            var events_datas = [];\r\n            for (var input of data) {\r\n                this.setState({current_user_id: input.user_id}, function() {console.log(this.state.current_user_id)})\r\n                var resourceId = input.device_type_id;\r\n                var eventId = input.event_id;\r\n                var event_start = input.event_start;\r\n                var event_end = input.event_end;\r\n\r\n                // Format the title to be shown for each event on the scheduler\r\n                var finalStart = from24to12(event_start);\r\n                var finalEnd = from24to12(event_end)\r\n                var event_name = input.event_name + \" (\" + finalStart + \" - \" + finalEnd + \")\"\r\n\r\n                var [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate] = getDates();\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + mondayDate.substring(0,4) + mondayDate.substring(5,7) + mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" + sundayDate.substring(0,4) + sundayDate.substring(5,7) + sundayDate.substring(8,10) + \"T235900Z;BYDAY=\";\r\n                event_start = mondayDate + \" \" + event_start;\r\n                event_end = mondayDate + \" \" + event_end;\r\n                if (input.event_rrule.includes(\"Monday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"MO\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",MO\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Tuesday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"TU\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",TU\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Wednesday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"WE\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",WE\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Thursday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"TH\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",TH\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Friday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"FR\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",FR\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Saturday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"SA\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",SA\";\r\n                            }\r\n                        }\r\n                if (input.event_rrule.includes(\"Sunday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"SU\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",SU\";\r\n                            }\r\n                        }\r\n\r\n                // Set the events for the scheduler\r\n                events_datas.push({id: eventId, start: event_start, end: event_end, title: event_name, rrule: event_rrule, resourceId: resourceId, showPopover: false, bgColor: '#06D6A0', database_id: input.id})\r\n            }\r\n            events_datas.sort(sort_events)\r\n            this.setState({\r\n                events: events_datas,\r\n                dates: [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate]\r\n            })\r\n        })\r\n    }\r\n\r\n    createNewBook = (book) => {\r\n        const csrftoken = getCookie('csrftoken');\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'X-CSRFToken': csrftoken\r\n            },\r\n            body: JSON.stringify(book),\r\n        })\r\n        .then(response => response.json())\r\n        .then(book => {\r\n            this.setState({books: this.state.books.concat([book])});\r\n        })\r\n    }\r\n\r\n    updateBook = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook)\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n\r\n            this.setState({books: newBooks});\r\n        })\r\n    }\r\n\r\n    deleteBook = (bookId) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/' + bookId + '/', {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n        })\r\n        .then(() => {\r\n            this.setState({books: this.state.books.filter(book => book.id !== bookId)})\r\n        })\r\n    }\r\n\r\n    removeCalendarHeader = () => {\r\n        document.getElementById(\"root\").childNodes[0].childNodes[0].childNodes[0].removeChild(document.getElementById(\"root\").childNodes[0].childNodes[0].childNodes[0].childNodes[0]);\r\n    }\r\n\r\n    addLines = () => {\r\n        document.getElementsByClassName(\"scheduler-bg-table\")[0].childNodes[0].childNodes[0].childNodes[23].style.borderRight = 0;\r\n\r\n        var i;\r\n        var j;\r\n        for (i=0; i<5; i++) {\r\n            for (j=3; j<93; j+=4) {\r\n                document.getElementsByClassName(\"scheduler-bg-table\")[1].childNodes[0].childNodes[i].childNodes[j].style.borderRight = \"1px solid #707070\";\r\n            }\r\n        }\r\n    }\r\n\r\n    chooseMonday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Monday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"selected\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[0]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Monday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseTuesday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Tuesday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[1]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Tuesday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseWednesday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Wednesday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[2]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Wednesday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseThursday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Thursday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[3]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Thursday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseFriday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Friday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"selected\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[4]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Friday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseSaturday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Saturday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[5]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Saturday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseSunday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Sunday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"selected\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[6]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Sunday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"tab\">\r\n                    <button id=\"MondayCalendar\" onClick={this.chooseMonday}> Monday </button>\r\n                    <button id=\"TuesdayCalendar\" onClick={this.chooseTuesday}> Tuesday </button>\r\n                    <button id=\"WednesdayCalendar\" onClick={this.chooseWednesday}> Wednesday </button>\r\n                    <button id=\"ThursdayCalendar\" onClick={this.chooseThursday}> Thursday </button>\r\n                    <button id=\"FridayCalendar\" onClick={this.chooseFriday}> Friday </button>\r\n                    <button id=\"SaturdayCalendar\" onClick={this.chooseSaturday}> Saturday </button>\r\n                    <button id=\"SundayCalendar\" onClick={this.chooseSunday}> Sunday </button>\r\n                </div>\r\n                <ScheduleControlItem\r\n                    refetchData={this.refetchData}\r\n                    events={this.state.events}\r\n                    dates={this.state.dates}\r\n                    onDeleteClick={this.deleteBook}\r\n                    onAddClick={this.createNewBook}\r\n                    onUpdateClick={this.updateBook}\r\n                    books={this.state.books}\r\n                    current_user_id={this.state.current_user_id}\r\n                />\r\n                <div id=\"popup-container-schedule\"> </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlItem extends Component {\r\n    render() {\r\n        const days=[\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\r\n        var today = new Date()\r\n        var today_date = today.getFullYear() + \"-\" + ((today.getMonth() + 1).toString().length === 1 ? \"0\" + (today.getMonth() + 1).toString() : (today.getMonth() + 1)) + \"-\" + (today.getDate().toString().length === 1 ? \"0\" + today.getDate().toString() : today.getDate())\r\n        return (\r\n            <div id=\"root\">\r\n                <Calendar\r\n                    refetchData={this.props.refetchData}\r\n                    events={this.props.events}\r\n                    date={today_date}\r\n                    onDeleteClick={this.props.onDeleteClick}\r\n                    onAddClick={this.props.onAddClick}\r\n                    onUpdateClick={this.props.onUpdateClick}\r\n                    books={this.props.books}\r\n                    mondayDate={this.props.dates[0]}\r\n                    sundayDate={this.props.dates[6]}\r\n                    day={days[today.getDay()]}\r\n                    current_user_id={this.props.current_user_id}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<ScheduleControlDashboard />, document.getElementById('schedule-based-control'))\r\n\r\n// Presence Based Control\r\n\r\nclass PresenceControlDashboard extends Component {\r\n    state = {\r\n        books: [],\r\n        key: 1\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        window.presencecontrol = this;\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data from database\r\n        fetch('http://127.0.0.1:8000/control_interface/api/presence/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            data.sort(compare);\r\n            this.setState({books: data})\r\n        })\r\n    }\r\n\r\n    updateBook = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/presence/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook)\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({books: newBooks});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n              <br/>\r\n\r\n                  <PresenceControlList\r\n                      key={this.state.key}\r\n                      books={this.state.books}\r\n                      onUpdateClick={this.updateBook}\r\n                  />\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass PresenceControlList extends Component {\r\n    render() {\r\n        const books = this.props.books.map(book => (\r\n            <PresenceControlEditableItem\r\n                key={book.id}\r\n                id={book.id}\r\n                user_id={book.user_id}\r\n                device_type={book.device_type}\r\n                presence_setting={book.presence_setting}\r\n                onUpdateClick={this.props.onUpdateClick}\r\n            />\r\n        ));\r\n        return (\r\n            <div class=\"plugloadboxes\">\r\n                {books}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass PresenceControlEditableItem extends Component {\r\n    handleUpdate = (book) => {\r\n        book.id = this.props.id;\r\n        this.props.onUpdateClick(book);\r\n    }\r\n\r\n    render() {\r\n        const component = () => {\r\n            return (\r\n                <>\r\n                    <PresenceControlItem\r\n                        id={this.props.id}\r\n                        user_id={this.props.user_id}\r\n                        device_type={this.props.device_type}\r\n                        presence_setting={this.props.presence_setting}\r\n                        onFormSubmit={this.handleUpdate}\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        return (\r\n            component()\r\n        )\r\n    }\r\n}\r\n\r\nclass PresenceControlItem extends Component {\r\n    state = {\r\n        user_id: this.props.user_id,\r\n        device_type: this.props.device_type,\r\n        presence_setting: this.props.presence_setting,\r\n        achievements_books: [],\r\n        points_wallet_books: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refetchBonusAchievementsData();\r\n        this.refetchPointsWalletData();\r\n    }\r\n\r\n    refetchBonusAchievementsData = () => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({achievements_books: data})\r\n        })\r\n\r\n        setTimeout(this.refetchBonusAchievementsData, 5000)\r\n    }\r\n\r\n    refetchPointsWalletData = () => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/points_wallet/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({points_wallet_books: data})\r\n        })\r\n\r\n        setTimeout(this.refetchPointsWalletData, 5000)\r\n    }\r\n\r\n    updateAchievementsBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updatePointsWalletBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/points_wallet/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.points_wallet_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({points_wallet_books: newBooks})\r\n        })\r\n    }\r\n\r\n    handleAchievementsUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updateAchievementsBooks(book);\r\n    }\r\n\r\n    handlePointsWalletUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updatePointsWalletBooks(book);\r\n    }\r\n\r\n    handleAchievementsFormSubmit = () => {\r\n        this.handleAchievementsUpdate(this.state.achievements_books[0])\r\n    }\r\n\r\n    handlePointsWalletFormSubmit = () => {\r\n        this.handlePointsWalletUpdate(this.state.points_wallet_books[0])\r\n    }\r\n\r\n    onConfirm1 = () => {\r\n        // Update database\r\n        this.setState({presence_setting: \"1000000\"}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_presence === 0) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_presence: 70\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n\r\n            this.setState({\r\n                points_wallet_books: [\r\n                    {\r\n                        ...this.state.points_wallet_books[0],\r\n                        points: this.state.points_wallet_books[0].points + 70\r\n                    }\r\n                ]\r\n            }, function() {this.handlePointsWalletFormSubmit()})\r\n            // Open the calendar for today\r\n            const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n            var today = new Date();\r\n            var wanted_id = days[today.getDay()] + \"Calendar\";\r\n            document.getElementById(wanted_id).className=\"selected\";\r\n            setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n        }\r\n    }\r\n\r\n    onCancel1 = () => {\r\n        document.getElementById(this.state.device_type.replace(/\\s/g, '') + \"Select\").value = this.state.presence_setting;\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    handleFormSubmit = () => {\r\n        this.props.onFormSubmit({...this.state});\r\n    }\r\n\r\n    handleSettingUpdate = (evt) => {\r\n        if (evt.target.value !== \"other\" && evt.target.value !== \"1000000\") {\r\n            // Hide popup\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n            // Update database\r\n            this.setState({presence_setting: evt.target.value}, function() {this.handleFormSubmit()})\r\n\r\n            // If first time clicking, update achievement\r\n            if (this.state.achievements_books[0].first_presence === 0) {\r\n                this.setState({\r\n                    achievements_books: [\r\n                        {\r\n                            ...this.state.achievements_books[0],\r\n                            first_presence: 70\r\n                        }\r\n                    ]\r\n                }, function() {this.handleAchievementsFormSubmit()})\r\n                this.setState({\r\n                    points_wallet_books: [\r\n                        {\r\n                            ...this.state.points_wallet_books[0],\r\n                            points: this.state.points_wallet_books[0].points + 70\r\n                        }\r\n                    ]\r\n                }, function() {this.handlePointsWalletFormSubmit()})\r\n                // Open the calendar for today\r\n                const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n                var today = new Date();\r\n                var wanted_id = days[today.getDay()] + \"Calendar\";\r\n                document.getElementById(wanted_id).className=\"selected\";\r\n                setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n            }\r\n        }\r\n        if (evt.target.value === \"other\") {\r\n            // Show popup\r\n            ReactDOM.render(\r\n                <PresenceControlPopup\r\n                    device_type={this.state.device_type}\r\n                    handleOtherUpdate={this.handleOtherUpdate}\r\n                    handleEnterClick={this.handleEnterClick}\r\n                    cancelButtonClicked={this.cancelButtonClicked}\r\n                    okButtonClicked={this.okButtonClicked}\r\n                />, document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\")\r\n            )\r\n        }\r\n        if (evt.target.value === \"1000000\") {\r\n            // Hide popup\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message={\"You are deactivating presence-based control for \" + this.state.device_type + \".\"}\r\n                                onConfirm = {this.onConfirm1}\r\n                                onCancel = {this.onCancel1}\r\n                            />, document.getElementById(\"confirm-alert\"))\r\n        }\r\n    }\r\n\r\n    handleOtherUpdate = (evt) => {\r\n        this.setState({presence_setting: evt.target.value});\r\n    }\r\n\r\n    handleEnterClick = (evt) => {\r\n        if (evt.key === \"Enter\" || evt.keyCode === 13) {\r\n            this.okButtonClicked();\r\n        }\r\n    }\r\n\r\n    onConfirm2 = () => {\r\n        // Change outer ring to red\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'')).className = \"redRing\";\r\n        // Change image to OFF\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'')).childNodes[0].childNodes[0].src = \"/static/Images/\" + this.state.device_type.toString() + \" OFF.png\";\r\n        // Set value to OFF\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = \"1000000\";\r\n        // Update database\r\n        this.setState({presence_setting: \"1000000\"}, function() {this.handleFormSubmit()})\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_presence === 0) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_presence: 70\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n            this.setState({\r\n                points_wallet_books: [\r\n                    {\r\n                        ...this.state.points_wallet_books[0],\r\n                        points: this.state.points_wallet_books[0].points + 70\r\n                    }\r\n                ]\r\n            })\r\n            // Open the calendar for today\r\n            const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n            var today = new Date();\r\n            var wanted_id = days[today.getDay()] + \"Calendar\";\r\n            document.getElementById(wanted_id).className=\"selected\";\r\n            setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n        }\r\n    }\r\n\r\n    onCancel2 = () => {\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    handlePresenceIconClick = () => {\r\n        if (document.getElementById(this.state.device_type.replace(/\\s/g,'')).className === \"greenRing\") {\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message={\"You are deactivating presence-based control for \" + this.state.device_type + \".\"}\r\n                                onConfirm = {this.onConfirm2}\r\n                                onCancel = {this.onCancel2}\r\n                            />, document.getElementById(\"confirm-alert\"))\r\n        } else {\r\n            // Change outer ring to green\r\n            document.getElementById(this.state.device_type.replace(/\\s/g,'')).className = \"greenRing\"\r\n            // Change image to ON\r\n            document.getElementById(this.state.device_type.replace(/\\s/g,'')).childNodes[0].childNodes[0].src = \"/static/Images/\" + this.state.device_type.toString() + \" ON.png\";\r\n            // Set value to 5 minutes\r\n            document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = \"5\";\r\n            // Update database\r\n            this.setState({presence_setting: \"5\"}, function() {this.handleFormSubmit()})\r\n\r\n            // If first time clicking, update achievement\r\n            if (this.state.achievements_books[0].first_presence === 0) {\r\n                this.setState({\r\n                    achievements_books: [\r\n                        {\r\n                            ...this.state.achievements_books[0],\r\n                            first_presence: 70\r\n                        }\r\n                    ]\r\n                }, function() {this.handleAchievementsFormSubmit()})\r\n                this.setState({\r\n                    points_wallet_books: [\r\n                        {\r\n                            ...this.state.points_wallet_books[0],\r\n                            points: this.state.points_wallet_books[0].points + 70\r\n                        }\r\n                    ]\r\n                }, function() {this.handlePointsWalletFormSubmit()})\r\n                // Open the calendar for today\r\n                const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n                var today = new Date();\r\n                var wanted_id = days[today.getDay()] + \"Calendar\";\r\n                document.getElementById(wanted_id).className=\"selected\";\r\n                setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n            }\r\n        }\r\n    }\r\n\r\n    cancelButtonClicked = () => {\r\n        // Hide popup\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n        // Set value to 5 minutes\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = \"5\";\r\n        this.setState({presence_setting: 5}, function() {this.handleFormSubmit()})\r\n\r\n    }\r\n\r\n    okButtonClicked = () => {\r\n        // Display value on dropdown\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"TextOther\").value;\r\n        // Clear text box on popup\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"TextOther\").value = \"\";\r\n        // Hide popup\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n        // Update database\r\n        this.handleFormSubmit();\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_presence === 0) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_presence: 70\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n            this.setState({\r\n                points_wallet_books: [\r\n                    {\r\n                        ...this.state.points_wallet_books[0],\r\n                        points: this.state.points_wallet_books[0].points + 70\r\n                    }\r\n                ]\r\n            }, function() {this.handlePointsWalletFormSubmit()})\r\n            // Open the calendar for today\r\n            const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n            var today = new Date();\r\n            var wanted_id = days[today.getDay()] + \"Calendar\";\r\n            document.getElementById(wanted_id).className=\"selected\";\r\n            setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const possible_option = [\"1000000\", \"5\", \"10\", \"20\", \"30\", \"60\", \"other\"]\r\n        if (possible_option.includes(this.state.presence_setting.toString())) {\r\n            var disabled = true;\r\n            var display_value = \"\";\r\n            var display_text = \"\";\r\n        } else {\r\n            disabled = false;\r\n            display_value = this.state.presence_setting;\r\n            display_text = this.state.presence_setting + \" minutes\";\r\n        }\r\n\r\n        if (this.state.presence_setting.toString() === \"1000000\") {\r\n            var presence_control_outer_ring = \"redRing\";\r\n            var presence_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" OFF.png\";\r\n        } else {\r\n            presence_control_outer_ring = \"greenRing\";\r\n            presence_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" ON.png\";\r\n        }\r\n\r\n        return (\r\n            <div id={this.state.device_type.replace(/\\s/g,'') + \"BoxPresence\"} className=\"containerPresence\" onClick={this.exitClick}>\r\n                <div className=\"iconPresence\">\r\n                    <div className={presence_control_outer_ring} id={this.state.device_type.replace(/\\s/g,'')} onClick={this.handlePresenceIconClick}>\r\n                        <div className=\"whiteRing\">\r\n                            <img class=\"PlugLoadIcon\" src={presence_control_image} alt=\"Icon\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{width:\"200px\", height:\"10px\", overflowY:\"visible\"}}>\r\n                    <div style={{position:\"relative\", width:\"200px\", height:\"1px\", overflowY:\"visible\"}}>\r\n                        <div className=\"dropdownPresence\" id={this.state.device_type.replace(/\\s/g,'') + \"Dropdown\"}>\r\n                            <div class=\"wordPresence\">\r\n                                <p> {this.state.device_type} </p>\r\n                            </div>\r\n                            <select defaultValue={this.state.presence_setting} onChange={this.handleSettingUpdate} id={this.state.device_type.replace(/\\s/g,'') + \"Select\"}>\r\n                                <option value=\"1000000\"> Deactivate </option>\r\n                                <optgroup label=\"Off after I leave for:\">\r\n                                    <option value=\"5\"> 5 minutes </option>\r\n                                    <option value=\"10\"> 10 minutes </option>\r\n                                    <option value=\"20\"> 20 minutes </option>\r\n                                    <option value=\"30\"> 30 minutes </option>\r\n                                    <option value=\"60\"> 1 hour </option>\r\n                                    <option value=\"other\"> Custom Time </option>\r\n                                </optgroup>\r\n                                <option value={display_value} disabled={disabled}> {display_text} </option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div id={this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"}> </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass PresenceControlPopup extends Component {\r\n    exitClick = () => {\r\n        this.props.cancelButtonClicked();\r\n    }\r\n    render() {\r\n        return (\r\n        <>\r\n            <div id=\"PopupPresenceOverlay\" className=\"popup_presence_overlay\" onClick={this.exitClick}></div>\r\n            <div id={this.props.device_type.replace(/\\s/g,'') + \"PopupPresence\"} className=\"visiblePresence\">\r\n                <input type=\"text\" id={this.props.device_type.replace(/\\s/g,'') + \"TextOther\"} onChange={this.props.handleOtherUpdate} onKeyUp={this.props.handleEnterClick} />\r\n                <p class=\"minutes\"> minutes </p>\r\n                <br />\r\n                <button id={this.props.device_type.replace(/\\s/g,'') + \"CancelButton\"} onClick={this.props.cancelButtonClicked}> Cancel </button>\r\n                <button id={this.props.device_type.replace(/\\s/g,'') + \"OkButton\"} onClick={this.props.okButtonClicked}> OK </button>\r\n            </div>\r\n        </>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<PresenceControlDashboard />, document.getElementById('presence-based-control'))\r\n\r\n// Others\r\n\r\n// Information icons\r\nvar remotecontrolelement = document.getElementById(\"remotecontrolrect\");\r\nvar infoiconremote = document.getElementById(\"infoIconRemote\");\r\nvar scheduleelement = document.getElementById(\"schedulebasedrect\");\r\nvar infoiconschedule = document.getElementById(\"infoIcon\");\r\nvar presenceelement = document.getElementById(\"presencebasedrect\");\r\nvar infoiconpresence = document.getElementById(\"infoIconPresence\");\r\n\r\nwindow.onload = function() {\r\n  let remotecontrolelemRect = remotecontrolelement.getBoundingClientRect();\r\n  let infoiconremoteRect = infoiconremote.getBoundingClientRect();\r\n  let offsetremote = remotecontrolelemRect.right - infoiconremoteRect.right - 10;\r\n  infoiconremote.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxRemote\"}>\r\n          <p style={{color:\"black\"}}> This control feature allows you to manually switch your plug loads ON / OFF wirelessly without having to be physically present at your desk. </p>\r\n        </div>, document.getElementById(\"infoBoxRemote\"));\r\n    document.getElementById(\"informationBoxRemote\").style.width = offsetremote.toString() + \"px\";\r\n    }\r\n  infoiconremote.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxRemote\"));\r\n  }\r\n  let scheduleelemRect = scheduleelement.getBoundingClientRect();\r\n  let infoiconscheduleRect = infoiconschedule.getBoundingClientRect();\r\n  let offsetschedule = scheduleelemRect.right - infoiconscheduleRect.right - 10;\r\n  infoiconschedule.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBox\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps you to automatically switch ON / OFF your plug loads based on a specific schedule that you have defined. </p>\r\n        </div>, document.getElementById(\"infoBox\"));\r\n    document.getElementById(\"informationBox\").style.width = offsetschedule.toString() + \"px\";\r\n    }\r\n  infoiconschedule.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBox\"));\r\n  }\r\n  let presenceelemRect = presenceelement.getBoundingClientRect();\r\n  let infoiconpresenceRect = infoiconpresence.getBoundingClientRect();\r\n  let offsetpresence = presenceelemRect.right - infoiconpresenceRect.right - 10;\r\n  infoiconpresence.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxPresence\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps to automatically switch ON your devices when you arrive at your desk and switch them OFF after you have left your desk after some time. </p>\r\n        </div>, document.getElementById(\"infoBoxPresence\"));\r\n    document.getElementById(\"informationBoxPresence\").style.width = offsetpresence.toString() + \"px\";\r\n    }\r\n  infoiconpresence.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxPresence\"));\r\n  }\r\n}\r\n\r\nwindow.onresize = function() {\r\n\r\n  let remotecontrolelemRect = remotecontrolelement.getBoundingClientRect();\r\n  let infoiconremoteRect = infoiconremote.getBoundingClientRect();\r\n  let offsetremote = remotecontrolelemRect.right - infoiconremoteRect.right - 10;\r\n  infoiconremote.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxRemote\"}>\r\n          <p style={{color:\"black\"}}> This control feature allows you to manually switch your plug loads ON / OFF wirelessly without having to be physically present at your desk. </p>\r\n        </div>, document.getElementById(\"infoBoxRemote\"));\r\n    document.getElementById(\"informationBoxRemote\").style.width = offsetremote.toString() + \"px\";\r\n    }\r\n  infoiconremote.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxRemote\"));\r\n  }\r\n  let scheduleelemRect = scheduleelement.getBoundingClientRect();\r\n  let infoiconscheduleRect = infoiconschedule.getBoundingClientRect();\r\n  let offsetschedule = scheduleelemRect.right - infoiconscheduleRect.right - 10;\r\n  infoiconschedule.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBox\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps you to automatically switch ON / OFF your plug loads based on a specific schedule that you have defined. </p>\r\n        </div>, document.getElementById(\"infoBox\"));\r\n    document.getElementById(\"informationBox\").style.width = offsetschedule.toString() + \"px\";\r\n    }\r\n  infoiconschedule.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBox\"));\r\n  }\r\n  let presenceelemRect = presenceelement.getBoundingClientRect();\r\n  let infoiconpresenceRect = infoiconpresence.getBoundingClientRect();\r\n  let offsetpresence = presenceelemRect.right - infoiconpresenceRect.right - 10;\r\n  infoiconpresence.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxPresence\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps to automatically switch ON your devices when you arrive at your desk and switch them OFF after you have left your desk after some time. </p>\r\n        </div>, document.getElementById(\"infoBoxPresence\"));\r\n    document.getElementById(\"informationBoxPresence\").style.width = offsetpresence.toString() + \"px\";\r\n    }\r\n  infoiconpresence.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxPresence\"));\r\n  }\r\n}\r\n\r\n// Fix for Google Chrome\r\nvar isChromium = window.chrome;\r\nvar winNav = window.navigator;\r\nvar vendorName = winNav.vendor;\r\nvar isOpera = typeof window.opr !== \"undefined\";\r\nvar isIEedge = winNav.userAgent.indexOf(\"Edge\") > -1;\r\nvar isIOSChrome = winNav.userAgent.match(\"CriOS\");\r\n\r\nif (isIOSChrome) {\r\n   // is Google Chrome on IOS\r\n   document.onkeydown = function(event) {\r\nif (event.ctrlKey===true || (event.which === '61' || event.which === '107' || event.which === '173' || event.which === '109'  || event.which === '187'  || event.which === '189'  ) ) {\r\n        event.preventDefault();\r\n     }\r\n    // 107 Num Key  +\r\n    // 109 Num Key  -\r\n    // 173 Min Key  hyphen/underscore key\r\n    // 61 Plus key  +/= key\r\n};\r\n} else if(\r\n  isChromium !== null &&\r\n  typeof isChromium !== \"undefined\" &&\r\n  vendorName === \"Google Inc.\" &&\r\n  isOpera === false &&\r\n  isIEedge === false\r\n) {\r\n   // is Google Chrome\r\n   document.onkeydown = function(event) {\r\nif (event.ctrlKey === true || (event.which === '61' || event.which === '107' || event.which === '173' || event.which === '109'  || event.which === '187'  || event.which === '189'  ) ) {\r\n        event.preventDefault();\r\n     }\r\n    // 107 Num Key  +\r\n    // 109 Num Key  -\r\n    // 173 Min Key  hyphen/underscore key\r\n    // 61 Plus key  +/= key\r\n};\r\n} else {\r\n   // not Google Chrome\r\n}\r\n\r\n"],"sourceRoot":""}