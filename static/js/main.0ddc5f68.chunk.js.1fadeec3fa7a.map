{"version":3,"sources":["ConfirmAlert.js","withDnDContext.js","OnlyAlert.js","ConflictAlert.js","ScheduleControlPopup.js","Calendar.js","index.js"],"names":["ConfirmAlert","state","message","_this","props","onConfirm","onCancel","react_default","a","createElement","class","index_es","icon","faExclamationTriangle","style","color","this","onClick","Component","DragDropContext","HTML5Backend","OnlyAlert","onOK","messages","split","map","word","ScheduleControlPopup","exitPopup","e","target","document","getElementById","closeButtonClicked","event_rrule","includes","checked","substring","length","event_start","type","device_type","window","remote","devices","disabled","Fragment","id","defaultValue","event_name","faClock","ScheduleControlPopup_ScheduleControlTimepicker","time","display","marginRight","marginLeft","event_end","ScheduleControlPopup_ScheduleControlRepeat","fontWeight","ScheduleControlPopup_ScheduleControlApply","okButtonClicked","className","deleteButtonClicked","ScheduleControlTimepicker","hour","Number","am_pm","toString","minute","value","ScheduleControlRepeat","htmlFor","width","name","ScheduleControlApply","device","ScheduleControlPopup_ScheduleControlApplyItem","ScheduleControlApplyItem","replace","getCookie","cookieValue","cookie","cookies","i","trim","decodeURIComponent","from24to12","new_hour","am_or_pm","finalTime","from12to24","formatForDatabaseAdd","book","current_user_id","rrule","start","user_id","event_id","end","title","device_type_id","resourceId","formatForDatabaseUpdate","n","indexOf","database_id","processHourInput","getDates","today","Date","mondayDate","tuesdayDate","wednesdayDate","thursdayDate","fridayDate","saturdayDate","sundayDate","startDate","getDay","setDate","getDate","getFullYear","getMonth","withDragDropContext","Calendar","Object","classCallCheck","_super","call","updateAchievementsBooks","newBook","fetch","method","headers","Content-Type","body","JSON","stringify","then","response","json","newBooks","achievements_books","assign","setState","updateWeeklyAchievementsBooks","weekly_achievements_books","updateDailyAchievementsBooks","daily_achievements_books","updatePointsWalletBooks","points_wallet_books","handleAchievementsUpdate","handleWeeklyAchievementsUpdate","handleDailyAchievementsUpdate","handlePointsWalletUpdate","updateScheduleAchievements","bonus_data","_this2","first_schedule","points_data","points","now_unix_time","Math","round","getTime","csrftoken","X-CSRFToken","unix_time","description","notifications_data","number_of_notifications","notifications","current_user","new_timestamp","getUTCFullYear","push","timestamp","innerHTML","getElementsByClassName","childNodes","insertAdjacentHTML","concat","animationIterationCount","updateDailyScheduleAchievements","daily_data","days","_step","_this3","_iterator","createForOfIteratorHelper","s","done","input","week_day","daily_schedule","err","f","_step2","_this4","_iterator2","_this5","_this6","checkConflicts","schedulerData","event","_step3","hasConflict","conflictedEvents","plugload_option","querySelectorAll","repeat_option","new_days_to_loop_over","new_start","new_end","_iterator3","repeat_day","new_start_for_this","new_end_for_this","existing_start_for_this","existing_end_for_this","processed_event_id","_i","_new_days_to_loop_ove","new_day","_step4","_iterator4","plugload","current_resource_id","events","forEach","existing_days_to_loop_over","_i2","_existing_days_to_loo","existing_day","isNonWorkingTime","getScrollSpecialMoment","startMoment","endMoment","date","moment","eventClicked","slotName","getSlotById","ReactDOM","render","src_ScheduleControlPopup","check_start_time","check_end_time","src_OnlyAlert","unmountComponentAtNode","_window$calendar$chec","calendar","_window$calendar$chec2","slicedToArray","_step5","_iterator5","day","current_plugload_conflicted","ConflictAlert","updateEventStart","updateEventEnd","newFreshId","item","newEvent","bgColor","showPopover","onAddClick","addEvent","viewModel","onUpdateClick","refetchData","setTimeout","click","onDeleteClick","removeEvent","slotId","format","toUpperCase","_window$calendar$chec3","_window$calendar$chec4","_step6","_iterator6","anotherNewEvent","newStart","_window$calendar$chec5","_window$calendar$chec6","_step7","_iterator7","newEnd","_window$calendar$chec7","_window$calendar$chec8","_step8","_iterator8","moveEvent","_window$calendar$chec9","_window$calendar$chec10","_step9","_iterator9","conflictOccurred","action","SchedulerData","ViewTypes","Day","checkConflict","recurringEventsEnabled","scrollToSpecialMomentEnabled","crossResourceMove","getScrollSpecialMomentFunc","isNonWorkingTimeFunc","setResources","setEvents","key","assertThisInitialized","lib_default","eventItemClick","compare","b","comparison","RemoteControlDashboard","books","fetchData","data","sort","owned_devices","entry","updateBook","src_RemoteControlList","float","RemoteControlList","src_RemoteControlEditableItem","device_state","marginBottom","src_RemoteToggleButton","defaultChecked","margin","RemoteControlEditableItem","handleUpdate","src_RemoteControlItem","onFormSubmit","RemoteControlItem","updateRemoteAchievements","presence_data","presence","first_remote","_this7","daily_remote","_this8","handleFormSubmit","objectSpread2","onConfirm1","to_be_confirmed","Main","onConfirm2","onCancel1","to_be_cancelled","onCancel2","onChange","preventDefault","src_ConfirmAlert","remote_control_outer_ring","remote_control_image","textAlign","src","alt","data-yes","data-no","RemoteToggleButton","_this9","_super5","master","Small","Name","src_RemoteControlDashboard","PresenceControlDashboard","_this10","_super6","presencecontrol","_this11","src_PresenceControlList","PresenceControlList","_this12","src_PresenceControlEditableItem","presence_setting","PresenceControlEditableItem","_this13","_this14","src_PresenceControlItem","PresenceControlItem","_this15","updatePresenceAchievements","_this16","daily_presence","_this17","first_presence","handleSettingUpdate","evt","src_PresenceControlPopup","handleOtherUpdate","handleEnterClick","cancelButtonClicked","keyCode","handlePresenceIconClick","display_value","display_text","presence_control_outer_ring","presence_control_image","exitClick","height","overflowY","position","label","PresenceControlPopup","_this18","onKeyUp","placeholder","sort_events","src_PresenceControlDashboard","ScheduleControlDashboard","dates","chosen_day","_this19","events_datas","eventId","finalStart","finalEnd","_getDates","_getDates2","charAt","createNewBook","deleteBook","bookId","filter","chooseMonday","src_Calendar","chooseTuesday","chooseWednesday","chooseThursday","chooseFriday","chooseSaturday","chooseSunday","_this20","_getDates3","_getDates4","wanted_id","src_ScheduleControlItem","ScheduleControlItem","today_date","src_ScheduleControlDashboard","remotecontrolelement","infoiconremote","scheduleelement","infoiconschedule","presenceelement","infoiconpresence","onload","remotecontrolelemRect","getBoundingClientRect","infoiconremoteRect","offsetremote","right","onmouseover","onmouseout","scheduleelemRect","infoiconscheduleRect","offsetschedule","presenceelemRect","infoiconpresenceRect","offsetpresence","addEventListener","isChromium","chrome","winNav","navigator","vendorName","vendor","isOpera","opr","isIEedge","userAgent","match","onkeydown","ctrlKey","which"],"mappings":"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","file":"static/js/main.0ddc5f68.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faExclamationTriangle} from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass ConfirmAlert extends Component {\r\n    state = {\r\n        message: this.props.message,\r\n        onConfirm: this.props.onConfirm,\r\n        onCancel: this.props.onCancel\r\n    }\r\n    render() {\r\n        return (\r\n            <div class=\"confirm_alert_overlay\">\r\n                <div class=\"confirm_alert_popup\">\r\n                    <div class=\"confirm_alert_content\">\r\n                        <FontAwesomeIcon icon={faExclamationTriangle} class=\"confirm_alert_icon\"/>\r\n                        <br/>\r\n                        <br/>\r\n                        <p style={{color:\"black\"}}> {this.state.message} </p>\r\n                        <br/>\r\n                        <div class=\"confirm_alert_buttons\">\r\n                            <button class=\"confirm_alert_cancel\" onClick={this.state.onCancel}> Cancel </button>\r\n                            <button class=\"confirm_alert_confirm\" onClick={this.state.onConfirm}> Confirm </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ConfirmAlert;","// This is the component that wraps the calendar in a drag and drop context to allow dragging. \r\n\r\nimport { DragDropContext } from \"react-dnd\";\r\nimport HTML5Backend from \"react-dnd-html5-backend\";\r\n\r\nexport default DragDropContext(HTML5Backend);\r\n","import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faExclamationTriangle} from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass OnlyAlert extends Component {\r\n    state = {\r\n        message: this.props.message,\r\n        onOK: this.props.onOK\r\n    }\r\n    render() {\r\n        return (\r\n            <div class=\"confirm_alert_overlay\">\r\n                <div class=\"confirm_alert_popup\">\r\n                    <div class=\"confirm_alert_content\">\r\n                        <FontAwesomeIcon icon={faExclamationTriangle} class=\"confirm_alert_icon\"/>\r\n                        <br/>\r\n                        <br/>\r\n                        <p style={{color:\"black\"}}> {this.state.message} </p>\r\n                        <br/>\r\n                        <div class=\"confirm_alert_buttons\">\r\n                            <button class=\"alert_ok\" onClick={this.state.onOK}> OK </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default OnlyAlert;","import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faExclamationTriangle} from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass OnlyAlert extends Component {\r\n    state = {\r\n        message: this.props.message,\r\n        onOK: this.props.onOK\r\n    }\r\n    render() {\r\n        var array = this.state.message.split(\"<new>\");\r\n        const messages = array.map(word => (\r\n            <p style={{color:\"black\"}}> {word} </p>\r\n        ))\r\n\r\n        return (\r\n            <div class=\"confirm_alert_overlay\">\r\n                <div class=\"confirm_alert_popup\">\r\n                    <div class=\"confirm_alert_content\">\r\n                        <FontAwesomeIcon icon={faExclamationTriangle} class=\"confirm_alert_icon\"/>\r\n                        <br/>\r\n                        <br/>\r\n                        {messages}\r\n                        <br/>\r\n                        <div class=\"confirm_alert_buttons\">\r\n                            <button class=\"alert_ok\" onClick={this.state.onOK}> OK </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default OnlyAlert;","import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faClock } from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nclass ScheduleControlPopup extends Component {\r\n\r\n    componentDidMount() {\r\n        // Automatically select day\r\n        if (this.props.event_rrule.includes(\"MO,TU,WE,TH,FR,SA,SU\")) {\r\n            document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"MO\")) {\r\n            if (this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length) < \"08:00:00\" && this.props.type !== \"new\") {\r\n                document.getElementById(\"ScheduleRepeatTuesday\").checked = true;\r\n            } else {\r\n                // Automatically select Monday\r\n                document.getElementById(\"ScheduleRepeatMonday\").checked = true;\r\n            }\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"TU\")) {\r\n            if (this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length) < \"08:00:00\" && this.props.type !== \"new\") {\r\n                document.getElementById(\"ScheduleRepeatWednesday\").checked = true;\r\n            } else {\r\n                // Automatically select Tuesday\r\n                document.getElementById(\"ScheduleRepeatTuesday\").checked = true;\r\n            }\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"WE\")) {\r\n            if (this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length) < \"08:00:00\" && this.props.type !== \"new\") {\r\n                document.getElementById(\"ScheduleRepeatThursday\").checked = true;\r\n            } else {\r\n                // Automatically select Wednesday\r\n                document.getElementById(\"ScheduleRepeatWednesday\").checked = true;\r\n            }\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"TH\")) {\r\n            if (this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length) < \"08:00:00\" && this.props.type !== \"new\") {\r\n                document.getElementById(\"ScheduleRepeatFriday\").checked = true;\r\n            } else {\r\n                // Automatically select Thursday\r\n                document.getElementById(\"ScheduleRepeatThursday\").checked = true;\r\n            }\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"FR\")) {\r\n            if (this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length) < \"08:00:00\" && this.props.type !== \"new\") {\r\n                document.getElementById(\"ScheduleRepeatSaturday\").checked = true;\r\n            } else {\r\n                // Automatically select Friday\r\n                document.getElementById(\"ScheduleRepeatFriday\").checked = true;\r\n            }\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"SA\")) {\r\n            if (this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length) < \"08:00:00\" && this.props.type !== \"new\") {\r\n                document.getElementById(\"ScheduleRepeatSunday\").checked = true;\r\n            } else {\r\n                // Automatically select Saturday\r\n                document.getElementById(\"ScheduleRepeatSaturday\").checked = true;\r\n            }\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"SU\")) {\r\n            if (this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length) < \"08:00:00\" && this.props.type !== \"new\") {\r\n                document.getElementById(\"ScheduleRepeatMonday\").checked = true;\r\n            } else {\r\n                // Automatically select Sunday\r\n                document.getElementById(\"ScheduleRepeatSunday\").checked = true;\r\n            }\r\n        }\r\n\r\n        // Automatically select plug load\r\n        if (this.props.device_type.includes(\"Desktop\")) {\r\n            // Automatically select Desktop\r\n            document.getElementById(\"ScheduleApplyDesktop\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Monitor\")) {\r\n            // Automatically select Monitor\r\n            document.getElementById(\"ScheduleApplyMonitor\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Laptop\")) {\r\n            // Automatically select Laptop\r\n            document.getElementById(\"ScheduleApplyLaptop\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Task Lamp\")) {\r\n            // Automatically select Task Lamp\r\n            document.getElementById(\"ScheduleApplyTaskLamp\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Fan\")) {\r\n            // Automatically select Fan\r\n            document.getElementById(\"ScheduleApplyFan\").checked = true;\r\n        }\r\n\r\n        // Disable the unowned devices\r\n        if (!window.remote.state.devices.includes(\"Desktop\")) {\r\n            document.getElementById(\"ScheduleApplyDesktop\").checked = false;\r\n            document.getElementById(\"ScheduleApplyDesktop\").disabled = true;\r\n        }\r\n        if (!window.remote.state.devices.includes(\"Monitor\")) {\r\n            document.getElementById(\"ScheduleApplyMonitor\").checked = false;\r\n            document.getElementById(\"ScheduleApplyMonitor\").disabled = true;\r\n        }\r\n        if (!window.remote.state.devices.includes(\"Laptop\")) {\r\n            document.getElementById(\"ScheduleApplyLaptop\").checked = false;\r\n            document.getElementById(\"ScheduleApplyLaptop\").disabled = true;\r\n        }\r\n        if (!window.remote.state.devices.includes(\"Task Lamp\")) {\r\n            document.getElementById(\"ScheduleApplyTaskLamp\").checked = false;\r\n            document.getElementById(\"ScheduleApplyTaskLamp\").disabled = true;\r\n        }\r\n        if (!window.remote.state.devices.includes(\"Fan\")) {\r\n            document.getElementById(\"ScheduleApplyFan\").checked = false;\r\n            document.getElementById(\"ScheduleApplyFan\").disabled = true;\r\n        }\r\n    }\r\n\r\n    exitPopup = (e) => {\r\n        if (e.target === document.getElementById(\"schedule_popup_overlay\")) {\r\n            this.props.closeButtonClicked();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div id=\"schedule_popup_overlay\" onClick={this.exitPopup}>\r\n                    <div id=\"schedule_popup\">\r\n                        <p id=\"schedule_device_type\"> {this.props.device_type} </p>\r\n                        <button id=\"schedule_popup_close\" onClick={this.props.closeButtonClicked}> &times; </button>\r\n                        <br/>\r\n                        <input id=\"schedule_name_input\" defaultValue={this.props.event_name.substring(0,this.props.event_name.length-22)} type=\"text\" />\r\n                        <div id=\"schedule_time_input\">\r\n                            <FontAwesomeIcon icon={faClock} style={{color:\"#4E73DF\"}} />\r\n                            <ScheduleControlTimepicker type=\"Start\" time={this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length)} />\r\n                            <p style={{display: \"inline-block\", marginRight:\"-5px\", marginLeft:\"5px\"}}> - </p>\r\n                            <ScheduleControlTimepicker type=\"End\" time={this.props.event_end.substring(this.props.event_end.length-8, this.props.event_end.length)} />\r\n                        </div>\r\n                        <div id=\"schedule_repeat_input\">\r\n                            <ScheduleControlRepeat />\r\n                        </div>\r\n                        <div id=\"schedule_apply_input\">\r\n                            <p style={{fontWeight:\"bold\", color:\"black\"}}> Also apply to: </p>\r\n                            <ScheduleControlApply devices={[\"Desktop\", \"Monitor\", \"Laptop\", \"Fan\", \"Task Lamp\"]} />\r\n                        </div>\r\n                        <br/>\r\n                        <button id=\"schedule_popup_ok\" onClick={this.props.okButtonClicked} className=\"btn btn-sm\"> OK </button>\r\n                        <button id=\"schedule_popup_delete\" onClick={this.props.deleteButtonClicked} className=\"btn btn-sm\"> Delete </button>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlTimepicker extends Component {\r\n    render() {\r\n        var hour = this.props.time.substring(0,2);\r\n        if (Number(hour) >= 12) {\r\n            var am_pm = \"PM\"\r\n        } else {\r\n            am_pm = \"AM\"\r\n        }\r\n        if (Number(hour) > 12 && Number(hour) < 22) {\r\n            hour = \"0\" + (Number(hour)-12).toString();\r\n        } else {\r\n            if (Number(hour) >= 22) {\r\n                hour = (Number(hour)-12).toString();\r\n            } else {\r\n                if (hour === \"00\") {\r\n                    hour = \"12\"\r\n                }\r\n            }\r\n        }\r\n        var minute = this.props.time.substring(3,5);\r\n\r\n\r\n\r\n        return (\r\n            <div id={this.props.type + \"Time\"}>\r\n                <select id={this.props.type + \"Hour\"} defaultValue={hour}>\r\n                    <option value=\"01\"> 1 </option>\r\n                    <option value=\"02\"> 2 </option>\r\n                    <option value=\"03\"> 3 </option>\r\n                    <option value=\"04\"> 4 </option>\r\n                    <option value=\"05\"> 5 </option>\r\n                    <option value=\"06\"> 6 </option>\r\n                    <option value=\"07\"> 7 </option>\r\n                    <option value=\"08\"> 8 </option>\r\n                    <option value=\"09\"> 9 </option>\r\n                    <option value=\"10\"> 10 </option>\r\n                    <option value=\"11\"> 11 </option>\r\n                    <option value=\"12\"> 12 </option>\r\n                </select>\r\n                <span style={{marginLeft:\"-10px\", marginRight:\"1px\"}}> : </span>\r\n                <select id={this.props.type + \"Minute\"} defaultValue={minute}>\r\n                    <option value=\"00\"> 00 </option>\r\n                    <option value=\"15\"> 15 </option>\r\n                    <option value=\"30\"> 30 </option>\r\n                    <option value=\"45\"> 45 </option>\r\n                </select>\r\n                <select id={this.props.type + \"AMPM\"} defaultValue={am_pm}>\r\n                    <option value=\"AM\"> AM </option>\r\n                    <option value=\"PM\"> PM </option>\r\n                </select>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlRepeat extends Component {\r\n    render() {\r\n        return (\r\n            <>\r\n                <p style={{fontWeight:\"bold\", color:\"black\"}}> Repeat: </p>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id=\"ScheduleRepeatEveryDay\"\r\n                    value=\"Every Day\"\r\n                    onClick={function(e) {\r\n                        if (e.target.checked) {\r\n                            document.getElementById(\"ScheduleRepeatMonday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatTuesday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatWednesday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatThursday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatFriday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatSaturday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatSunday\").checked = true;\r\n                        } else {\r\n                            document.getElementById(\"ScheduleRepeatMonday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatTuesday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatWednesday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatThursday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatFriday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatSaturday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatSunday\").checked = false;\r\n                        }\r\n                    }}\r\n                />\r\n                <label htmlFor=\"ScheduleRepeatEveryDay\" style={{marginLeft: \"10px\", color:\"black\"}}> Every Day </label>\r\n                <br />\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Monday\"\r\n                        id=\"ScheduleRepeatMonday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatTuesday\").checked && document.getElementById(\"ScheduleRepeatWednesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatThursday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"10px\", color:\"black\"}}> Monday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Tuesday\"\r\n                        id=\"ScheduleRepeatTuesday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatWednesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatThursday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"10px\", color:\"black\"}}> Tuesday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Wednesday\"\r\n                        id=\"ScheduleRepeatWednesday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatThursday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"10px\", color:\"black\"}}> Wednesday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Thursday\"\r\n                        id=\"ScheduleRepeatThursday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"10px\", color:\"black\"}}> Thursday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Friday\"\r\n                        id=\"ScheduleRepeatFriday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatThursday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"10px\", color:\"black\"}}> Friday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Saturday\"\r\n                        id=\"ScheduleRepeatSaturday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatThursday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatFriday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"10px\", color:\"black\"}}> Saturday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Sunday\"\r\n                        id=\"ScheduleRepeatSunday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatThursday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatFriday\").checked && document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label style={{marginLeft: \"10px\", color:\"black\"}}> Sunday </label>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlApply extends Component {\r\n    render() {\r\n        const devices = this.props.devices.map(device =>\r\n            <ScheduleControlApplyItem device_type={device} />\r\n        )\r\n        return(\r\n            <>\r\n                {devices}\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlApplyItem extends Component {\r\n    render() {\r\n        return (\r\n            <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name=\"ScheduleApplyOption\"\r\n                    id={\"ScheduleApply\" + this.props.device_type.replace(/\\s/g,'')}\r\n                />\r\n                <label style={{marginLeft: \"10px\", color:\"black\"}}> {this.props.device_type} </label>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default ScheduleControlPopup;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport moment from 'moment';\r\nimport Scheduler, { SchedulerData, ViewTypes } from 'react-big-scheduler';\r\nimport 'react-big-scheduler/lib/css/style.css';\r\nimport withDragDropContext from './withDnDContext';\r\nimport OnlyAlert from './OnlyAlert';\r\nimport ConflictAlert from './ConflictAlert';\r\nimport ScheduleControlPopup from './ScheduleControlPopup';\r\nimport './index.css';\r\n\r\nfunction getCookie(name) {\r\n    let cookieValue = null;\r\n    if (document.cookie && document.cookie !== '') {\r\n        const cookies = document.cookie.split(';');\r\n        for (let i = 0; i < cookies.length; i++) {\r\n            const cookie = cookies[i].trim();\r\n            if (cookie.substring(0, name.length+1) === (name + '=')) {\r\n                cookieValue = decodeURIComponent(cookie.substring(name.length+1));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue\r\n}\r\n\r\nfunction from24to12(hour) {\r\n    var new_hour = Number(hour.substring(0,2));\r\n    var am_or_pm = new_hour >= 12 ? \"PM\" : \"AM\";\r\n    new_hour = (new_hour % 12) || 12;\r\n    var finalTime = new_hour + \":\" + hour.substring(3,5) + \" \" + am_or_pm;\r\n\r\n    if (finalTime.length !== 8) {\r\n        finalTime = \"0\" + finalTime\r\n    }\r\n    return (finalTime);\r\n}\r\n\r\nfunction from12to24(hour) {\r\n    var new_hour = Number(hour.substring(0,2))\r\n    if (hour.substring(6,8) === \"PM\" && new_hour !== 12) {\r\n        new_hour = new_hour + 12;\r\n    }\r\n    if (hour.substring(6,8) === \"AM\" && new_hour === 12) {\r\n        new_hour = \"00\"\r\n    }\r\n    var finalTime = new_hour + \":\" + hour.substring(3,5) + \":00\"\r\n    if (finalTime.length !== 8) {\r\n        finalTime = \"0\" + finalTime\r\n    }\r\n    return(finalTime)\r\n}\r\n\r\nfunction formatForDatabaseAdd(book, current_user_id) {\r\n    var event_rrule = \"\"\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"MO\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"MondayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Monday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TU\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"TuesdayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Tuesday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"WE\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"WednesdayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Wednesday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TH\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"ThursdayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Thursday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"FR\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"FridayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Friday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SA\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"SaturdayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Saturday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SU\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"SundayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Sunday, \"\r\n        }\r\n    }\r\n\r\n\r\n    const devices = [\"Desktop\", \"Laptop\", \"Monitor\", \"Task Lamp\", \"Fan\"]\r\n\r\n    return({\r\n        user_id: Number(current_user_id),\r\n        event_id: book.id,\r\n        event_start: book.start.substring(book.start.length-8, book.start.length),\r\n        event_end: book.end.substring(book.end.length-8, book.end.length),\r\n        event_name: book.title.substring(0, book.title.length-22),\r\n        event_rrule: event_rrule.substring(0,event_rrule.length-2),\r\n        device_type_id: book.resourceId,\r\n        device_type: devices[book.resourceId - 1]\r\n    })\r\n}\r\n\r\nfunction formatForDatabaseUpdate(book, current_user_id) {\r\n    var event_rrule = \"\"\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"MO\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"MondayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Monday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TU\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"TuesdayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Tuesday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"WE\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"WednesdayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Wednesday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TH\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"ThursdayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Thursday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"FR\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"FridayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Friday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SA\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"SaturdayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Saturday, \"\r\n        }\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SU\")) {\r\n        if (book.start.substring(book.start.length-8, book.start.length) < \"08:00:00\") {\r\n            event_rrule = event_rrule + \"SundayMorning, \"\r\n        } else {\r\n            event_rrule = event_rrule + \"Sunday, \"\r\n        }\r\n    }\r\n\r\n    const devices = [\"Desktop\", \"Laptop\", \"Monitor\", \"Task Lamp\", \"Fan\"]\r\n\r\n    if (typeof book.id === \"string\") {\r\n        var n = book.id.indexOf(\"-\")\r\n        var event_id = Number(book.id.substring(0,n))\r\n    } else {\r\n        event_id = book.id\r\n    }\r\n    return({\r\n        user_id: Number(current_user_id),\r\n        event_id: event_id,\r\n        event_start: book.start.substring(book.start.length-8, book.start.length),\r\n        event_end: book.end.substring(book.end.length-8, book.end.length),\r\n        event_name: book.title.substring(0, book.title.length-22),\r\n        event_rrule: event_rrule.substring(0,event_rrule.length-2),\r\n        device_type_id: book.resourceId,\r\n        device_type: devices[book.resourceId - 1],\r\n        id: book.database_id\r\n    })\r\n}\r\n\r\nfunction processHourInput(type) {\r\n    var hour = document.getElementById(type + \"Hour\").value;\r\n    if (document.getElementById(type + \"AMPM\").value === \"PM\") {\r\n        if (document.getElementById(type + \"Hour\").value !== \"12\") {\r\n            hour = (Number(document.getElementById(type + \"Hour\").value) + 12).toString();\r\n        }\r\n    } else {\r\n        if (document.getElementById(type + \"Hour\").value === \"12\") {\r\n            hour = \"00\";\r\n        }\r\n    }\r\n    return(hour)\r\n}\r\n\r\nfunction getDates() {\r\n    var today = new Date();\r\n    var mondayDate = new Date();\r\n    var tuesdayDate = new Date();\r\n    var wednesdayDate = new Date();\r\n    var thursdayDate = new Date();\r\n    var fridayDate = new Date();\r\n    var saturdayDate = new Date();\r\n    var sundayDate = new Date();\r\n    var startDate = new Date();\r\n\r\n    if (today.getDay() === 0) {\r\n        // Today is Sunday\r\n        startDate.setDate(today.getDate() - 7)\r\n        mondayDate.setDate(today.getDate() - 6);\r\n        tuesdayDate.setDate(today.getDate() - 5);\r\n        wednesdayDate.setDate(today.getDate() - 4);\r\n        thursdayDate.setDate(today.getDate() - 3);\r\n        fridayDate.setDate(today.getDate() - 2);\r\n        saturdayDate.setDate(today.getDate() - 1);\r\n        sundayDate.setDate(today.getDate());\r\n    } else {\r\n        startDate.setDate(today.getDate() + (0 - today.getDay()))\r\n        mondayDate.setDate(today.getDate() + (1 - today.getDay()));\r\n        tuesdayDate.setDate(today.getDate() + (2 - today.getDay()));\r\n        wednesdayDate.setDate(today.getDate() + (3 - today.getDay()));\r\n        thursdayDate.setDate(today.getDate() + (4 - today.getDay()));\r\n        fridayDate.setDate(today.getDate() + (5 - today.getDay()));\r\n        saturdayDate.setDate(today.getDate() + (6 - today.getDay()));\r\n        sundayDate.setDate(today.getDate() + (7 - today.getDay()));\r\n    }\r\n\r\n    startDate = startDate.getFullYear() + \"-\" + ((startDate.getMonth() + 1).toString().length === 1 ? \"0\" + (startDate.getMonth() + 1).toString() : (startDate.getMonth() + 1)) + \"-\" + (startDate.getDate().toString().length === 1 ? \"0\" + startDate.getDate().toString() : startDate.getDate())\r\n    mondayDate = mondayDate.getFullYear() + \"-\" + ((mondayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (mondayDate.getMonth() + 1).toString() : (mondayDate.getMonth() + 1)) + \"-\" + (mondayDate.getDate().toString().length === 1 ? \"0\" + mondayDate.getDate().toString() : mondayDate.getDate())\r\n    tuesdayDate = tuesdayDate.getFullYear() + \"-\" + ((tuesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (tuesdayDate.getMonth() + 1).toString() : (tuesdayDate.getMonth() + 1)) + \"-\" + (tuesdayDate.getDate().toString().length === 1 ? \"0\" + tuesdayDate.getDate().toString() : tuesdayDate.getDate())\r\n    wednesdayDate = wednesdayDate.getFullYear() + \"-\" + ((wednesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (wednesdayDate.getMonth() + 1).toString() : (wednesdayDate.getMonth() + 1)) + \"-\" + (wednesdayDate.getDate().toString().length === 1 ? \"0\" + wednesdayDate.getDate().toString() : wednesdayDate.getDate())\r\n    thursdayDate = thursdayDate.getFullYear() + \"-\" + ((thursdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (thursdayDate.getMonth() + 1).toString() : (thursdayDate.getMonth() + 1))  + \"-\" + (thursdayDate.getDate().toString().length === 1 ? \"0\" + thursdayDate.getDate().toString() : thursdayDate.getDate())\r\n    fridayDate = fridayDate.getFullYear() + \"-\" + ((fridayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (fridayDate.getMonth() + 1).toString() : (fridayDate.getMonth() + 1)) + \"-\" + (fridayDate.getDate().toString().length === 1 ? \"0\" + fridayDate.getDate().toString() : fridayDate.getDate())\r\n    saturdayDate = saturdayDate.getFullYear() + \"-\" + ((saturdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (saturdayDate.getMonth() + 1).toString() : (saturdayDate.getMonth() + 1)) + \"-\" + (saturdayDate.getDate().toString().length === 1 ? \"0\" + saturdayDate.getDate().toString() : saturdayDate.getDate())\r\n    sundayDate = sundayDate.getFullYear() + \"-\" + ((sundayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (sundayDate.getMonth() + 1).toString() : (sundayDate.getMonth() + 1)) + \"-\" + (sundayDate.getDate().toString().length === 1 ? \"0\" + sundayDate.getDate().toString() : sundayDate.getDate())\r\n\r\n    return([mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate, startDate])\r\n}\r\n\r\nclass Calendar extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let schedulerData = new SchedulerData(\r\n            this.props.date,\r\n            ViewTypes.Day,\r\n            false,\r\n            false,\r\n            {\r\n                checkConflict: true,\r\n                recurringEventsEnabled: true,\r\n                scrollToSpecialMomentEnabled: true,\r\n                crossResourceMove: false\r\n            }, {\r\n                getScrollSpecialMomentFunc: this.getScrollSpecialMoment,\r\n                isNonWorkingTimeFunc: this.isNonWorkingTime\r\n            }\r\n        );\r\n        schedulerData.setResources(this.props.devices);\r\n        schedulerData.setEvents(this.props.events);\r\n\r\n        this.state = {\r\n            viewModel: schedulerData,\r\n            achievements_books: [],\r\n            weekly_achievements_books: [],\r\n            points_wallet_books: [],\r\n            daily_achievements_books: [],\r\n            key: 1\r\n        };\r\n        window.calendar = this;\r\n    }\r\n\r\n    render() {\r\n        const { viewModel } = this.state;\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Scheduler\r\n                        key={this.state.key}\r\n                        schedulerData={viewModel}\r\n                        eventItemClick={this.eventClicked}\r\n                        updateEventStart={this.updateEventStart}\r\n                        updateEventEnd={this.updateEventEnd}\r\n                        moveEvent={this.moveEvent}\r\n                        newEvent={this.newEvent}\r\n                        conflictOccurred={this.conflictOccurred}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    updateAchievementsBooks = (newBook) => {\r\n        fetch('/control_interface/api/achievements_bonus/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updateWeeklyAchievementsBooks = (newBook) => {\r\n        fetch('/control_interface/api/achievements_weekly/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.weekly_achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({weekly_achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updateDailyAchievementsBooks = (newBook) => {\r\n        fetch('/control_interface/api/achievements_daily/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.daily_achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({daily_achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updatePointsWalletBooks = (newBook) => {\r\n        fetch('/control_interface/api/points_wallet/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.points_wallet_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({points_wallet_books: newBooks})\r\n        })\r\n    }\r\n\r\n    handleAchievementsUpdate = (book) => {\r\n        book.id = this.props.current_user_id;\r\n        this.updateAchievementsBooks(book);\r\n    }\r\n\r\n    handleWeeklyAchievementsUpdate = (book) => {\r\n        book.id = this.props.current_user_id;\r\n        this.updateWeeklyAchievementsBooks(book);\r\n    }\r\n\r\n    handleDailyAchievementsUpdate = (book) => {\r\n        this.updateDailyAchievementsBooks(book);\r\n    }\r\n\r\n    handlePointsWalletUpdate = (book) => {\r\n        book.id = this.props.current_user_id;\r\n        this.updatePointsWalletBooks(book);\r\n    }\r\n\r\n    updateScheduleAchievements = () => {\r\n        fetch('/control_interface/api/achievements_bonus/')\r\n        .then(response => response.json())\r\n        .then(bonus_data => {\r\n            this.setState({achievements_books: bonus_data}, function() {\r\n                if (bonus_data[0].first_schedule === 0) {\r\n                    // First schedule achievement completed\r\n                    bonus_data[0].first_schedule = 70\r\n                    this.handleAchievementsUpdate(bonus_data[0])\r\n\r\n                    fetch('/control_interface/api/points_wallet/')\r\n                    .then(response => response.json())\r\n                    .then(points_data => {\r\n                        this.setState({points_wallet_books: points_data}, function() {\r\n                            points_data[0].points = points_data[0].points + 70\r\n                            this.handlePointsWalletUpdate(points_data[0])\r\n                        })\r\n                    })\r\n\r\n                    // Add achievement to user log\r\n                    var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                    const csrftoken = getCookie('csrftoken');\r\n                    fetch('/control_interface/api/user_log/', {\r\n                        method: 'POST',\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            'X-CSRFToken': csrftoken\r\n                        },\r\n                        body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"first_schedule\"})\r\n                    })\r\n\r\n                    // Send notification\r\n                    fetch('/control_interface/api/notifications/')\r\n                    .then(response => response.json())\r\n                    .then(notifications_data => {\r\n                        var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                        var current_user = notifications_data[0].user_id;\r\n\r\n                        // Get the timestamp\r\n                        var today = new Date();\r\n                        const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                        var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                        notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have earned 70 points for using schedule-based control for the first time.\", type: \"success\"})\r\n                        fetch('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                            method: 'PUT',\r\n                            headers: {\r\n                                'Content-Type': 'application/json'\r\n                            },\r\n                            body: JSON.stringify(notifications_data[0])\r\n                        })\r\n\r\n                        // Update number on bell\r\n                        document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 1)\r\n\r\n                        // Update notifications in list\r\n                        document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have earned 70 points for using schedule-based control for the first time. </span> </div> </a>`)\r\n\r\n                        // Animate the bell\r\n                        document.getElementById(\"bell_icon\").style.animationIterationCount = \"infinite\";\r\n                    })\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    updateDailyScheduleAchievements = () => {\r\n        fetch('/control_interface/api/achievements_daily')\r\n        .then(response => response.json())\r\n        .then(daily_data => {\r\n            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n            this.setState({daily_achievements_books: daily_data}, function() {\r\n                for (var input of daily_data) {\r\n                    if (input.week_day === days[(new Date()).getDay()]) {\r\n                        if (input.daily_schedule === 0) {\r\n                            // Daily schedule achievement completed\r\n                            input.daily_schedule = 5;\r\n                            this.handleDailyAchievementsUpdate(input);\r\n\r\n                            // Add points to wallet\r\n                            fetch('/control_interface/api/points_wallet/')\r\n                            .then(response => response.json())\r\n                            .then(points_data => {\r\n                                this.setState({points_wallet_books: points_data}, function() {\r\n                                    points_data[0].points = points_data[0].points + 5;\r\n                                    this.handlePointsWalletUpdate(points_data[0]);\r\n                                })\r\n                            })\r\n\r\n                            // Add achievement to user log\r\n                            var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                            const csrftoken = getCookie('csrftoken');\r\n                            fetch('/control_interface/api/user_log/', {\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    'Content-Type': 'application/json',\r\n                                    'X-CSRFToken': csrftoken\r\n                                },\r\n                                body: JSON.stringify({user_id: input.user_id, type: \"achievement\", unix_time: now_unix_time, description: \"daily_schedule\"})\r\n                            })\r\n\r\n                            // Send notification\r\n                            fetch('/control_interface/api/notifications/')\r\n                            .then(response => response.json())\r\n                            .then(notifications_data => {\r\n                                var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                                var current_user = notifications_data[0].user_id;\r\n\r\n                                // Update notifications table in database\r\n                                var today = new Date();\r\n                                const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                                var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                                notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 5 points for using schedule-based control for your devices today.\"});\r\n                                fetch('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                                    method: 'PUT',\r\n                                    headers: {\r\n                                        'Content-Type': 'application/json'\r\n                                    },\r\n                                    body: JSON.stringify(notifications_data[0])\r\n                                })\r\n\r\n                                // Update number on bell\r\n                                document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 1);\r\n\r\n                                // Update notifications in list\r\n                                document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 5 points for using schedule-based control for your devices today. </span> </div> </a>`)\r\n\r\n                                // Animate the bell\r\n                                document.getElementById(\"bell_icon\").style.animationIterationCount = \"infinite\";\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    updateScheduleAchievements = (type) => {\r\n        if (type === \"add\") {\r\n            // Check for daily and bonus achievements\r\n            fetch('/control_interface/api/achievements_daily/')\r\n            .then(response => response.json())\r\n            .then(daily_data => {\r\n                const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n                this.setState({daily_achievements_books: daily_data}, function() {\r\n                    for (var input of daily_data) {\r\n                        if (input.week_day === days[(new Date()).getDay()]) {\r\n                            if (input.daily_schedule === 0) {\r\n                                // Daily schedule achievement completed\r\n                                input.daily_schedule = 5;\r\n                                this.handleDailyAchievementsUpdate(input);\r\n\r\n                                // Check for bonus achievements\r\n                                fetch('/control_interface/api/achievements_bonus/')\r\n                                .then(response => response.json())\r\n                                .then(bonus_data => {\r\n                                    this.setState({achievements_books: bonus_data}, function() {\r\n                                        if (bonus_data[0].first_schedule === 0) {\r\n                                            // First schedule achievement completed\r\n                                            bonus_data[0].first_schedule = 70;\r\n                                            this.handleAchievementsUpdate(bonus_data[0]);\r\n\r\n                                            // Update points on database (75)\r\n                                            fetch('/control_interface/api/points_wallet/')\r\n                                            .then(response => response.json())\r\n                                            .then(points_data => {\r\n                                                this.setState({points_wallet_books: points_data}, function() {\r\n                                                    points_data[0].points = points_data[0].points + 75;\r\n                                                    this.handlePointsWalletUpdate(points_data[0]);\r\n                                                })\r\n                                            })\r\n\r\n                                            // Add achievement to user log\r\n                                            var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                                            const csrftoken = getCookie('csrftoken');\r\n                                            // Bonus achievement\r\n                                            fetch('/control_interface/api/user_log/', {\r\n                                                method: 'POST',\r\n                                                headers: {\r\n                                                    'Content-Type': 'application/json',\r\n                                                    'X-CSRFToken': csrftoken\r\n                                                },\r\n                                                body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"first_schedule\"})\r\n                                            })\r\n                                            // Daily achievement\r\n                                            fetch('/control_interface/api/user_log/', {\r\n                                                method: 'POST',\r\n                                                headers: {\r\n                                                    'Content-Type': 'application/json',\r\n                                                    'X-CSRFToken': csrftoken\r\n                                                },\r\n                                                body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"daily_schedule\"})\r\n                                            })\r\n\r\n                                            // Send notification\r\n                                            fetch('/control_interface/api/notifications/')\r\n                                            .then(response => response.json())\r\n                                            .then(notifications_data => {\r\n                                                var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                                                var current_user = notifications_data[0].user_id;\r\n\r\n                                                // Get the timestamp\r\n                                                var today = new Date();\r\n                                                const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                                                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                                                var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                                                // Bonus achievement\r\n                                                notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 70 points for setting your first schedule-based setting.\", type: \"success\"})\r\n                                                // Daily achievement\r\n                                                notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 5 points for using schedule-based control for your devices today.\", type: \"success\"})\r\n                                                fetch('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                                                    method: 'PUT',\r\n                                                    headers: {\r\n                                                        'Content-Type': 'application/json'\r\n                                                    },\r\n                                                    body: JSON.stringify(notifications_data[0])\r\n                                                })\r\n\r\n                                                // Update number on bell\r\n                                                document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 1);\r\n\r\n                                                // Update notifications in list\r\n                                                // Bonus achievement\r\n                                                document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 70 points for setting your first schedule-based setting. </span> </div> </a>`)\r\n                                                // Daily achievement\r\n                                                document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 5 points for using schedule-based control for your devices today. </span> </div> </a>`)\r\n                                            })\r\n                                        } else {\r\n                                            // First schedule achievement previously completed\r\n\r\n                                            // Update points on database (5)\r\n                                            fetch('/control_interface/api/points_wallet/')\r\n                                            .then(response => response.json())\r\n                                            .then(points_data => {\r\n                                                this.setState({points_wallet_books: points_data}, function() {\r\n                                                    points_data[0].points = points_data[0].points + 5;\r\n                                                    this.handlePointsWalletUpdate(points_data[0]);\r\n                                                })\r\n                                            })\r\n\r\n                                            // Add achievement to user log\r\n                                            var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                                            const csrftoken = getCookie('csrftoken');\r\n                                            // Daily achievement\r\n                                            fetch('/control_interface/api/user_log/', {\r\n                                                method: 'POST',\r\n                                                headers: {\r\n                                                    'Content-Type': 'application/json',\r\n                                                    'X-CSRFToken': csrftoken\r\n                                                },\r\n                                                body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"daily_schedule\"})\r\n                                            })\r\n\r\n                                            // Send notification\r\n                                            fetch('/control_interface/api/notifications/')\r\n                                            .then(response => response.json())\r\n                                            .then(notifications_data => {\r\n                                                var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                                                var current_user = notifications_data[0].user_id;\r\n\r\n                                                // Get the timestamp\r\n                                                var today = new Date();\r\n                                                const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                                                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                                                var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                                                // Daily achievement\r\n                                                notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 5 points for using schedule-based control for your devices today.\", type: \"success\"})\r\n                                                fetch('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                                                    method: 'PUT',\r\n                                                    headers: {\r\n                                                        'Content-Type': 'application/json'\r\n                                                    },\r\n                                                    body: JSON.stringify(notifications_data[0])\r\n                                                })\r\n\r\n                                                // Update number on bell\r\n                                                document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 1);\r\n\r\n                                                // Update notifications in list\r\n                                                document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 5 points for using schedule-based control for your devices today. </span> </div> </a>`)\r\n                                            })\r\n                                        }\r\n                                    })\r\n                                })\r\n                            } else {\r\n                                // Daily schedule achievement previously completed\r\n\r\n                                // Check for bonus achievement\r\n                                fetch('/control_interface/api/achievements_bonus/')\r\n                                .then(response => response.json())\r\n                                .then(bonus_data => {\r\n                                    this.setState({achievements_books: bonus_data}, function() {\r\n                                        if (bonus_data[0].first_schedule === 0) {\r\n                                            // First schedule achievement completed\r\n                                            bonus_data[0].first_schedule = 70;\r\n                                            this.handleAchievementsUpdate(bonus_data[0]);\r\n\r\n                                            // Update points on database (70)\r\n                                            fetch('/control_interface/api/points_wallet/')\r\n                                            .then(response => response.json())\r\n                                            .then(points_data => {\r\n                                                this.setState({points_wallet_books: points_data}, function() {\r\n                                                    points_data[0].points = points_data[0].points + 70;\r\n                                                    this.handlePointsWalletUpdate(points_data[0]);\r\n                                                })\r\n                                            })\r\n\r\n                                            // Add achievement to user log\r\n                                            var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                                            const csrftoken = getCookie('csrftoken');\r\n                                            // Bonus achievement\r\n                                            fetch('/control_interface/api/user_log/', {\r\n                                                method: 'POST',\r\n                                                headers: {\r\n                                                    'Content-Type': 'application/json',\r\n                                                    'X-CSRFToken': csrftoken\r\n                                                },\r\n                                                body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"first_schedule\"})\r\n                                            })\r\n\r\n                                            // Send notification\r\n                                            fetch('/control_interface/api/notifications/')\r\n                                            .then(response => response.json())\r\n                                            .then(notifications_data => {\r\n                                                var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                                                var current_user = notifications_data[0].user_id;\r\n\r\n                                                // Get the timestamp\r\n                                                var today = new Date();\r\n                                                const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                                                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                                                var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                                                // Bonus achievement\r\n                                                notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 70 points for setting your first schedule-based setting.\", type: \"success\"})\r\n                                                fetch('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                                                    method: 'PUT',\r\n                                                    headers: {\r\n                                                        'Content-Type': 'application/json'\r\n                                                    },\r\n                                                    body: JSON.stringify(notifications_data[0])\r\n                                                })\r\n\r\n                                                // Update number on bell\r\n                                                document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 1);\r\n\r\n                                                // Update notifications in list\r\n                                                // Bonus achievement\r\n                                                document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 70 points for setting your first schedule-based setting. </span> </div> </a>`)\r\n                                            })\r\n                                        }\r\n                                    })\r\n                                })\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n        } else {\r\n            // Check for bonus achievement\r\n        }\r\n    }\r\n\r\n    checkConflicts = (schedulerData, event) => {\r\n        var hasConflict = false;\r\n        var conflictedEvents = [];\r\n        var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n        var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n        var new_days_to_loop_over = [];\r\n        var new_start = from12to24(document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" + document.getElementById(\"StartAMPM\").value);\r\n        var new_end = from12to24(document.getElementById(\"EndHour\").value + \":\" + document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value)\r\n        for (var repeat_day of repeat_option) {\r\n            if (new_start < \"08:00:00\") {\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatMonday\")) {\r\n                    new_days_to_loop_over.push(getDates()[7])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatTuesday\")) {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatWednesday\")) {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatThursday\")) {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatFriday\")) {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatSaturday\")) {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatSunday\")) {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n            } else {\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatMonday\")) {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatTuesday\")) {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatWednesday\")) {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatThursday\")) {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatFriday\")) {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatSaturday\")) {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day === document.getElementById(\"ScheduleRepeatSunday\")) {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n        }\r\n\r\n        var new_start_for_this = \"\";\r\n        var new_end_for_this = \"\";\r\n        var existing_start_for_this = \"\";\r\n        var existing_end_for_this = \"\";\r\n        if (typeof event.id === \"string\") {\r\n            var n = event.id.indexOf(\"-\")\r\n            var processed_event_id = Number(event.id.substring(0,n))\r\n        } else {\r\n            processed_event_id = event.id\r\n        }\r\n        for (var new_day of new_days_to_loop_over) {\r\n            new_start_for_this = new_day + \" \" + new_start;\r\n            new_end_for_this = new_day + \" \" + new_end;\r\n            for (var plugload of plugload_option) {\r\n                var current_resource_id = 0;\r\n                if (plugload === document.getElementById(\"ScheduleApplyDesktop\")) {\r\n                    current_resource_id = 1;\r\n                }\r\n                if (plugload === document.getElementById(\"ScheduleApplyLaptop\")) {\r\n                    current_resource_id = 2;\r\n                }\r\n                if (plugload === document.getElementById(\"ScheduleApplyMonitor\")) {\r\n                    current_resource_id = 3;\r\n                }\r\n                if (plugload === document.getElementById(\"ScheduleApplyTaskLamp\")) {\r\n                    current_resource_id = 4;\r\n                }\r\n                if (plugload === document.getElementById(\"ScheduleApplyFan\")) {\r\n                    current_resource_id = 5;\r\n                }\r\n                this.props.events.forEach(function(e) {\r\n                    if (e.resourceId === current_resource_id) {\r\n                        var existing_days_to_loop_over = [];\r\n                        if (e.start.substring(11,19) < \"08:00:00\") {\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"MO\")) {\r\n                                existing_days_to_loop_over.push(getDates()[7]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"TU\")) {\r\n                                existing_days_to_loop_over.push(getDates()[0]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"WE\")) {\r\n                                existing_days_to_loop_over.push(getDates()[1]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"TH\")) {\r\n                                existing_days_to_loop_over.push(getDates()[2]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"FR\")) {\r\n                                existing_days_to_loop_over.push(getDates()[3]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"SA\")) {\r\n                                existing_days_to_loop_over.push(getDates()[4]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"SU\")) {\r\n                                existing_days_to_loop_over.push(getDates()[5]);\r\n                            }\r\n                        } else {\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"MO\")) {\r\n                                existing_days_to_loop_over.push(getDates()[0]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"TU\")) {\r\n                                existing_days_to_loop_over.push(getDates()[1]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"WE\")) {\r\n                                existing_days_to_loop_over.push(getDates()[2]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"TH\")) {\r\n                                existing_days_to_loop_over.push(getDates()[3]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"FR\")) {\r\n                                existing_days_to_loop_over.push(getDates()[4]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"SA\")) {\r\n                                existing_days_to_loop_over.push(getDates()[5]);\r\n                            }\r\n                            if (e.rrule.substring(60, e.rrule.length).includes(\"SU\")) {\r\n                                existing_days_to_loop_over.push(getDates()[6]);\r\n                            }\r\n                        }\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + e.start.substring(10,19);\r\n                            existing_end_for_this = existing_day + e.end.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this &&\r\n                                  new_start_for_this < existing_end_for_this) || (\r\n                                  new_end_for_this > existing_start_for_this &&\r\n                                  new_end_for_this <= existing_end_for_this) || (\r\n                                  existing_start_for_this >= new_start_for_this &&\r\n                                  existing_start_for_this < new_end_for_this) || (\r\n                                  existing_end_for_this > new_start_for_this &&\r\n                                  existing_end_for_this <= new_end_for_this)) && (\r\n                                  e.id !== processed_event_id)) {\r\n                                hasConflict = true;\r\n                                if (!conflictedEvents.includes(e)) {\r\n                                    conflictedEvents.push(e)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        return [hasConflict, conflictedEvents]\r\n    }\r\n\r\n    isNonWorkingTime = (schedulerData, time) => {\r\n        return true;\r\n    }\r\n\r\n    getScrollSpecialMoment = (schedulerData, startMoment, endMoment) => {\r\n        var time = this.props.date + \" 07:00:00\";\r\n        return moment(time);\r\n    }\r\n\r\n    eventClicked = (schedulerData, event) => {\r\n        var slotName = schedulerData.getSlotById(event.resourceId).name;\r\n\r\n        function closeButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function deleteButtonClicked() {\r\n            // Update database (Delete)\r\n            window.calendar.props.onDeleteClick(event.database_id)\r\n            window.calendar.props.refetchData();\r\n\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            });\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Checking for achievements\r\n            window.calendar.updateScheduleAchievements()\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            var check_start_time = \"2020-01-01 \" + from12to24(document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" + document.getElementById(\"StartAMPM\").value)\r\n            var check_end_time = from12to24(document.getElementById(\"EndHour\").value + \":\" + document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value)\r\n            if (check_end_time === \"00:00:00\") {\r\n                check_end_time = \"2020-01-02 \" + check_end_time\r\n            } else {\r\n                check_end_time = \"2020-01-01 \" + check_end_time\r\n            }\r\n            if (check_start_time >= check_end_time) {\r\n                ReactDOM.render(\r\n                    <OnlyAlert\r\n                        message=\"Check your timings! Start time should be before end time.\"\r\n                        onOK={function() {\r\n                            ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                        }}\r\n                    />, document.getElementById(\"confirm-alert\")\r\n                )\r\n            } else {\r\n                // Checking conflicts\r\n                var [hasConflict, conflictedEvents] = window.calendar.checkConflicts(schedulerData, event)\r\n\r\n                if (hasConflict) {\r\n                    var message = \"Conflict occurred for the following events:\"\r\n                    for (var events of conflictedEvents) {\r\n                        var day = \"\";\r\n                        if (events.start.substring(11,19) < \"08:00:00\") {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        } else {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        }\r\n                        var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                        message += `<new>- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-2)}`\r\n                    }\r\n                    ReactDOM.render(\r\n                        <ConflictAlert\r\n                            message={message}\r\n                            onOK={function() {\r\n                                ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                            }}\r\n                        />, document.getElementById(\"confirm-alert\")\r\n                    )\r\n                } else {\r\n                    // Rename\r\n                    event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                                  document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                                  document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                                  document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                    // Update start\r\n                    schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                    // Update end\r\n                    schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                    // Update repeat\r\n                    var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.startDate.substring(0,4) +\r\n                                      window.calendar.props.startDate.substring(5,7) +\r\n                                      window.calendar.props.startDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                      window.calendar.props.sundayDate.substring(0,4) +\r\n                                      window.calendar.props.sundayDate.substring(5,7) +\r\n                                      window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                    if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                        // Repeat Every Day\r\n                        event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                    } else {\r\n                        if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                            event_rrule = event_rrule + \"MO,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                            event_rrule = event_rrule + \"TU,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                            event_rrule = event_rrule + \"WE,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                            event_rrule = event_rrule + \"TH,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                            event_rrule = event_rrule + \"FR,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                            event_rrule = event_rrule + \"SA,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                            event_rrule = event_rrule + \"SU,\"\r\n                        }\r\n                        event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                    }\r\n\r\n                    // Apply to other devices\r\n                    document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n                    var newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                        newFreshId = newFreshId + 1;\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 1,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 3,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 2,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 4,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 5,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n\r\n                    // Update database (Update)\r\n                    window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n                    window.calendar.props.refetchData();\r\n\r\n\r\n                    ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                    // Checking for achievements\r\n                    window.calendar.updateScheduleAchievements()\r\n                    window.calendar.updateDailyScheduleAchievements()\r\n\r\n                    // Update calendar\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n\r\n                    window.calendar.props.refetchData();\r\n                    setTimeout(function() {document.getElementById(window.calendar.props.day + \"Calendar\").click()}, 3000)\r\n                }\r\n            }\r\n        }\r\n\r\n         ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                type=\"\"\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={event.start}\r\n                event_end={event.end}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    newEvent = (schedulerData, slotId, slotName, start, end, type, item) => {\r\n        let newFreshId = 0;\r\n        schedulerData.events.forEach(item => {\r\n            if (item.database_id >= newFreshId || item.id >= newFreshId) newFreshId = item.database_id + 1;\r\n        });\r\n\r\n        let newEvent = {\r\n            id: newFreshId,\r\n            title: \"(no name) (\" + moment(start).format(\"hh:mm A\") + \" - \" + moment(end).format(\"hh:mm A\") + \")\",\r\n            start: start,\r\n            end: end,\r\n            resourceId: slotId,\r\n            bgColor: \"#06D6A0\",\r\n            showPopover: false,\r\n            rrule: \"FREQ=WEEKLY;DTSTART=\" + this.props.startDate.substring(0,4) + this.props.startDate.substring(5,7) + this.props.startDate.substring(8,10) + \"T000000Z;UNTIL=\" + this.props.sundayDate.substring(0,4) + this.props.sundayDate.substring(5,7) + this.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\" + this.props.day.substring(0,2).toUpperCase()\r\n        }\r\n\r\n        schedulerData.addEvent(newEvent);\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            // Update database (Add)\r\n            window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id))\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Checking for achievements\r\n            window.calendar.updateScheduleAchievements()\r\n        }\r\n        function deleteButtonClicked() {\r\n            schedulerData.removeEvent(newEvent);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            var check_start_time = \"2020-01-01 \" + from12to24(document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" + document.getElementById(\"StartAMPM\").value)\r\n            var check_end_time = from12to24(document.getElementById(\"EndHour\").value + \":\" + document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value)\r\n            if (check_end_time === \"00:00:00\") {\r\n                check_end_time = \"2020-01-02 \" + check_end_time\r\n            } else {\r\n                check_end_time = \"2020-01-01 \" + check_end_time\r\n            }\r\n            if (check_start_time >= check_end_time) {\r\n                ReactDOM.render(\r\n                    <OnlyAlert\r\n                        message=\"Check your timings! Start time should be before end time.\"\r\n                        onOK={function() {\r\n                            ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                        }}\r\n                    />, document.getElementById(\"confirm-alert\")\r\n                )\r\n            } else {\r\n                // Checking conflicts\r\n                var [hasConflict, conflictedEvents] = window.calendar.checkConflicts(schedulerData, newEvent)\r\n\r\n                if (hasConflict) {\r\n                    var message = \"Conflict occurred for the following events:\"\r\n                    for (var events of conflictedEvents) {\r\n                        var day = \"\"\r\n                        if (events.start.substring(11,19) < \"08:00:00\") {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        } else {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        }\r\n                        var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                        message += `<new>- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-2)}`\r\n                    }\r\n                    ReactDOM.render(\r\n                        <ConflictAlert\r\n                            message={message}\r\n                            onOK={function() {\r\n                                ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                            }}\r\n                        />, document.getElementById(\"confirm-alert\")\r\n                    )\r\n                } else {\r\n                    // Rename\r\n                    newEvent.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                                     document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                                     document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                                     document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                    // Update start\r\n                    schedulerData.updateEventStart(newEvent, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                    // Update end\r\n                    schedulerData.updateEventEnd(newEvent, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                    // Update repeat\r\n                    var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.startDate.substring(0,4) +\r\n                                      window.calendar.props.startDate.substring(5,7) +\r\n                                      window.calendar.props.startDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                      window.calendar.props.sundayDate.substring(0,4) +\r\n                                      window.calendar.props.sundayDate.substring(5,7) +\r\n                                      window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                    if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                        // Repeat Every Day\r\n                        newEvent.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                    } else {\r\n                        if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                            event_rrule = event_rrule + \"MO,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                            event_rrule = event_rrule + \"TU,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                            event_rrule = event_rrule + \"WE,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                            event_rrule = event_rrule + \"TH,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                            event_rrule = event_rrule + \"FR,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                            event_rrule = event_rrule + \"SA,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                            event_rrule = event_rrule + \"SU,\"\r\n                        }\r\n                        newEvent.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                    }\r\n\r\n                    // Apply to other devices\r\n                    document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n\r\n                    if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                        newFreshId = newFreshId + 1;\r\n                        let anotherNewEvent = {\r\n                            id: newFreshId,\r\n                            title: newEvent.title,\r\n                            start: newEvent.start,\r\n                            end: newEvent.end,\r\n                            resourceId: 1,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: newEvent.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(anotherNewEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                        newFreshId = newFreshId + 1;\r\n                        let anotherNewEvent = {\r\n                            id: newFreshId,\r\n                            title: newEvent.title,\r\n                            start: newEvent.start,\r\n                            end: newEvent.end,\r\n                            resourceId: 3,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: newEvent.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(anotherNewEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let anotherNewEvent = {\r\n                            id: newFreshId,\r\n                            title: newEvent.title,\r\n                            start: newEvent.start,\r\n                            end: newEvent.end,\r\n                            resourceId: 2,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: newEvent.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(anotherNewEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let anotherNewEvent = {\r\n                            id: newFreshId,\r\n                            title: newEvent.title,\r\n                            start: newEvent.start,\r\n                            end: newEvent.end,\r\n                            resourceId: 4,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: newEvent.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(anotherNewEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let anotherNewEvent = {\r\n                            id: newFreshId,\r\n                            title: newEvent.title,\r\n                            start: newEvent.start,\r\n                            end: newEvent.end,\r\n                            resourceId: 5,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: newEvent.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(anotherNewEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n\r\n                    // Update database (Add)\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                    window.calendar.props.refetchData();\r\n\r\n                    ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                    // Checking for achievements\r\n                    window.calendar.updateScheduleAchievements()\r\n                    window.calendar.updateDailyScheduleAchievements()\r\n\r\n                    // Update calendar\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n\r\n                    window.calendar.props.refetchData();\r\n                    setTimeout(function() {document.getElementById(window.calendar.props.day + \"Calendar\").click()}, 3000)\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                type=\"new\"\r\n                device_type={\"Add Schedule: \" + slotName}\r\n                event_rrule={newEvent.rrule}\r\n                event_start={newEvent.start}\r\n                event_end={newEvent.end}\r\n                event_name={newEvent.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    updateEventStart = (schedulerData, event, newStart) => {\r\n        schedulerData.updateEventStart(event, newStart);\r\n        event.title = event.title.substring(0, event.title.length - 22) + \" (\" + from24to12(moment(newStart).format('HH:mm')) + \" - \" + from24to12(moment(event.end).format('HH:mm')) + \")\";\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            // Update database (Update)\r\n            window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Checking for achievements\r\n            window.calendar.updateScheduleAchievements()\r\n\r\n        }\r\n        function deleteButtonClicked() {\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n\r\n            // Update database\r\n            window.calendar.props.onDeleteClick(event.database_id);\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Checking for achievements\r\n            window.calendar.updateScheduleAchievements()\r\n\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            var check_start_time = \"2020-01-01 \" + from12to24(document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" + document.getElementById(\"StartAMPM\").value)\r\n            var check_end_time = from12to24(document.getElementById(\"EndHour\").value + \":\" + document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value)\r\n            if (check_end_time === \"00:00:00\") {\r\n                check_end_time = \"2020-01-02 \" + check_end_time\r\n            } else {\r\n                check_end_time = \"2020-01-01 \" + check_end_time\r\n            }\r\n            if (check_start_time >= check_end_time) {\r\n                ReactDOM.render(\r\n                    <OnlyAlert\r\n                        message=\"Check your timings! Start time should be before end time.\"\r\n                        onOK={function() {\r\n                            ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                        }}\r\n                    />, document.getElementById(\"confirm-alert\")\r\n                )\r\n            } else {\r\n                // Checking conflicts\r\n                var [hasConflict, conflictedEvents] = window.calendar.checkConflicts(schedulerData, event)\r\n\r\n                if (hasConflict) {\r\n                    var message = \"Conflict occurred for the following events:\"\r\n                    for (var events of conflictedEvents) {\r\n                        var day = \"\"\r\n                        if (events.start.substring(11,19) < \"08:00:00\") {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        } else {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        }\r\n                        var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                        message += `<new>- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-2)}`\r\n                    }\r\n                    ReactDOM.render(\r\n                        <ConflictAlert\r\n                            message={message}\r\n                            onOK={function() {\r\n                                ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                            }}\r\n                        />, document.getElementById(\"confirm-alert\")\r\n                    )\r\n                } else {\r\n                    // Rename\r\n                    event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                                  document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                                  document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                                  document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                    // Update start\r\n                    schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                    // Update end\r\n                    schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                    // Update repeat\r\n                    var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.startDate.substring(0,4) +\r\n                                      window.calendar.props.startDate.substring(5,7) +\r\n                                      window.calendar.props.startDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                      window.calendar.props.sundayDate.substring(0,4) +\r\n                                      window.calendar.props.sundayDate.substring(5,7) +\r\n                                      window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                    if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                        // Repeat Every Day\r\n                        event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                    } else {\r\n                        if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                            event_rrule = event_rrule + \"MO,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                            event_rrule = event_rrule + \"TU,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                            event_rrule = event_rrule + \"WE,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                            event_rrule = event_rrule + \"TH,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                            event_rrule = event_rrule + \"FR,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                            event_rrule = event_rrule + \"SA,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                            event_rrule = event_rrule + \"SU,\"\r\n                        }\r\n                        event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                    }\r\n\r\n                    // Apply to other devices\r\n                    document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n                    var newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n\r\n                    if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                        newFreshId = newFreshId + 1;\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 1,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 3,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 2,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 4,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 5,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n\r\n\r\n                    // Update database (Update)\r\n                    window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n                    window.calendar.props.refetchData();\r\n\r\n                    ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                    // Checking for achievements\r\n                    window.calendar.updateScheduleAchievements()\r\n                    window.calendar.updateDailyScheduleAchievements()\r\n\r\n                    // Update calendar\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n\r\n                    window.calendar.props.refetchData();\r\n                    setTimeout(function() {document.getElementById(window.calendar.props.day + \"Calendar\").click()}, 3000)\r\n                }\r\n            }\r\n        }\r\n\r\n        var slotName = schedulerData.getSlotById(event.resourceId).name;\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                type=\"\"\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={newStart}\r\n                event_end={event.end}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    updateEventEnd = (schedulerData, event, newEnd) => {\r\n        schedulerData.updateEventEnd(event, newEnd);\r\n        event.title = event.title.substring(0, event.title.length - 22) + \" (\" + from24to12(moment(event.start).format('HH:mm')) + \" - \" + from24to12(moment(newEnd).format('HH:mm')) + \")\";\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Update database (Update)\r\n            window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n            window.calendar.props.refetchData();\r\n\r\n            // Checking for achievements\r\n            window.calendar.updateScheduleAchievements()\r\n        }\r\n        function deleteButtonClicked() {\r\n            // Update database (Delete)\r\n            window.calendar.props.onDeleteClick(event.database_id)\r\n            window.calendar.props.refetchData();\r\n\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Checking for achievements\r\n            window.calendar.updateScheduleAchievements()\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            var check_start_time = \"2020-01-01 \" + from12to24(document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" + document.getElementById(\"StartAMPM\").value)\r\n            var check_end_time = from12to24(document.getElementById(\"EndHour\").value + \":\" + document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value)\r\n            if (check_end_time === \"00:00:00\") {\r\n                check_end_time = \"2020-01-02 \" + check_end_time\r\n            } else {\r\n                check_end_time = \"2020-01-01 \" + check_end_time\r\n            }\r\n            if (check_start_time >= check_end_time) {\r\n                ReactDOM.render(\r\n                    <OnlyAlert\r\n                        message=\"Check your timings! Start time should be before end time.\"\r\n                        onOK={function() {\r\n                            ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                        }}\r\n                    />, document.getElementById(\"confirm-alert\")\r\n                )\r\n            } else {\r\n                // Checking conflicts\r\n                var [hasConflict, conflictedEvents] = window.calendar.checkConflicts(schedulerData, event)\r\n\r\n                if (hasConflict) {\r\n                    var message = \"Conflict occurred for the following events:\"\r\n                    for (var events of conflictedEvents) {\r\n                        var day = \"\"\r\n                        if (events.start.substring(11,19) < \"08:00:00\") {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        } else {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        }\r\n                        var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                        message += `<new>- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-2)}`\r\n                    }\r\n                    ReactDOM.render(\r\n                        <ConflictAlert\r\n                            message={message}\r\n                            onOK={function() {\r\n                                ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                            }}\r\n                        />, document.getElementById(\"confirm-alert\")\r\n                    )\r\n                } else {\r\n                    // Rename\r\n                    event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                                  document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                                  document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                                  document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                    // Update start\r\n                    schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                    // Update end\r\n                    schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                    // Update repeat\r\n                    var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.startDate.substring(0,4) +\r\n                                      window.calendar.props.startDate.substring(5,7) +\r\n                                      window.calendar.props.startDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                      window.calendar.props.sundayDate.substring(0,4) +\r\n                                      window.calendar.props.sundayDate.substring(5,7) +\r\n                                      window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                    if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                        // Repeat Every Day\r\n                        event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                    } else {\r\n                        if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                            event_rrule = event_rrule + \"MO,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                            event_rrule = event_rrule + \"TU,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                            event_rrule = event_rrule + \"WE,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                            event_rrule = event_rrule + \"TH,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                            event_rrule = event_rrule + \"FR,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                            event_rrule = event_rrule + \"SA,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                            event_rrule = event_rrule + \"SU,\"\r\n                        }\r\n                        event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                    }\r\n\r\n                    // Apply to other devices\r\n                    document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                        newFreshId = newFreshId + 1;\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 1,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 3,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 2,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 4,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 5,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n\r\n                    // Update database (Update)\r\n                    window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n                    window.calendar.props.refetchData();\r\n\r\n                    ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                    // Checking for achievements\r\n                    window.calendar.updateScheduleAchievements()\r\n                    window.calendar.updateDailyScheduleAchievements()\r\n\r\n                    // Update calendar\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n\r\n                    window.calendar.props.refetchData();\r\n                    setTimeout(function() {document.getElementById(window.calendar.props.day + \"Calendar\").click()}, 3000)\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        var slotName = schedulerData.getSlotById(event.resourceId).name;\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                type=\"\"\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={event.start}\r\n                event_end={newEnd}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    moveEvent = (schedulerData, event, slotId, slotName, start, end) => {\r\n        schedulerData.updateEventStart(event, start);\r\n        schedulerData.updateEventEnd(event, end);\r\n        event.title = event.title.substring(0, event.title.length - 22) + \" (\" + from24to12(moment(start).format('HH:mm')) + \" - \" + from24to12(moment(end).format('HH:mm')) + \")\";\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Update database (Update)\r\n            window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n            window.calendar.props.refetchData();\r\n\r\n            // Checking for achievements\r\n            window.calendar.updateScheduleAchievements()\r\n        }\r\n\r\n        function deleteButtonClicked() {\r\n            // Update database (Delete)\r\n            window.calendar.props.onDeleteClick(event.database_id);\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Checking for achievements\r\n            window.calendar.updateScheduleAchievements()\r\n\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            var check_start_time = \"2020-01-01 \" + from12to24(document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" + document.getElementById(\"StartAMPM\").value)\r\n            var check_end_time = from12to24(document.getElementById(\"EndHour\").value + \":\" + document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value)\r\n            if (check_end_time === \"00:00:00\") {\r\n                check_end_time = \"2020-01-02 \" + check_end_time\r\n            } else {\r\n                check_end_time = \"2020-01-01 \" + check_end_time\r\n            }\r\n            if (check_start_time >= check_end_time) {\r\n                ReactDOM.render(\r\n                    <OnlyAlert\r\n                        message=\"Check your timings! Start time should be before end time.\"\r\n                        onOK={function() {\r\n                            ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                        }}\r\n                    />, document.getElementById(\"confirm-alert\")\r\n                )\r\n            } else {\r\n                // Checking conflicts\r\n                var [hasConflict, conflictedEvents] = window.calendar.checkConflicts(schedulerData, event)\r\n\r\n                if (hasConflict) {\r\n                    var message = \"Conflict occurred for the following events:\"\r\n                    for (var events of conflictedEvents) {\r\n                        var day = \"\"\r\n                        if (events.start.substring(11,19) < \"08:00:00\") {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        } else {\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                                day = day + \"Monday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                                day = day + \"Tuesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                                day = day + \"Wednesday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                                day = day + \"Thursday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                                day = day + \"Friday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                                day = day + \"Saturday, \"\r\n                            }\r\n                            if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                                day = day + \"Sunday, \"\r\n                            }\r\n                        }\r\n                        var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                        message += `<new>- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-2)}`\r\n                    }\r\n                    ReactDOM.render(\r\n                        <ConflictAlert\r\n                            message={message}\r\n                            onOK={function() {\r\n                                ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                            }}\r\n                        />, document.getElementById(\"confirm-alert\")\r\n                    )\r\n                } else {\r\n                    // Rename\r\n                    event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                                  document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                                  document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                                  document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                    // Update start\r\n                    schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                    // Update end\r\n                    schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                    // Update repeat\r\n                    var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.startDate.substring(0,4) +\r\n                                      window.calendar.props.startDate.substring(5,7) +\r\n                                      window.calendar.props.startDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                      window.calendar.props.sundayDate.substring(0,4) +\r\n                                      window.calendar.props.sundayDate.substring(5,7) +\r\n                                      window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                    if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                        // Repeat Every Day\r\n                        event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                    } else {\r\n                        if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                            event_rrule = event_rrule + \"MO,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                            event_rrule = event_rrule + \"TU,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                            event_rrule = event_rrule + \"WE,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                            event_rrule = event_rrule + \"TH,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                            event_rrule = event_rrule + \"FR,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                            event_rrule = event_rrule + \"SA,\"\r\n                        }\r\n                        if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                            event_rrule = event_rrule + \"SU,\"\r\n                        }\r\n                        event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                    }\r\n\r\n                    // Apply to other devices\r\n                    var newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    document.getElementById(\"ScheduleApply\" + slotName.replace(/\\s/g, '')).checked = false;\r\n                    if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 1,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 3,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 2,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 4,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n                    if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                        newFreshId = newFreshId + 1\r\n                        let newEvent = {\r\n                            id: newFreshId,\r\n                            title: event.title,\r\n                            start: event.start,\r\n                            end: event.end,\r\n                            resourceId: 5,\r\n                            bgColor: \"#06D6A0\",\r\n                            showPopover: false,\r\n                            rrule: event.rrule\r\n                        }\r\n                        window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent, window.calendar.props.current_user_id));\r\n                        schedulerData.addEvent(newEvent);\r\n                        window.calendar.setState({\r\n                            viewModel: schedulerData\r\n                        })\r\n                    }\r\n\r\n                    // Update database (Update)\r\n                    window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event, window.calendar.props.current_user_id));\r\n                    window.calendar.props.refetchData();\r\n\r\n                    ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                    // Checking for achievements\r\n                    window.calendar.updateScheduleAchievements()\r\n                    window.calendar.updateDailyScheduleAchievements()\r\n\r\n                    // Update calendar\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData\r\n                    })\r\n\r\n                    window.calendar.props.refetchData();\r\n                    setTimeout(function() {document.getElementById(window.calendar.props.day + \"Calendar\").click()}, 3000)\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                type=\"\"\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={start}\r\n                event_end={end}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    conflictOccurred = (schedulerData, action, event, type, slotId, slotName, start, end) => {\r\n        ReactDOM.render(\r\n            <OnlyAlert\r\n                message={\"This is conflicting with a schedule set for \" + slotName + \".\"}\r\n                onOK={function() {\r\n                    ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                }}\r\n            />, document.getElementById(\"confirm-alert\")\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withDragDropContext(Calendar);","import React, {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport ConfirmAlert from './ConfirmAlert';\r\nimport Calendar from './Calendar';\r\n\r\nfunction compare(a,b) {\r\n    let comparison = 0;\r\n    if (a.device_type > b.device_type) {\r\n        comparison = 1;\r\n    } else if (a.device_type < b.device_type) {\r\n        comparison = -1\r\n    }\r\n    return comparison\r\n}\r\n\r\n// Remote Control\r\n\r\nclass RemoteControlDashboard extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        window.remote = this;\r\n    }\r\n\r\n    state = {\r\n        books: [],\r\n        key: 1,\r\n        devices: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    fetchData = () => {\r\n        // Fetch data from database\r\n        fetch('/control_interface/api/remote/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            data.sort(compare);\r\n            var owned_devices = [];\r\n            for (var entry of data) {\r\n                owned_devices.push(entry.device_type)\r\n            }\r\n            this.setState({books: data, key: this.state.key+1, devices: owned_devices})\r\n        })\r\n\r\n        setTimeout(this.fetchData, 5000)\r\n    }\r\n\r\n    updateBook = (newBook) => {\r\n        fetch('/control_interface/api/remote/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook)\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({books: newBooks});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div id=\"remote_control_space\">\r\n                    <RemoteControlList\r\n                        key={this.state.key}\r\n                        books={this.state.books}\r\n                        onUpdateClick={this.updateBook}\r\n                    />\r\n                </div>\r\n                <p style={{float:\"right\"}}> Note: It will take around 5 seconds for your devices to be switched ON/OFF. </p>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass RemoteControlList extends Component {\r\n    render() {\r\n        const books = this.props.books.map(book => (\r\n            <RemoteControlEditableItem\r\n                key={book.id}\r\n                id={book.id}\r\n                user_id={book.user_id}\r\n                device_type={book.device_type}\r\n                device_state={book.device_state}\r\n                onUpdateClick={this.props.onUpdateClick}\r\n            />\r\n        ));\r\n        return (\r\n            <>\r\n                <div style={{float:\"right\"}}>\r\n                    <p style={{marginLeft:\"50px\", marginBottom:\"5px\"}}> Master </p>\r\n                    <RemoteToggleButton id=\"master\" defaultChecked={true} books={this.props.books} />\r\n                </div>\r\n                <br/>\r\n                <br/>\r\n                <div style={{margin:\"auto\", width:\"fit-content\"}}>\r\n                    {books}\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass RemoteControlEditableItem extends Component {\r\n    handleUpdate = (book) => {\r\n        book.id = this.props.id;\r\n        this.props.onUpdateClick(book);\r\n    }\r\n\r\n    render() {\r\n        const component = () => {\r\n            return (\r\n                <>\r\n                    <RemoteControlItem\r\n                        id={this.props.id}\r\n                        user_id={this.props.user_id}\r\n                        device_type={this.props.device_type}\r\n                        device_state={this.props.device_state}\r\n                        onFormSubmit={this.handleUpdate}\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        return (\r\n            component()\r\n        )\r\n    }\r\n}\r\n\r\nclass RemoteControlItem extends Component {\r\n    state = {\r\n        user_id: this.props.user_id,\r\n        device_type: this.props.device_type,\r\n        device_state: this.props.device_state,\r\n        achievements_books: [],\r\n        daily_achievements_books: [],\r\n        points_wallet_books: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        Main();\r\n    }\r\n\r\n    updateAchievementsBooks = (newBook) => {\r\n        fetch('/control_interface/api/achievements_bonus/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updateDailyAchievementsBooks = (newBook) => {\r\n        fetch('/control_interface/api/achievements_daily/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.daily_achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({daily_achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updatePointsWalletBooks = (newBook) => {\r\n        fetch('/control_interface/api/points_wallet/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.points_wallet_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({points_wallet_books: newBooks})\r\n        })\r\n    }\r\n\r\n    handleAchievementsUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updateAchievementsBooks(book);\r\n    }\r\n\r\n    handleDailyAchievementsUpdate = (book) => {\r\n        this.updateDailyAchievementsBooks(book);\r\n    }\r\n\r\n    handlePointsWalletUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updatePointsWalletBooks(book);\r\n    }\r\n\r\n\r\n    updateRemoteAchievements = () => {\r\n        fetch('/control_interface/api/user_presence/')\r\n        .then(response => response.json())\r\n        .then(presence_data => {\r\n            if (presence_data[0].presence === 1) {\r\n                // User is at desk\r\n                fetch('/control_interface/api/achievements_bonus/')\r\n                .then(response => response.json())\r\n                .then(bonus_data => {\r\n                    this.setState({achievements_books: bonus_data}, function() {\r\n                        if (bonus_data[0].first_remote === 0) {\r\n                            // First remote achievement completed\r\n                            bonus_data[0].first_remote = 60;\r\n                            this.handleAchievementsUpdate(bonus_data[0]);\r\n\r\n                            // Add points to wallet\r\n                            fetch('/control_interface/api/points_wallet/')\r\n                            .then(response => response.json())\r\n                            .then(points_data => {\r\n                                this.setState({points_wallet_books: points_data}, function() {\r\n                                    points_data[0].points = points_data[0].points + 60;\r\n                                    this.handlePointsWalletUpdate(points_data[0])\r\n                                })\r\n                            })\r\n\r\n                            // Add achievement to user log\r\n                            var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                            const csrftoken = getCookie('csrftoken');\r\n                            fetch('/control_interface/api/user_log/', {\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    'Content-Type': 'application/json',\r\n                                    'X-CSRFToken': csrftoken\r\n                                },\r\n                                body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"first_remote\"})\r\n                            })\r\n\r\n                            // Send notification\r\n                            fetch('/control_interface/api/notifications/')\r\n                            .then(response => response.json())\r\n                            .then(notifications_data => {\r\n                                var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                                var current_user = notifications_data[0].user_id;\r\n\r\n                                // Update notifications table in database\r\n                                var today = new Date();\r\n                                const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                                var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                                notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 60 points for trying out our remote control feature for the first time.\", type: \"success\"})\r\n                                fetch('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                                    method: 'PUT',\r\n                                    headers: {\r\n                                        'Content-Type': 'application/json'\r\n                                    },\r\n                                    body: JSON.stringify(notifications_data[0])\r\n                                })\r\n\r\n                                // Update number on bell\r\n                                document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 1)\r\n\r\n                                // Update notifications in list\r\n                                document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have have been awarded 60 points for trying out our remote control feature for the first time. </span> </div> </a>`)\r\n\r\n                                // Animate the bell\r\n                                document.getElementById(\"bell_icon\").style.animationIterationCount = \"infinite\";\r\n                            })\r\n                        }\r\n                    })\r\n                })\r\n            } else {\r\n                // User is not at desk\r\n                fetch('/control_interface/api/achievements_daily/')\r\n                .then(response => response.json())\r\n                .then(daily_data => {\r\n                    const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n                    this.setState({daily_achievements_books: daily_data}, function() {\r\n                        for (var input of daily_data) {\r\n                            if (input.week_day === days[(new Date()).getDay()]) {\r\n                                if (input.daily_remote === 0) {\r\n                                    // Daily remote achievement completed\r\n                                    input.daily_remote = 5;\r\n                                    this.handleDailyAchievementsUpdate(input);\r\n\r\n                                    // Check bonus achievements\r\n                                    fetch('/control_interface/api/achievements_bonus/')\r\n                                    .then(response => response.json())\r\n                                    .then(bonus_data => {\r\n                                        this.setState({achievements_books: bonus_data}, function() {\r\n                                            if (bonus_data[0].first_remote === 0) {\r\n                                                // First remote achievement completed\r\n                                                bonus_data[0].first_remote = 60;\r\n                                                this.handleAchievementsUpdate(bonus_data[0]);\r\n\r\n                                                // Add points to wallet (65)\r\n                                                fetch('/control_interface/api/points_wallet/')\r\n                                                .then(response => response.json())\r\n                                                .then(points_data => {\r\n                                                    this.setState({points_wallet_books: points_data}, function() {\r\n                                                        points_data[0].points = points_data[0].points + 65;\r\n                                                        this.handlePointsWalletUpdate(points_data[0]);\r\n                                                    })\r\n                                                })\r\n\r\n                                                // Add achievements to user log\r\n                                                var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                                                const csrftoken = getCookie('csrftoken');\r\n                                                // Bonus achievement\r\n                                                fetch('/control_interface/api/user_log/', {\r\n                                                    method: 'POST',\r\n                                                    headers: {\r\n                                                        'Content-Type': 'application/json',\r\n                                                        'X-CSRFToken': csrftoken\r\n                                                    },\r\n                                                    body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"first_remote\"})\r\n                                                })\r\n                                                // Daily achievement\r\n                                                fetch('/control_interface/api/user_log/', {\r\n                                                    method: 'POST',\r\n                                                    headers: {\r\n                                                        'Content-Type': 'application/json',\r\n                                                        'X-CSRFToken': csrftoken\r\n                                                    },\r\n                                                    body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"daily_remote\"})\r\n                                                })\r\n\r\n                                                // Send notification\r\n                                                fetch('/control_interface/api/notifications/')\r\n                                                .then(response => response.json())\r\n                                                .then(notifications_data => {\r\n                                                    var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                                                    var current_user = notifications_data[0].user_id;\r\n\r\n                                                    // Update notifications table in database\r\n                                                    var today = new Date();\r\n                                                    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                                                    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                                                    var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                                                    // Bonus achievement\r\n                                                    notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 60 points for trying out our remote control feature for the first time.\", type: \"success\"});\r\n                                                    // Daily achievement\r\n                                                    notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 5 points for using remote control while you are away from your desk today.\", type: \"success\"});\r\n                                                    fetch('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                                                        method: 'PUT',\r\n                                                        headers: {\r\n                                                            'Content-Type': 'application/json'\r\n                                                        },\r\n                                                        body: JSON.stringify(notifications_data[0])\r\n                                                    })\r\n\r\n                                                    // Update number on bell\r\n                                                    document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 2);\r\n\r\n                                                    // Update notifications in list\r\n                                                    // Bonus achievement\r\n                                                    document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 60 points for trying out our remote control feature for the first time. </span> </div> </a>`);\r\n                                                    // Daily achievement\r\n                                                    document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 5 points for using remote control while you are away from your desk today. </span> </div> </a>`);\r\n\r\n                                                    // Animate the bell\r\n                                                    document.getElementById(\"bell_icon\").style.animationIterationCount = \"infinite\";\r\n                                                })\r\n                                            } else {\r\n                                                // First remote achievement previously completed\r\n\r\n                                                // Add points to wallet\r\n                                                fetch('/control_interface/api/points_wallet/')\r\n                                                .then(response => response.json())\r\n                                                .then(points_data => {\r\n                                                    this.setState({points_wallet_books: points_data}, function() {\r\n                                                        points_data[0].points = points_data[0].points + 5;\r\n                                                        this.handlePointsWalletUpdate(points_data[0]);\r\n                                                    })\r\n                                                })\r\n\r\n                                                // Add achievement to user log\r\n                                                var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                                                const csrftoken = getCookie('csrftoken');\r\n                                                fetch('/control_interface/api/user_log/', {\r\n                                                    method: 'POST',\r\n                                                    headers: {\r\n                                                        'Content-Type': 'application/json',\r\n                                                        'X-CSRFToken': csrftoken\r\n                                                    },\r\n                                                    body: JSON.stringify({user_id: input.user_id, type: \"achievement\", unix_time: now_unix_time, description: \"daily_remote\"})\r\n                                                })\r\n\r\n                                                // Send notification\r\n                                                fetch('/control_interface/api/notifications/')\r\n                                                .then(response => response.json())\r\n                                                .then(notifications_data => {\r\n                                                    var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                                                    var current_user = notifications_data[0].user_id;\r\n\r\n                                                    // Update notifications table in database\r\n                                                    var today = new Date();\r\n                                                    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                                                    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                                                    var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                                                    notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 5 points for using remote control while you are away from your desk today.\", type: \"success\"});\r\n                                                    fetch('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                                                        method: 'PUT',\r\n                                                        headers: {\r\n                                                            'Content-Type': 'application/json'\r\n                                                        },\r\n                                                        body: JSON.stringify(notifications_data[0])\r\n                                                    })\r\n\r\n                                                    // Update number on bell\r\n                                                    document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 1)\r\n\r\n                                                    // Update notifications in list\r\n                                                    document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 5 points for using remote control while you are away from your desk today. </span> </div> </a>`)\r\n\r\n                                                    // Animate the bell\r\n                                                    document.getElementById(\"bell_icon\").style.animationIterationCount = \"infinite\";\r\n                                                })\r\n                                            }\r\n                                        })\r\n                                    })\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                })\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    handleFormSubmit = () => {\r\n        this.props.onFormSubmit({...this.state});\r\n    }\r\n\r\n    onConfirm1 = () => {\r\n        var to_be_confirmed = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_confirmed).checked = false;\r\n        this.setState({device_state: false}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n        Main();\r\n\r\n        // Checking for achievements\r\n        this.updateRemoteAchievements();\r\n    }\r\n\r\n    onConfirm2 = () => {\r\n        var to_be_confirmed = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_confirmed).checked = true;\r\n        this.setState({device_state: true}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n        Main();\r\n\r\n        // Checking for achievements\r\n        this.updateRemoteAchievements();\r\n    }\r\n\r\n    onCancel1 = () => {\r\n        var to_be_cancelled = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_cancelled).checked = true;\r\n        this.setState({device_state: true}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel2 = () => {\r\n        var to_be_cancelled = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_cancelled).checked = false;\r\n        this.setState({device_state: false}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onChange = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.device_type === \"Desktop\" || this.state.device_type === \"Laptop\") {\r\n            if (this.state.device_state === true) {\r\n                if (document.getElementById(\"confirm-alert\").childNodes.length > 0) {\r\n                    // Switch OFF\r\n                    this.setState({device_state: false}, function() {this.handleFormSubmit()})\r\n                } else {\r\n                    ReactDOM.render(<ConfirmAlert\r\n                                        message={\"You are switching off your \" + this.state.device_type + \".\"}\r\n                                        onConfirm = {this.onConfirm1}\r\n                                        onCancel = {this.onCancel1}\r\n                                    />, document.getElementById(\"confirm-alert\"))\r\n                }\r\n            } else {\r\n                if (document.getElementById(\"confirm-alert\").childNodes.length > 0) {\r\n                    // Switch ON\r\n                    this.setState({device_state: true}, function() {this.handleFormSubmit()})\r\n                } else {\r\n                    ReactDOM.render(<ConfirmAlert\r\n                                        message={\"You are switching on your \" + this.state.device_type + \".\"}\r\n                                        onConfirm = {this.onConfirm2}\r\n                                        onCancel = {this.onCancel2}\r\n                                    />, document.getElementById(\"confirm-alert\"))\r\n                }\r\n            }\r\n        } else {\r\n            // Update database\r\n            this.setState({device_state: e.target.checked}, function() {this.handleFormSubmit()})\r\n            Main();\r\n\r\n            // Checking for achievements\r\n            this.updateRemoteAchievements();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.device_state === false) {\r\n            var remote_control_outer_ring = \"greyRing\";\r\n            var remote_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" OFF.png\";\r\n        } else {\r\n            remote_control_outer_ring = \"greenRing\";\r\n            remote_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" ON.png\";\r\n        }\r\n        return (\r\n            <div id={this.state.device_type.replace(/\\s/g,'') + \"BoxRemote\"} className=\"containerRemote\">\r\n                <p style={{textAlign:\"center\", fontWeight:\"bold\", color:\"black\"}}> {this.state.device_type} </p>\r\n                <div id={this.state.device_type.replace(/\\s/g,'') + \"IconRemote\"}>\r\n                    <div class={remote_control_outer_ring}>\r\n                        <div class=\"whiteRing\">\r\n                            <img class=\"PlugLoadIcon\" src={remote_control_image} alt=\"Icon\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br/>\r\n                <div className=\"toggle-switch\">\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        className=\"toggle-switch-checkbox\"\r\n                        id={this.state.device_type.replace(/\\s/g,'') + \"ToggleRemote\"}\r\n                        checked={this.state.device_state}\r\n                        defaultChecked={this.state.device_state}\r\n                        onChange={this.onChange}\r\n                    />\r\n                    <label className=\"toggle-switch-label\" htmlFor={this.state.device_type.replace(/\\s/g,'') + \"ToggleRemote\"}>\r\n                        <span className=\"toggle-switch-inner\" data-yes=\"ON\" data-no=\"OFF\" />\r\n                        <span className=\"toggle-switch-switch\" />\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass RemoteToggleButton extends Component {\r\n    state = {\r\n        checked: this.props.defaultChecked\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        window.master = this;\r\n    }\r\n\r\n    onConfirm1 = () => {\r\n        // Switch OFF all plug loads\r\n        if (document.getElementById(\"DesktopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"DesktopToggleRemote\").checked === true) {\r\n                document.getElementById(\"DesktopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"MonitorToggleRemote\") !== null) {\r\n            if (document.getElementById(\"MonitorToggleRemote\").checked === true) {\r\n                document.getElementById(\"MonitorToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"LaptopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"LaptopToggleRemote\").checked === true) {\r\n                document.getElementById(\"LaptopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"TaskLampToggleRemote\") !== null) {\r\n            if (document.getElementById(\"TaskLampToggleRemote\").checked === true) {\r\n                document.getElementById(\"TaskLampToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"FanToggleRemote\") !== null) {\r\n            if (document.getElementById(\"FanToggleRemote\").checked === true) {\r\n                document.getElementById(\"FanToggleRemote\").click();\r\n            }\r\n        }\r\n        document.getElementById(\"master\").checked = false;\r\n        this.setState({checked: false})\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onConfirm2 = () => {\r\n        // Switch ON all plug loads\r\n        if (document.getElementById(\"DesktopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"DesktopToggleRemote\").checked === false) {\r\n                document.getElementById(\"DesktopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"MonitorToggleRemote\") !== null) {\r\n            if (document.getElementById(\"MonitorToggleRemote\").checked === false) {\r\n                document.getElementById(\"MonitorToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"LaptopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"LaptopToggleRemote\").checked === false) {\r\n                document.getElementById(\"LaptopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"TaskLampToggleRemote\") !== null) {\r\n            if (document.getElementById(\"TaskLampToggleRemote\").checked === false) {\r\n                document.getElementById(\"TaskLampToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"FanToggleRemote\") !== null) {\r\n            if (document.getElementById(\"FanToggleRemote\").checked === false) {\r\n                document.getElementById(\"FanToggleRemote\").click();\r\n            }\r\n        }\r\n        document.getElementById(\"master\").checked = true;\r\n        this.setState({checked: true});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel1 = () => {\r\n        document.getElementById(\"master\").checked = true;\r\n        this.setState({checked: true});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel2 = () => {\r\n        document.getElementById(\"master\").checked = false;\r\n        this.setState({checked: false});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onChange = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.checked === true) {\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message=\"You are switching off all your devices.\"\r\n                                onConfirm = {this.onConfirm1}\r\n                                onCancel = {this.onCancel1}\r\n                             />, document.getElementById(\"confirm-alert\"))\r\n        } else {\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message=\"You are switching on all your devices.\"\r\n                                onConfirm = {this.onConfirm2}\r\n                                onCancel = {this.onCancel2}\r\n                            />, document.getElementById(\"confirm-alert\"))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var defaultChecked = false\r\n        for (var book of this.props.books) {\r\n            if (book.device_state === true) {\r\n                defaultChecked = true\r\n            }\r\n        }\r\n        return (\r\n            <div className={\"toggle-switch\" + (this.props.Small ? \" small-switch\" : \"\")}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name={this.props.Name}\r\n                    className=\"toggle-switch-checkbox\"\r\n                    id={this.props.id}\r\n                    checked={this.checked}\r\n                    defaultChecked={defaultChecked}\r\n                    onClick={this.onChange}\r\n                    disabled={this.props.disabled}\r\n                />\r\n                {this.props.id ? (\r\n                    <label className=\"toggle-switch-label\" htmlFor={this.props.id}>\r\n                        <span\r\n                            className={this.props.disabled ? \"toggle-switch-inner toggle-switch-disabled\" : \"toggle-switch-inner\"}\r\n                            data-yes=\"ON\"\r\n                            data-no=\"OFF\"\r\n                        />\r\n                        <span\r\n                            className={this.props.disabled ? \"toggle-switch-switch toggle-switch-disabled\": \"toggle-switch-switch\"}\r\n                        />\r\n                    </label>\r\n                ) : null}\r\n          </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<RemoteControlDashboard />, document.getElementById('remote-control'))\r\n\r\nfunction Main() {\r\n    // If at least one plug load is ON, master button is automatically toggled to ON.\r\n    document.getElementById(\"master\").checked = false;\r\n    window.master.setState({checked: false}, function() {\r\n        for (var device of window.remote.state.devices) {\r\n            if (document.getElementById(device.replace(/\\s/g,'') + \"ToggleRemote\").checked) {\r\n                window.master.setState({checked: true});\r\n                document.getElementById(\"master\").checked = true;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n// Presence Based Control\r\n\r\nclass PresenceControlDashboard extends Component {\r\n    state = {\r\n        books: [],\r\n        key: 1\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        window.presencecontrol = this;\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data from database\r\n        fetch('/control_interface/api/presence/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            data.sort(compare);\r\n            this.setState({books: data})\r\n        })\r\n    }\r\n\r\n    updateBook = (newBook) => {\r\n        fetch('/control_interface/api/presence/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook)\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({books: newBooks});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n              <br/>\r\n\r\n                  <PresenceControlList\r\n                      key={this.state.key}\r\n                      books={this.state.books}\r\n                      onUpdateClick={this.updateBook}\r\n                  />\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass PresenceControlList extends Component {\r\n    render() {\r\n        const books = this.props.books.map(book => (\r\n            <PresenceControlEditableItem\r\n                key={book.id}\r\n                id={book.id}\r\n                user_id={book.user_id}\r\n                device_type={book.device_type}\r\n                presence_setting={book.presence_setting}\r\n                onUpdateClick={this.props.onUpdateClick}\r\n            />\r\n        ));\r\n        return (\r\n            <div class=\"plugloadboxes\">\r\n                {books}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass PresenceControlEditableItem extends Component {\r\n    handleUpdate = (book) => {\r\n        book.id = this.props.id;\r\n        this.props.onUpdateClick(book);\r\n    }\r\n\r\n    render() {\r\n        const component = () => {\r\n            return (\r\n                <>\r\n                    <PresenceControlItem\r\n                        id={this.props.id}\r\n                        user_id={this.props.user_id}\r\n                        device_type={this.props.device_type}\r\n                        presence_setting={this.props.presence_setting}\r\n                        onFormSubmit={this.handleUpdate}\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        return (\r\n            component()\r\n        )\r\n    }\r\n}\r\n\r\nclass PresenceControlItem extends Component {\r\n    state = {\r\n        user_id: this.props.user_id,\r\n        device_type: this.props.device_type,\r\n        presence_setting: this.props.presence_setting,\r\n        achievements_books: [],\r\n        points_wallet_books: [],\r\n        daily_achievements_books: []\r\n    }\r\n\r\n    updateAchievementsBooks = (newBook) => {\r\n        fetch('/control_interface/api/achievements_bonus/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updateDailyAchievementsBooks = (newBook) => {\r\n        fetch('/control_interface/api/achievements_daily/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.daily_achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({daily_achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updatePointsWalletBooks = (newBook) => {\r\n        fetch('/control_interface/api/points_wallet/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.points_wallet_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({points_wallet_books: newBooks})\r\n        })\r\n    }\r\n\r\n    handleAchievementsUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updateAchievementsBooks(book);\r\n    }\r\n\r\n    handleDailyAchievementsUpdate = (book) => {\r\n        this.updateDailyAchievementsBooks(book);\r\n    }\r\n\r\n    handlePointsWalletUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updatePointsWalletBooks(book);\r\n    }\r\n\r\n    updatePresenceAchievements = () => {\r\n        fetch('/control_interface/api/achievements_daily/')\r\n        .then(response => response.json())\r\n        .then(daily_data => {\r\n            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n            this.setState({daily_achievements_books: daily_data}, function() {\r\n                for (var input of daily_data) {\r\n                    if (input.week_day === days[(new Date()).getDay()]) {\r\n                        if (input.daily_presence === 0) {\r\n                            // Daily presence achievement completed\r\n                            input.daily_presence = 5;\r\n                            this.handleDailyAchievementsUpdate(input);\r\n\r\n                            // Check bonus achievements\r\n                            fetch('/control_interface/api/achievements_bonus/')\r\n                            .then(response => response.json())\r\n                            .then(bonus_data => {\r\n                                this.setState({achievements_books: bonus_data}, function() {\r\n                                    if (bonus_data[0].first_presence === 0) {\r\n                                        // First presence achievement completed\r\n                                        bonus_data[0].first_presence = 70;\r\n                                        this.handleAchievementsUpdate(bonus_data[0]);\r\n\r\n                                        // Add points to wallet (75)\r\n                                        fetch('/control_interface/api/points_wallet/')\r\n                                        .then(response => response.json())\r\n                                        .then(points_data => {\r\n                                            this.setState({points_wallet_books: points_data}, function() {\r\n                                                points_data[0].points = points_data[0].points + 75;\r\n                                                this.handlePointsWalletUpdate(points_data[0]);\r\n                                            })\r\n                                        })\r\n\r\n                                        // Add achievements to user log\r\n                                        var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                                        const csrftoken = getCookie('csrftoken');\r\n                                        // Bonus achievement\r\n                                        fetch('/control_interface/api/user_log/', {\r\n                                            method: 'POST',\r\n                                            headers: {\r\n                                                'Content-Type': 'application/json',\r\n                                                'X-CSRFToken': csrftoken\r\n                                            },\r\n                                            body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"first_presence\"})\r\n                                        })\r\n                                        // Daily achievement\r\n                                        fetch('/control_interface/api/user_log/', {\r\n                                            method: 'POST',\r\n                                            headers: {\r\n                                                'Content-Type': 'application/json',\r\n                                                'X-CSRFToken': csrftoken\r\n                                            },\r\n                                            body: JSON.stringify({user_id: bonus_data[0].user_id, type: \"achievement\", unix_time: now_unix_time, description: \"daily_presence\"})\r\n                                        })\r\n\r\n                                        // Send notification\r\n                                        fetch('/control_interface/api/notifications/')\r\n                                        .then(response => response.json())\r\n                                        .then(notifications_data => {\r\n                                            var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                                            var current_user = notifications_data[0].user_id;\r\n\r\n                                            // Update notifications table in database\r\n                                            var today = new Date();\r\n                                            const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                                            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                                            var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                                            // Bonus achievement\r\n                                            notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 70 points for setting your first presence-based setting.\", type: \"success\"});\r\n                                            // Daily achievement\r\n                                            notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 5 points for activating presence-based control for your devices today.\", type: \"success\"});\r\n                                            fetch ('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                                                method: 'PUT',\r\n                                                headers: {\r\n                                                    'Content-Type': 'application/json'\r\n                                                },\r\n                                                body: JSON.stringify(notifications_data[0])\r\n                                            })\r\n\r\n                                            // Update number on bell\r\n                                            document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 2);\r\n\r\n                                            // Update notifications in list\r\n                                            // Bonus achievement\r\n                                            document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 70 points for setting your first presence-based setting. </span> </div> </a>`);\r\n                                            // Daily achievement\r\n                                            document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 5 points for activating presence-based control for your devices today. </span> </div> </a>`);\r\n\r\n                                            // Animate the bell\r\n                                            document.getElementById(\"bell_icon\").style.animationIterationCount = \"infinite\";\r\n                                        })\r\n                                    } else {\r\n                                        // First presence achievement previously completed\r\n\r\n                                        // Add points to wallet\r\n                                        fetch('/control_interface/api/points_wallet/')\r\n                                        .then(points_data => {\r\n                                            this.setState({points_wallet_books: points_data}, function() {\r\n                                                points_data[0].points = points_data[0].points + 5;\r\n                                                this.handlePointsWalletUpdate(points_data[0]);\r\n                                            })\r\n                                        })\r\n\r\n                                        // Add achievement to user log\r\n                                        var now_unix_time = Math.round((new Date()).getTime() / 1000);\r\n                                        const csrftoken = getCookie('csrftoken');\r\n                                        fetch('/control_interface/api/user_log/', {\r\n                                            method: 'POST',\r\n                                            headers: {\r\n                                                'Content-Type': 'application/json',\r\n                                                'X-CSRFToken': csrftoken\r\n                                            },\r\n                                            body: JSON.stringify({user_id: input.user_id, type: \"achievement\", unix_time: now_unix_time, description: \"daily_presence\"})\r\n                                        })\r\n\r\n                                        // Send notification\r\n                                        fetch('/control_interface/api/notifications/')\r\n                                        .then(response => response.json())\r\n                                        .then(notifications_data => {\r\n                                            var number_of_notifications = notifications_data[0].notifications.notifications.length;\r\n                                            var current_user = notifications_data[0].user_id;\r\n\r\n                                            // Update notifications table in database\r\n                                            var today = new Date();\r\n                                            const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                                            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n                                            var new_timestamp = today.getDate() + \" \" + months[today.getMonth()] + \" \" + today.getUTCFullYear() + \", \" + days[today.getDay()];\r\n                                            notifications_data[0].notifications.notifications.push({timestamp: new_timestamp, message: \"You have been awarded 5 points for activating presence-based control for your devices today.\", type: \"success\"});\r\n                                            fetch('/control_interface/api/notifications/' + current_user.toString() + '/', {\r\n                                                method: 'PUT',\r\n                                                headers: {\r\n                                                    'Content-Type': 'application/json'\r\n                                                },\r\n                                                body: JSON.stringify(notifications_data[0])\r\n                                            })\r\n\r\n                                            // Update number on bell\r\n                                            document.getElementById(\"number_of_notifications\").innerHTML = (number_of_notifications + 1)\r\n\r\n                                            // Update notifications in list\r\n                                            document.getElementsByClassName(\"dropdown-list\")[0].childNodes[1].insertAdjacentHTML('afterend', `<a class=\"dropdown-item d-flex align-items-center\" href=\"#\"> <div class=\"mr-3\"> <div class=\"icon-circle bg-success\"> <i class=\"fas fa-trophy text-white\"> </i> </div> </div> <div> <div class=\"small text-gray-500\"> ${new_timestamp} </div> <span class=\"font-weight-bold\"> You have been awarded 5 points for activating presence-based control for your devices today. </span> </div> </a>`);\r\n\r\n                                            // Animate the bell\r\n                                            document.getElementById(\"bell_icon\").style.animationIterationCount = \"infinite\";\r\n                                        })\r\n                                    }\r\n                                })\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    onConfirm1 = () => {\r\n        // Update database\r\n        this.setState({presence_setting: \"1000000\"}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel1 = () => {\r\n        document.getElementById(this.state.device_type.replace(/\\s/g, '') + \"Select\").value = this.state.presence_setting;\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    handleFormSubmit = () => {\r\n        this.props.onFormSubmit({...this.state});\r\n    }\r\n\r\n    handleSettingUpdate = (evt) => {\r\n        if (evt.target.value !== \"other\" && evt.target.value !== \"1000000\") {\r\n            // Hide popup\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n            // Update database\r\n            this.setState({presence_setting: evt.target.value}, function() {this.handleFormSubmit()})\r\n\r\n            // Checking for achievements\r\n            this.updatePresenceAchievements();\r\n        }\r\n        if (evt.target.value === \"other\") {\r\n            // Show popup\r\n            ReactDOM.render(\r\n                <PresenceControlPopup\r\n                    device_type={this.state.device_type}\r\n                    handleOtherUpdate={this.handleOtherUpdate}\r\n                    handleEnterClick={this.handleEnterClick}\r\n                    cancelButtonClicked={this.cancelButtonClicked}\r\n                    okButtonClicked={this.okButtonClicked}\r\n                />, document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\")\r\n            )\r\n        }\r\n        if (evt.target.value === \"1000000\") {\r\n            // Hide popup\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message={\"You are deactivating presence-based control for \" + this.state.device_type + \".\"}\r\n                                onConfirm = {this.onConfirm1}\r\n                                onCancel = {this.onCancel1}\r\n                            />, document.getElementById(\"confirm-alert\"))\r\n        }\r\n    }\r\n\r\n    handleOtherUpdate = (evt) => {\r\n        this.setState({presence_setting: evt.target.value});\r\n    }\r\n\r\n    handleEnterClick = (evt) => {\r\n        if (evt.key === \"Enter\" || evt.keyCode === 13) {\r\n            this.okButtonClicked();\r\n        }\r\n    }\r\n\r\n    onConfirm2 = () => {\r\n        // Change outer ring to red\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'')).className = \"redRing\";\r\n        // Change image to OFF\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'')).childNodes[0].childNodes[0].src = \"/static/Images/\" + this.state.device_type.toString() + \" OFF.png\";\r\n        // Set value to OFF\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = \"1000000\";\r\n        // Update database\r\n        this.setState({presence_setting: \"1000000\"}, function() {this.handleFormSubmit()})\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel2 = () => {\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    handlePresenceIconClick = () => {\r\n        if (document.getElementById(this.state.device_type.replace(/\\s/g,'')).className === \"greenRing\") {\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message={\"You are deactivating presence-based control for \" + this.state.device_type + \".\"}\r\n                                onConfirm = {this.onConfirm2}\r\n                                onCancel = {this.onCancel2}\r\n                            />, document.getElementById(\"confirm-alert\"))\r\n        } else {\r\n            // Change outer ring to green\r\n            document.getElementById(this.state.device_type.replace(/\\s/g,'')).className = \"greenRing\"\r\n            // Change image to ON\r\n            document.getElementById(this.state.device_type.replace(/\\s/g,'')).childNodes[0].childNodes[0].src = \"/static/Images/\" + this.state.device_type.toString() + \" ON.png\";\r\n            // Set value to 5 minutes\r\n            document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = \"5\";\r\n            // Update database\r\n            this.setState({presence_setting: \"5\"}, function() {this.handleFormSubmit()})\r\n\r\n            // Checking for achievements\r\n            this.updatePresenceAchievements();\r\n        }\r\n    }\r\n\r\n    cancelButtonClicked = () => {\r\n        // Hide popup\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n        // Set value to 5 minutes\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = \"5\";\r\n        this.setState({presence_setting: 5}, function() {this.handleFormSubmit()})\r\n\r\n        this.updatePresenceAchievements();\r\n    }\r\n\r\n    okButtonClicked = () => {\r\n        // Display value on dropdown\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"TextOther\").value.toString();\r\n        // Clear text box on popup\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"TextOther\").value = \"15\";\r\n        // Hide popup\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n        // Update database\r\n        this.handleFormSubmit();\r\n\r\n        // Checking for achievements\r\n        this.updatePresenceAchievements();\r\n    }\r\n\r\n    render() {\r\n        const possible_option = [\"1000000\", \"5\", \"10\", \"20\", \"30\", \"60\", \"other\"]\r\n        if (possible_option.includes(this.state.presence_setting.toString())) {\r\n            var disabled = true;\r\n            var display_value = \"\";\r\n            var display_text = \"\";\r\n        } else {\r\n            disabled = false;\r\n            display_value = this.state.presence_setting;\r\n            display_text = this.state.presence_setting + \" minutes\";\r\n        }\r\n\r\n        if (this.state.presence_setting.toString() === \"1000000\") {\r\n            var presence_control_outer_ring = \"redRing\";\r\n            var presence_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" OFF.png\";\r\n        } else {\r\n            presence_control_outer_ring = \"greenRing\";\r\n            presence_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" ON.png\";\r\n        }\r\n\r\n        return (\r\n            <div id={this.state.device_type.replace(/\\s/g,'') + \"BoxPresence\"} className=\"containerPresence\" onClick={this.exitClick}>\r\n                <div className=\"iconPresence\">\r\n                    <div className={presence_control_outer_ring} id={this.state.device_type.replace(/\\s/g,'')} onClick={this.handlePresenceIconClick}>\r\n                        <div className=\"whiteRing\">\r\n                            <img class=\"PlugLoadIcon\" src={presence_control_image} alt=\"Icon\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{width:\"200px\", height:\"10px\", overflowY:\"visible\"}}>\r\n                    <div style={{position:\"relative\", width:\"200px\", height:\"1px\", overflowY:\"visible\"}}>\r\n                        <div className=\"dropdownPresence\" id={this.state.device_type.replace(/\\s/g,'') + \"Dropdown\"}>\r\n                            <div class=\"wordPresence\">\r\n                                <p> {this.state.device_type} </p>\r\n                            </div>\r\n                            <select defaultValue={this.state.presence_setting} onChange={this.handleSettingUpdate} id={this.state.device_type.replace(/\\s/g,'') + \"Select\"}>\r\n                                <option value=\"1000000\"> Deactivate </option>\r\n                                <optgroup label=\"Off after I leave for:\">\r\n                                    <option value=\"5\"> 5 minutes </option>\r\n                                    <option value=\"10\"> 10 minutes </option>\r\n                                    <option value=\"20\"> 20 minutes </option>\r\n                                    <option value=\"30\"> 30 minutes </option>\r\n                                    <option value=\"60\"> 1 hour </option>\r\n                                    <option value=\"other\"> Custom Time </option>\r\n                                </optgroup>\r\n                                <option value={display_value} disabled={disabled}> {display_text} </option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div id={this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"}> </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass PresenceControlPopup extends Component {\r\n    exitClick = () => {\r\n        this.props.cancelButtonClicked();\r\n    }\r\n    render() {\r\n        return (\r\n        <>\r\n            <div id=\"PopupPresenceOverlay\" className=\"popup_presence_overlay\" onClick={this.exitClick}></div>\r\n            <div id={this.props.device_type.replace(/\\s/g,'') + \"PopupPresence\"} className=\"visiblePresence\">\r\n                <input type=\"number\" id={this.props.device_type.replace(/\\s/g,'') + \"TextOther\"} onChange={this.props.handleOtherUpdate} onKeyUp={this.props.handleEnterClick} placeholder=\"15\" />\r\n                <br />\r\n                <p className=\"minutes\"> minutes </p>\r\n                <br />\r\n                <button id={this.props.device_type.replace(/\\s/g,'') + \"CancelButton\"} onClick={this.props.cancelButtonClicked} className=\"btn btn-sm\"> Cancel </button>\r\n                <button id={this.props.device_type.replace(/\\s/g,'') + \"OkButton\"} className=\"btn btn-sm\" onClick={this.props.okButtonClicked}> OK </button>\r\n            </div>\r\n        </>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<PresenceControlDashboard />, document.getElementById('presence-based-control'))\r\n\r\n\r\n// Schedule Based control\r\n\r\nfunction sort_events(a,b) {\r\n    let comparison = 0;\r\n    if (a.start > b.start) {\r\n        comparison = 1;\r\n    } else if (a.start < b.start) {\r\n        comparison = -1\r\n    }\r\n    return comparison\r\n}\r\n\r\nfunction from24to12(hour) {\r\n    var new_hour = Number(hour.substring(0,2));\r\n    var am_or_pm = new_hour >= 12 ? \"PM\" : \"AM\";\r\n    new_hour = (new_hour % 12) || 12;\r\n    var finalTime = new_hour + \":\" + hour.substring(3,5) + \" \" + am_or_pm;\r\n\r\n    if (finalTime.length !== 8) {\r\n        finalTime = \"0\" + finalTime\r\n    }\r\n    return (finalTime);\r\n}\r\n\r\nfunction getDates() {\r\n    var today = new Date();\r\n    var mondayDate = new Date();\r\n    var tuesdayDate = new Date();\r\n    var wednesdayDate = new Date();\r\n    var thursdayDate = new Date();\r\n    var fridayDate = new Date();\r\n    var saturdayDate = new Date();\r\n    var sundayDate = new Date();\r\n    var startDate = new Date();\r\n\r\n    if (today.getDay() === 0) {\r\n        // Today is Sunday\r\n        startDate.setDate(today.getDate() - 7)\r\n        mondayDate.setDate(today.getDate() - 6);\r\n        tuesdayDate.setDate(today.getDate() - 5);\r\n        wednesdayDate.setDate(today.getDate() - 4);\r\n        thursdayDate.setDate(today.getDate() - 3);\r\n        fridayDate.setDate(today.getDate() - 2);\r\n        saturdayDate.setDate(today.getDate() - 1);\r\n        sundayDate.setDate(today.getDate());\r\n    } else {\r\n        startDate.setDate(today.getDate() + (0 - today.getDay()))\r\n        mondayDate.setDate(today.getDate() + (1 - today.getDay()));\r\n        tuesdayDate.setDate(today.getDate() + (2 - today.getDay()));\r\n        wednesdayDate.setDate(today.getDate() + (3 - today.getDay()));\r\n        thursdayDate.setDate(today.getDate() + (4 - today.getDay()));\r\n        fridayDate.setDate(today.getDate() + (5 - today.getDay()));\r\n        saturdayDate.setDate(today.getDate() + (6 - today.getDay()));\r\n        sundayDate.setDate(today.getDate() + (7 - today.getDay()));\r\n    }\r\n\r\n    startDate = startDate.getFullYear() + \"-\" + ((startDate.getMonth() + 1).toString().length === 1 ? \"0\" + (startDate.getMonth() + 1).toString() : (startDate.getMonth() + 1)) + \"-\" + (startDate.getDate().toString().length === 1 ? \"0\" + startDate.getDate().toString() : startDate.getDate())\r\n    mondayDate = mondayDate.getFullYear() + \"-\" + ((mondayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (mondayDate.getMonth() + 1).toString() : (mondayDate.getMonth() + 1)) + \"-\" + (mondayDate.getDate().toString().length === 1 ? \"0\" + mondayDate.getDate().toString() : mondayDate.getDate())\r\n    tuesdayDate = tuesdayDate.getFullYear() + \"-\" + ((tuesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (tuesdayDate.getMonth() + 1).toString() : (tuesdayDate.getMonth() + 1)) + \"-\" + (tuesdayDate.getDate().toString().length === 1 ? \"0\" + tuesdayDate.getDate().toString() : tuesdayDate.getDate())\r\n    wednesdayDate = wednesdayDate.getFullYear() + \"-\" + ((wednesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (wednesdayDate.getMonth() + 1).toString() : (wednesdayDate.getMonth() + 1)) + \"-\" + (wednesdayDate.getDate().toString().length === 1 ? \"0\" + wednesdayDate.getDate().toString() : wednesdayDate.getDate())\r\n    thursdayDate = thursdayDate.getFullYear() + \"-\" + ((thursdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (thursdayDate.getMonth() + 1).toString() : (thursdayDate.getMonth() + 1))  + \"-\" + (thursdayDate.getDate().toString().length === 1 ? \"0\" + thursdayDate.getDate().toString() : thursdayDate.getDate())\r\n    fridayDate = fridayDate.getFullYear() + \"-\" + ((fridayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (fridayDate.getMonth() + 1).toString() : (fridayDate.getMonth() + 1)) + \"-\" + (fridayDate.getDate().toString().length === 1 ? \"0\" + fridayDate.getDate().toString() : fridayDate.getDate())\r\n    saturdayDate = saturdayDate.getFullYear() + \"-\" + ((saturdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (saturdayDate.getMonth() + 1).toString() : (saturdayDate.getMonth() + 1)) + \"-\" + (saturdayDate.getDate().toString().length === 1 ? \"0\" + saturdayDate.getDate().toString() : saturdayDate.getDate())\r\n    sundayDate = sundayDate.getFullYear() + \"-\" + ((sundayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (sundayDate.getMonth() + 1).toString() : (sundayDate.getMonth() + 1)) + \"-\" + (sundayDate.getDate().toString().length === 1 ? \"0\" + sundayDate.getDate().toString() : sundayDate.getDate())\r\n\r\n    return([mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate, startDate])\r\n}\r\n\r\nfunction getCookie(name) {\r\n    let cookieValue = null;\r\n    if (document.cookie && document.cookie !== '') {\r\n        const cookies = document.cookie.split(';');\r\n        for (let i = 0; i < cookies.length; i++) {\r\n            const cookie = cookies[i].trim();\r\n            if (cookie.substring(0,name.length+1) === (name + '=')) {\r\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue\r\n}\r\n\r\nclass ScheduleControlDashboard extends Component {\r\n    state = {\r\n        events: [],\r\n        dates: [],\r\n        chosen_day: \"\",\r\n        books: [],\r\n        key: 1,\r\n        devices: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data from database\r\n        fetch('/control_interface/api/schedule/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            var owned_devices = [];\r\n            if (window.remote.state.devices.includes(\"Desktop\")) {\r\n                owned_devices.push({id: 1, name: \"Desktop\"})\r\n            }\r\n            if (window.remote.state.devices.includes(\"Fan\")) {\r\n                owned_devices.push({id: 5, name: \"Fan\"})\r\n            }\r\n            if (window.remote.state.devices.includes(\"Laptop\")) {\r\n                owned_devices.push({id: 2, name: \"Laptop\"})\r\n            }\r\n            if (window.remote.state.devices.includes(\"Monitor\")) {\r\n                owned_devices.push({id: 3, name: \"Monitor\"})\r\n            }\r\n            if (window.remote.state.devices.includes(\"Task Lamp\")) {\r\n                owned_devices.push({id: 4, name: \"Task Lamp\"})\r\n            }\r\n            this.setState({books: data, devices: owned_devices})\r\n            var events_datas = [];\r\n            for (var input of data) {\r\n                this.setState({current_user_id: input.user_id})\r\n                var resourceId = input.device_type_id;\r\n                var eventId = input.event_id;\r\n                var event_start = input.event_start;\r\n                var event_end = input.event_end;\r\n\r\n                // Format the title to be shown for each event on the scheduler\r\n                var finalStart = from24to12(event_start);\r\n                var finalEnd = from24to12(event_end)\r\n                var event_name = input.event_name + \" (\" + finalStart + \" - \" + finalEnd + \")\"\r\n\r\n                var [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate, startDate] = getDates();\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + startDate.substring(0,4) + startDate.substring(5,7) + startDate.substring(8,10) + \"T000000Z;UNTIL=\" + sundayDate.substring(0,4) + sundayDate.substring(5,7) + sundayDate.substring(8,10) + \"T235900Z;BYDAY=\";\r\n                event_start = \"2020-01-01 \" + event_start\r\n\r\n                if (event_end === \"00:00:00\") {\r\n                    event_end = \"2020-01-02 \" + event_end\r\n                } else {\r\n                    event_end = \"2020-01-01 \" + event_end\r\n                }\r\n\r\n                if (input.event_rrule.includes(\"MondayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"SU\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",SU\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Monday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"MO\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",MO\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"TuesdayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"MO\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",MO\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Tuesday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"TU\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",TU\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"WednesdayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"TU\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",TU\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Wednesday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"WE\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",WE\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"ThursdayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"WE\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",WE\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Thursday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"TH\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",TH\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"FridayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"TH\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",TH\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Friday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"FR\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",FR\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"SaturdayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"FR\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",FR\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Saturday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"SA\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",SA\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"SundayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"SA\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",SA\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Sunday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"SU\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",SU\";\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Set the events for the scheduler\r\n                events_datas.push({id: eventId, start: event_start, end: event_end, title: event_name, rrule: event_rrule, resourceId: resourceId, showPopover: false, bgColor: '#06D6A0', database_id: input.id})\r\n\r\n                // Open the calendar for today\r\n                const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n                var today = new Date();\r\n                var wanted_id = days[today.getDay()] + \"Calendar\";\r\n                document.getElementById(wanted_id).className=\"selected\";\r\n                setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n            }\r\n            events_datas.sort(sort_events)\r\n            if (events_datas.length === 0) {\r\n                events_datas.push({id: 1, start: getDates()[7] + \" 09:00:00\", end: getDates()[7] + \" 10:00:00\", title: \"Empty\", resourceId: 1, showPopover: false, bgColor: \"#06D6A0\"})\r\n            }\r\n            this.setState({\r\n                events: events_datas,\r\n                dates: [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate, startDate]\r\n            })\r\n        })\r\n    }\r\n\r\n    refetchData = () => {\r\n        // Fetch data from database\r\n        fetch('/control_interface/api/schedule/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            var owned_devices = [];\r\n            if (window.remote.state.devices.includes(\"Desktop\")) {\r\n                owned_devices.push({id: 1, name: \"Desktop\"})\r\n            }\r\n            if (window.remote.state.devices.includes(\"Fan\")) {\r\n                owned_devices.push({id: 5, name: \"Fan\"})\r\n            }\r\n            if (window.remote.state.devices.includes(\"Laptop\")) {\r\n                owned_devices.push({id: 2, name: \"Laptop\"})\r\n            }\r\n            if (window.remote.state.devices.includes(\"Monitor\")) {\r\n                owned_devices.push({id: 3, name: \"Monitor\"})\r\n            }\r\n            if (window.remote.state.devices.includes(\"Task Lamp\")) {\r\n                owned_devices.push({id: 4, name: \"Task Lamp\"})\r\n            }\r\n            this.setState({books: data, devices: owned_devices})\r\n            var events_datas = [];\r\n            for (var input of data) {\r\n                this.setState({current_user_id: input.user_id})\r\n                var resourceId = input.device_type_id;\r\n                var eventId = input.event_id;\r\n                var event_start = input.event_start;\r\n                var event_end = input.event_end;\r\n\r\n                // Format the title to be shown for each event on the scheduler\r\n                var finalStart = from24to12(event_start);\r\n                var finalEnd = from24to12(event_end)\r\n                var event_name = input.event_name + \" (\" + finalStart + \" - \" + finalEnd + \")\"\r\n\r\n                var [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate, startDate] = getDates();\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + startDate.substring(0,4) + startDate.substring(5,7) + startDate.substring(8,10) + \"T000000Z;UNTIL=\" + sundayDate.substring(0,4) + sundayDate.substring(5,7) + sundayDate.substring(8,10) + \"T235900Z;BYDAY=\";\r\n                event_start = \"2020-01-01 \" + event_start\r\n\r\n                if (event_end === \"00:00:00\") {\r\n                    event_end = \"2020-01-02 \" + event_end\r\n                } else {\r\n                    event_end = \"2020-01-01 \" + event_end\r\n                }\r\n\r\n                if (input.event_rrule.includes(\"MondayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"SU\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",SU\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Monday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"MO\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",MO\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"TuesdayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"MO\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",MO\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Tuesday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"TU\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",TU\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"WednesdayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"TU\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",TU\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Wednesday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"WE\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",WE\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"ThursdayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"WE\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",WE\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Thursday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"TH\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",TH\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"FridayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"TH\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",TH\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Friday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"FR\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",FR\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"SaturdayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"FR\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",FR\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Saturday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"SA\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",SA\";\r\n                        }\r\n                    }\r\n                }\r\n                if (input.event_rrule.includes(\"SundayMorning\")) {\r\n                    if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                        event_rrule = event_rrule + \"SA\";\r\n                    } else {\r\n                        event_rrule = event_rrule + \",SA\";\r\n                    }\r\n                } else {\r\n                    if (input.event_rrule.includes(\"Sunday\")) {\r\n                        if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                            event_rrule = event_rrule + \"SU\";\r\n                        } else {\r\n                            event_rrule = event_rrule + \",SU\";\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Set the events for the scheduler\r\n                events_datas.push({id: eventId, start: event_start, end: event_end, title: event_name, rrule: event_rrule, resourceId: resourceId, showPopover: false, bgColor: '#06D6A0', database_id: input.id})\r\n            }\r\n            events_datas.sort(sort_events)\r\n            if (events_datas.length === 0) {\r\n                events_datas.push({id: 1, start: getDates()[7] + \" 09:00:00\", end: getDates()[7] + \" 10:00:00\", title: \"Empty\", resourceId: 1, showPopover: false, bgColor: \"#06D6A0\"})\r\n            }\r\n            this.setState({\r\n                events: events_datas,\r\n                dates: [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate, startDate]\r\n            })\r\n        })\r\n    }\r\n\r\n    createNewBook = (book) => {\r\n        const csrftoken = getCookie('csrftoken');\r\n        fetch('/control_interface/api/schedule/', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'X-CSRFToken': csrftoken\r\n            },\r\n            body: JSON.stringify(book),\r\n        })\r\n        .then(response => response.json())\r\n        .then(book => {\r\n            this.setState({books: this.state.books.concat([book])});\r\n        })\r\n    }\r\n\r\n    updateBook = (newBook) => {\r\n        fetch('/control_interface/api/schedule/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook)\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n\r\n            this.setState({books: newBooks});\r\n        })\r\n    }\r\n\r\n    deleteBook = (bookId) => {\r\n        fetch('/control_interface/api/schedule/' + bookId + '/', {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n        })\r\n        .then(() => {\r\n            this.setState({books: this.state.books.filter(book => book.id !== bookId)})\r\n        })\r\n    }\r\n\r\n    chooseMonday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Monday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"selected\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                devices={this.state.devices}\r\n                date={this.state.dates[0]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                startDate={this.state.dates[7]}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Monday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n    }\r\n\r\n    chooseTuesday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Tuesday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                devices={this.state.devices}\r\n                date={this.state.dates[1]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                startDate={this.state.dates[7]}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Tuesday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n    }\r\n\r\n    chooseWednesday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Wednesday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                devices={this.state.devices}\r\n                date={this.state.dates[2]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                startDate={this.state.dates[7]}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Wednesday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n    }\r\n\r\n    chooseThursday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Thursday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                devices={this.state.devices}\r\n                date={this.state.dates[3]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                startDate={this.state.dates[7]}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Thursday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n    }\r\n\r\n    chooseFriday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Friday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"selected\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                devices={this.state.devices}\r\n                date={this.state.dates[4]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                startDate={this.state.dates[7]}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Friday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n    }\r\n\r\n    chooseSaturday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Saturday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                devices={this.state.devices}\r\n                date={this.state.dates[5]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                startDate={this.state.dates[7]}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Saturday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n    }\r\n\r\n    chooseSunday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Sunday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"selected\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                devices={this.state.devices}\r\n                date={this.state.dates[6]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                startDate={this.state.dates[7]}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Sunday\"\r\n                current_user_id={this.state.current_user_id}\r\n            />, document.getElementById(\"root\"));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"tab\">\r\n                    <button id=\"MondayCalendar\" onClick={this.chooseMonday}> Monday </button>\r\n                    <button id=\"TuesdayCalendar\" onClick={this.chooseTuesday}> Tuesday </button>\r\n                    <button id=\"WednesdayCalendar\" onClick={this.chooseWednesday}> Wednesday </button>\r\n                    <button id=\"ThursdayCalendar\" onClick={this.chooseThursday}> Thursday </button>\r\n                    <button id=\"FridayCalendar\" onClick={this.chooseFriday}> Friday </button>\r\n                    <button id=\"SaturdayCalendar\" onClick={this.chooseSaturday}> Saturday </button>\r\n                    <button id=\"SundayCalendar\" onClick={this.chooseSunday}> Sunday </button>\r\n                </div>\r\n                <ScheduleControlItem\r\n                    key={this.state.key}\r\n                    refetchData={this.refetchData}\r\n                    events={this.state.events}\r\n                    devices={this.state.devices}\r\n                    dates={this.state.dates}\r\n                    onDeleteClick={this.deleteBook}\r\n                    onAddClick={this.createNewBook}\r\n                    onUpdateClick={this.updateBook}\r\n                    books={this.state.books}\r\n                    current_user_id={this.state.current_user_id}\r\n                />\r\n                <div id=\"popup-container-schedule\"> </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlItem extends Component {\r\n    render() {\r\n        const days=[\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\r\n        var today = new Date()\r\n        var today_date = today.getFullYear() + \"-\" + ((today.getMonth() + 1).toString().length === 1 ? \"0\" + (today.getMonth() + 1).toString() : (today.getMonth() + 1)) + \"-\" + (today.getDate().toString().length === 1 ? \"0\" + today.getDate().toString() : today.getDate())\r\n        return (\r\n            <div id=\"root\">\r\n                <Calendar\r\n                    refetchData={this.props.refetchData}\r\n                    events={this.props.events}\r\n                    devices={this.props.devices}\r\n                    date={today_date}\r\n                    onDeleteClick={this.props.onDeleteClick}\r\n                    onAddClick={this.props.onAddClick}\r\n                    onUpdateClick={this.props.onUpdateClick}\r\n                    books={this.props.books}\r\n                    startDate={this.props.dates[7]}\r\n                    mondayDate={this.props.dates[0]}\r\n                    sundayDate={this.props.dates[6]}\r\n                    day={days[today.getDay()]}\r\n                    current_user_id={this.props.current_user_id}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<ScheduleControlDashboard />, document.getElementById('schedule-based-control'))\r\n\r\n\r\n// Others\r\n\r\n// Information icons\r\nvar remotecontrolelement = document.getElementById(\"remotecontrolrect\");\r\nvar infoiconremote = document.getElementById(\"infoIconRemote\");\r\nvar scheduleelement = document.getElementById(\"schedulebasedrect\");\r\nvar infoiconschedule = document.getElementById(\"infoIcon\");\r\nvar presenceelement = document.getElementById(\"presencebasedrect\");\r\nvar infoiconpresence = document.getElementById(\"infoIconPresence\");\r\n\r\nwindow.onload = function() {\r\n  let remotecontrolelemRect = remotecontrolelement.getBoundingClientRect();\r\n  let infoiconremoteRect = infoiconremote.getBoundingClientRect();\r\n  let offsetremote = remotecontrolelemRect.right - infoiconremoteRect.right - 10;\r\n  infoiconremote.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxRemote\"}>\r\n          <p style={{color:\"black\"}}> This control feature allows you to manually switch your plug loads ON / OFF wirelessly without having to be physically present at your desk. </p>\r\n        </div>, document.getElementById(\"infoBoxRemote\"));\r\n    document.getElementById(\"informationBoxRemote\").style.width = offsetremote.toString() + \"px\";\r\n    }\r\n  infoiconremote.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxRemote\"));\r\n  }\r\n  let scheduleelemRect = scheduleelement.getBoundingClientRect();\r\n  let infoiconscheduleRect = infoiconschedule.getBoundingClientRect();\r\n  let offsetschedule = scheduleelemRect.right - infoiconscheduleRect.right - 10;\r\n  infoiconschedule.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBox\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps you to automatically switch ON / OFF your plug loads based on a specific schedule that you have defined. </p>\r\n        </div>, document.getElementById(\"infoBox\"));\r\n    document.getElementById(\"informationBox\").style.width = offsetschedule.toString() + \"px\";\r\n    }\r\n  infoiconschedule.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBox\"));\r\n  }\r\n  let presenceelemRect = presenceelement.getBoundingClientRect();\r\n  let infoiconpresenceRect = infoiconpresence.getBoundingClientRect();\r\n  let offsetpresence = presenceelemRect.right - infoiconpresenceRect.right - 10;\r\n  infoiconpresence.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxPresence\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps to automatically switch ON your devices when you arrive at your desk and switch them OFF after you have left your desk after some time. </p>\r\n        </div>, document.getElementById(\"infoBoxPresence\"));\r\n    document.getElementById(\"informationBoxPresence\").style.width = offsetpresence.toString() + \"px\";\r\n    }\r\n  infoiconpresence.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxPresence\"));\r\n  }\r\n}\r\n\r\nwindow.addEventListener('resize', update_infobox_on_resize)\r\n\r\nfunction update_infobox_on_resize() {\r\n  let remotecontrolelemRect = remotecontrolelement.getBoundingClientRect();\r\n  let infoiconremoteRect = infoiconremote.getBoundingClientRect();\r\n  let offsetremote = remotecontrolelemRect.right - infoiconremoteRect.right - 10;\r\n  infoiconremote.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxRemote\"}>\r\n          <p style={{color:\"black\"}}> This control feature allows you to manually switch your plug loads ON / OFF wirelessly without having to be physically present at your desk. </p>\r\n        </div>, document.getElementById(\"infoBoxRemote\"));\r\n    document.getElementById(\"informationBoxRemote\").style.width = offsetremote.toString() + \"px\";\r\n    }\r\n  infoiconremote.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxRemote\"));\r\n  }\r\n  let scheduleelemRect = scheduleelement.getBoundingClientRect();\r\n  let infoiconscheduleRect = infoiconschedule.getBoundingClientRect();\r\n  let offsetschedule = scheduleelemRect.right - infoiconscheduleRect.right - 10;\r\n  infoiconschedule.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBox\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps you to automatically switch ON / OFF your plug loads based on a specific schedule that you have defined. </p>\r\n        </div>, document.getElementById(\"infoBox\"));\r\n    document.getElementById(\"informationBox\").style.width = offsetschedule.toString() + \"px\";\r\n    }\r\n  infoiconschedule.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBox\"));\r\n  }\r\n  let presenceelemRect = presenceelement.getBoundingClientRect();\r\n  let infoiconpresenceRect = infoiconpresence.getBoundingClientRect();\r\n  let offsetpresence = presenceelemRect.right - infoiconpresenceRect.right - 10;\r\n  infoiconpresence.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxPresence\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps to automatically switch ON your devices when you arrive at your desk and switch them OFF after you have left your desk after some time. </p>\r\n        </div>, document.getElementById(\"infoBoxPresence\"));\r\n    document.getElementById(\"informationBoxPresence\").style.width = offsetpresence.toString() + \"px\";\r\n    }\r\n  infoiconpresence.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxPresence\"));\r\n  }\r\n}\r\n\r\n// Fix for Google Chrome\r\nvar isChromium = window.chrome;\r\nvar winNav = window.navigator;\r\nvar vendorName = winNav.vendor;\r\nvar isOpera = typeof window.opr !== \"undefined\";\r\nvar isIEedge = winNav.userAgent.indexOf(\"Edge\") > -1;\r\nvar isIOSChrome = winNav.userAgent.match(\"CriOS\");\r\n\r\nif (isIOSChrome) {\r\n   // is Google Chrome on IOS\r\n   document.onkeydown = function(event) {\r\nif (event.ctrlKey===true || (event.which === '61' || event.which === '107' || event.which === '173' || event.which === '109'  || event.which === '187'  || event.which === '189'  ) ) {\r\n        event.preventDefault();\r\n     }\r\n    // 107 Num Key  +\r\n    // 109 Num Key  -\r\n    // 173 Min Key  hyphen/underscore key\r\n    // 61 Plus key  +/= key\r\n};\r\n} else if(\r\n  isChromium !== null &&\r\n  typeof isChromium !== \"undefined\" &&\r\n  vendorName === \"Google Inc.\" &&\r\n  isOpera === false &&\r\n  isIEedge === false\r\n) {\r\n   // is Google Chrome\r\n   document.onkeydown = function(event) {\r\nif (event.ctrlKey === true || (event.which === '61' || event.which === '107' || event.which === '173' || event.which === '109'  || event.which === '187'  || event.which === '189'  ) ) {\r\n        event.preventDefault();\r\n     }\r\n    // 107 Num Key  +\r\n    // 109 Num Key  -\r\n    // 173 Min Key  hyphen/underscore key\r\n    // 61 Plus key  +/= key\r\n};\r\n} else {\r\n   // not Google Chrome\r\n}\r\n\r\n"],"sourceRoot":""}