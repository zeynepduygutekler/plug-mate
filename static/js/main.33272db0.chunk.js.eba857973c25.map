{"version":3,"sources":["ConfirmAlert.js","withDnDContext.js","OnlyAlert.js","ScheduleControlPopup.js","Calendar.js","index.js"],"names":["ConfirmAlert","state","message","_this","props","onConfirm","onCancel","react_default","a","createElement","class","index_es","icon","faExclamationTriangle","style","color","this","onClick","Component","DragDropContext","HTML5Backend","OnlyAlert","onOK","ScheduleControlPopup","event_rrule","includes","document","getElementById","checked","substring","length","device_type","Fragment","id","closeButtonClicked","defaultValue","event_name","type","faClock","ScheduleControlPopup_ScheduleControlTimepicker","time","event_start","display","marginRight","marginLeft","event_end","ScheduleControlPopup_ScheduleControlRepeat","fontWeight","ScheduleControlPopup_ScheduleControlApply","devices","deleteButtonClicked","faTrash","okButtonClicked","cancelButtonClicked","ScheduleControlTimepicker","hour","Number","am_pm","toString","minute","value","ScheduleControlRepeat","e","target","htmlFor","width","name","ScheduleControlApply","map","device","ScheduleControlPopup_ScheduleControlApplyItem","ScheduleControlApplyItem","replace","from24to12","new_hour","am_or_pm","finalTime","formatForDatabaseAdd","book","rrule","user_id","event_id","start","end","title","device_type_id","resourceId","formatForDatabaseUpdate","n","indexOf","database_id","processHourInput","getDates","today","Date","mondayDate","tuesdayDate","wednesdayDate","thursdayDate","fridayDate","saturdayDate","sundayDate","getDay","setDate","getDate","getFullYear","getMonth","withDragDropContext","Calendar","Object","classCallCheck","_super","call","updateAchievementsBooks","newBook","fetch","method","headers","Content-Type","body","JSON","stringify","then","response","json","newBooks","achievements_books","assign","setState","updateWeeklyAchievementsBooks","weekly_achievements_books","handleAchievementsUpdate","handleWeeklyAchievementsUpdate","handleAchievementsFormSubmit","handleWeeklyAchievementsFormSubmit","isNonWorkingTime","schedulerData","getScrollSpecialMoment","startMoment","endMoment","date","moment","eventClicked","event","slotName","getSlotById","ReactDOM","render","src_ScheduleControlPopup","_step","hasConflict","conflictedEvents","plugload_option","querySelectorAll","repeat_option","new_days_to_loop_over","_iterator","createForOfIteratorHelper","s","done","repeat_day","push","err","f","events","forEach","eStart","eEnd","eRrule","existing_days_to_loop_over","_step2","new_start_for_this","new_end_for_this","existing_start_for_this","existing_end_for_this","_iterator2","new_day","_step3","_iterator3","existing_day","_step4","_iterator4","plugload","resouceId","_step5","_iterator5","_step6","day","_iterator6","current_plugload_conflicted","concat","alert","updateEventStart","window","calendar","updateEventEnd","newFreshId","item","newEvent","database_count","bgColor","showPopover","onAddClick","addEvent","viewModel","onUpdateClick","refetchData","unmountComponentAtNode","first_schedule","objectSpread2","schedule_based","onDeleteClick","removeEvent","slotId","format","toUpperCase","_step7","_iterator7","_step8","_iterator8","_step9","_iterator9","_step10","_iterator10","_step11","_iterator11","_step12","_iterator12","anotherNewEvent","newStart","old_start","_step13","_iterator13","_step14","_iterator14","_step15","_iterator15","_step16","_iterator16","_step17","_iterator17","_step18","_iterator18","newEnd","old_end","_step19","_iterator19","_step20","_iterator20","_step21","_iterator21","_step22","_iterator22","_step23","_iterator23","_step24","_iterator24","moveEvent","_step25","_iterator25","_step26","_iterator26","_step27","_iterator27","_step28","_iterator28","_step29","_iterator29","_step30","_iterator30","conflictOccurred","action","console","log","src_OnlyAlert","SchedulerData","ViewTypes","Day","checkConflict","recurringEventsEnabled","scrollToSpecialMomentEnabled","crossResourceMove","getScrollSpecialMomentFunc","isNonWorkingTimeFunc","setResources","setEvents","assertThisInitialized","lib_default","eventItemClick","_this2","data","_step31","_iterator31","input","_step32","_iterator32","compare","b","comparison","RemoteControlDashboard","books","current_user_id","retrieving","updateBook","sort","datas","src_RemoteControlList","float","RemoteControlList","_this3","src_RemoteControlEditableItem","key","device_state","marginBottom","src_RemoteToggleButton","defaultChecked","margin","RemoteControlEditableItem","handleUpdate","_this4","_this5","src_RemoteControlItem","onFormSubmit","RemoteControlItem","_this6","handleFormSubmit","onConfirm1","to_be_confirmed","Main","first_remote","onConfirm2","onCancel1","to_be_cancelled","onCancel2","onChange","preventDefault","childNodes","src_ConfirmAlert","_this7","remote_control_outer_ring","remote_control_image","className","textAlign","src","alt","data-yes","data-no","RemoteToggleButton","_this8","_super5","click","master","Small","Name","disabled","sort_events","src_RemoteControlDashboard","fetchData","setTimeout","ScheduleControlDashboard","dates","chosen_day","_this9","events_datas","eventId","finalStart","finalEnd","_getDates","_getDates2","slicedToArray","charAt","createNewBook","deleteBook","bookId","filter","removeCalendarHeader","removeChild","addLines","i","j","getElementsByClassName","borderRight","chooseMonday","src_Calendar","chooseTuesday","chooseWednesday","chooseThursday","chooseFriday","chooseSaturday","chooseSunday","_this10","_getDates3","_getDates4","wanted_id","src_ScheduleControlItem","ScheduleControlItem","today_date","src_ScheduleControlDashboard","PresenceControlDashboard","_this11","_this12","src_PresenceControlList","PresenceControlList","_this13","src_PresenceControlEditableItem","presence_setting","PresenceControlEditableItem","_this14","_this15","src_PresenceControlItem","PresenceControlItem","_this16","first_presence","handleSettingUpdate","evt","src_PresenceControlPopup","handleOtherUpdate","handleEnterClick","keyCode","handlePresenceIconClick","_this17","display_value","display_text","presence_control_outer_ring","presence_control_image","exitClick","height","overflowY","position","label","PresenceControlPopup","_this18","onKeyUp","src_PresenceControlDashboard","remotecontrolelement","infoiconremote","scheduleelement","infoiconschedule","presenceelement","infoiconpresence","onload","remotecontrolelemRect","getBoundingClientRect","infoiconremoteRect","offsetremote","right","onmouseover","onmouseout","scheduleelemRect","infoiconscheduleRect","offsetschedule","presenceelemRect","infoiconpresenceRect","offsetpresence","onresize","isChromium","chrome","winNav","navigator","vendorName","vendor","isOpera","opr","isIEedge","userAgent","match","onkeydown","ctrlKey","which"],"mappings":"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","file":"static/js/main.33272db0.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faExclamationTriangle} from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass ConfirmAlert extends Component {\r\n    state = {\r\n        message: this.props.message,\r\n        onConfirm: this.props.onConfirm,\r\n        onCancel: this.props.onCancel\r\n    }\r\n    render() {\r\n        return (\r\n            <div class=\"confirm_alert_overlay\">\r\n                <div class=\"confirm_alert_popup\">\r\n                    <div class=\"confirm_alert_content\">\r\n                        <FontAwesomeIcon icon={faExclamationTriangle} class=\"confirm_alert_icon\"/>\r\n                        <br/>\r\n                        <br/>\r\n                        <p style={{color:\"black\"}}> {this.state.message} </p>\r\n                        <br/>\r\n                        <div class=\"confirm_alert_buttons\">\r\n                            <button class=\"confirm_alert_cancel\" onClick={this.state.onCancel}> Cancel </button>\r\n                            <button class=\"confirm_alert_confirm\" onClick={this.state.onConfirm}> Confirm </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ConfirmAlert;","// This is the component that wraps the calendar in a drag and drop context to allow dragging. \r\n\r\nimport { DragDropContext } from \"react-dnd\";\r\nimport HTML5Backend from \"react-dnd-html5-backend\";\r\n\r\nexport default DragDropContext(HTML5Backend);\r\n","import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faExclamationTriangle} from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass OnlyAlert extends Component {\r\n    state = {\r\n        message: this.props.message,\r\n        onOK: this.props.onOK\r\n    }\r\n    render() {\r\n        return (\r\n            <div class=\"confirm_alert_overlay\">\r\n                <div class=\"confirm_alert_popup\">\r\n                    <div class=\"confirm_alert_content\">\r\n                        <FontAwesomeIcon icon={faExclamationTriangle} class=\"confirm_alert_icon\"/>\r\n                        <br/>\r\n                        <br/>\r\n                        <p style={{color:\"black\"}}> {this.state.message} </p>\r\n                        <br/>\r\n                        <div class=\"confirm_alert_buttons\">\r\n                            <button class=\"alert_ok\" onClick={this.state.onOK}> OK </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default OnlyAlert;","import React, { Component } from 'react';\r\nimport './index.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faClock, faTrash } from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nclass ScheduleControlPopup extends Component {\r\n\r\n    componentDidMount() {\r\n        // Automatically select day\r\n        if (this.props.event_rrule.includes(\"MO,TU,WE,TH,FR,SA,SU\")) {\r\n            document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"MO\")) {\r\n            // Automatically select Monday\r\n            document.getElementById(\"ScheduleRepeatMonday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"TU\")) {\r\n            // Automatically select Tuesday\r\n            document.getElementById(\"ScheduleRepeatTuesday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"WE\")) {\r\n            // Automatically select Wednesday\r\n            document.getElementById(\"ScheduleRepeatWednesday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"TH\")) {\r\n            // Automatically select Thursday\r\n            document.getElementById(\"ScheduleRepeatThursday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"FR\")) {\r\n            // Automatically select Friday\r\n            document.getElementById(\"ScheduleRepeatFriday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"SA\")) {\r\n            // Automatically select Saturday\r\n            document.getElementById(\"ScheduleRepeatSaturday\").checked = true;\r\n        }\r\n        if (this.props.event_rrule.substring(66,this.props.event_rrule.length).includes(\"SU\")) {\r\n            // Automatically select Sunday\r\n            document.getElementById(\"ScheduleRepeatSunday\").checked = true;\r\n        }\r\n\r\n        // Automatically select plug load\r\n        if (this.props.device_type.includes(\"Desktop\")) {\r\n            // Automatically select Desktop\r\n            document.getElementById(\"ScheduleApplyDesktop\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Monitor\")) {\r\n            // Automatically select Monitor\r\n            document.getElementById(\"ScheduleApplyMonitor\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Laptop\")) {\r\n            // Automatically select Laptop\r\n            document.getElementById(\"ScheduleApplyLaptop\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Task Lamp\")) {\r\n            // Automatically select Task Lamp\r\n            document.getElementById(\"ScheduleApplyTaskLamp\").checked = true;\r\n        }\r\n        if (this.props.device_type.includes(\"Fan\")) {\r\n            // Automatically select Fan\r\n            document.getElementById(\"ScheduleApplyFan\").checked = true;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div id=\"schedule_popup_overlay\" onClick={this.props.closeButtonClicked}>\r\n                    <div id=\"schedule_popup\">\r\n                        <p id=\"schedule_device_type\"> {this.props.device_type} </p>\r\n                        <button id=\"schedule_popup_close\" onClick={this.props.closeButtonClicked}> &times; </button>\r\n                        <br/>\r\n                        <input id=\"schedule_name_input\" defaultValue={this.props.event_name.substring(0,this.props.event_name.length-22)} type=\"text\" />\r\n                        <div id=\"schedule_time_input\">\r\n                            <FontAwesomeIcon icon={faClock} style={{color:\"#4E73DF\"}} />\r\n                            <ScheduleControlTimepicker type=\"Start\" time={this.props.event_start.substring(this.props.event_start.length-8, this.props.event_start.length)} />\r\n                            <p style={{display: \"inline-block\", marginRight:\"-5px\", marginLeft:\"5px\"}}> - </p>\r\n                            <ScheduleControlTimepicker type=\"End\" time={this.props.event_end.substring(this.props.event_end.length-8, this.props.event_end.length)} />\r\n                        </div>\r\n                        <div id=\"schedule_repeat_input\">\r\n                            <ScheduleControlRepeat />\r\n                        </div>\r\n                        <div id=\"schedule_apply_input\">\r\n                            <p style={{fontWeight:\"bold\"}}> Also apply to: </p>\r\n                            <ScheduleControlApply devices={[\"Desktop\", \"Monitor\", \"Laptop\", \"Fan\", \"Task Lamp\"]} />\r\n                        </div>\r\n                        <br/>\r\n                        <button id=\"schedule_popup_delete\" onClick={this.props.deleteButtonClicked}> <FontAwesomeIcon icon={faTrash} style={{color:\"#E74A3B\"}} /> </button>\r\n                        <button id=\"schedule_popup_ok\" onClick={this.props.okButtonClicked}> OK </button>\r\n                        <button id=\"schedule_popup_cancel\" onClick={this.props.cancelButtonClicked}> Cancel </button>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlTimepicker extends Component {\r\n    render() {\r\n        var hour = this.props.time.substring(0,2);\r\n        if (Number(hour) >= 12) {\r\n            var am_pm = \"PM\"\r\n        } else {\r\n            am_pm = \"AM\"\r\n        }\r\n        if (Number(hour) > 12 && Number(hour) < 22) {\r\n            hour = \"0\" + (Number(hour)-12).toString();\r\n        } else {\r\n            if (Number(hour) >= 22) {\r\n                hour = (Number(hour)-12).toString();\r\n            } else {\r\n                if (hour === \"00\") {\r\n                    hour = \"12\"\r\n                }\r\n            }\r\n        }\r\n        var minute = this.props.time.substring(3,5);\r\n\r\n\r\n\r\n        return (\r\n            <div id={this.props.type + \"Time\"}>\r\n                <select id={this.props.type + \"Hour\"} defaultValue={hour}>\r\n                    <option value=\"01\"> 1 </option>\r\n                    <option value=\"02\"> 2 </option>\r\n                    <option value=\"03\"> 3 </option>\r\n                    <option value=\"04\"> 4 </option>\r\n                    <option value=\"05\"> 5 </option>\r\n                    <option value=\"06\"> 6 </option>\r\n                    <option value=\"07\"> 7 </option>\r\n                    <option value=\"08\"> 8 </option>\r\n                    <option value=\"09\"> 9 </option>\r\n                    <option value=\"10\"> 10 </option>\r\n                    <option value=\"11\"> 11 </option>\r\n                    <option value=\"12\"> 12 </option>\r\n                </select>\r\n                <span style={{marginLeft:\"-10px\", marginRight:\"1px\"}}> : </span>\r\n                <select id={this.props.type + \"Minute\"} defaultValue={minute}>\r\n                    <option value=\"00\"> 00 </option>\r\n                    <option value=\"15\"> 15 </option>\r\n                    <option value=\"30\"> 30 </option>\r\n                    <option value=\"45\"> 45 </option>\r\n                </select>\r\n                <select id={this.props.type + \"AMPM\"} defaultValue={am_pm}>\r\n                    <option value=\"AM\"> AM </option>\r\n                    <option value=\"PM\"> PM </option>\r\n                </select>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlRepeat extends Component {\r\n    render() {\r\n        return (\r\n            <>\r\n                <p style={{fontWeight:\"bold\"}}> Repeat: </p>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id=\"ScheduleRepeatEveryDay\"\r\n                    value=\"Every Day\"\r\n                    onClick={function(e) {\r\n                        if (e.target.checked) {\r\n                            document.getElementById(\"ScheduleRepeatMonday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatTuesday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatWednesday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatThursday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatFriday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatSaturday\").checked = true;\r\n                            document.getElementById(\"ScheduleRepeatSunday\").checked = true;\r\n                        } else {\r\n                            document.getElementById(\"ScheduleRepeatMonday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatTuesday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatWednesday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatThursday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatFriday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatSaturday\").checked = false;\r\n                            document.getElementById(\"ScheduleRepeatSunday\").checked = false;\r\n                        }\r\n                    }}\r\n                />\r\n                <label htmlFor=\"ScheduleRepeatEveryDay\"> Every Day </label>\r\n                <br />\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Monday\"\r\n                        id=\"ScheduleRepeatMonday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatTuesday\").checked && document.getElementById(\"ScheduleRepeatWednesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatThursday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label> Monday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Tuesday\"\r\n                        id=\"ScheduleRepeatTuesday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatWednesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatThursday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label> Tuesday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Wednesday\"\r\n                        id=\"ScheduleRepeatWednesday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatThursday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label> Wednesday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Thursday\"\r\n                        id=\"ScheduleRepeatThursday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatFriday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label> Thursday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Friday\"\r\n                        id=\"ScheduleRepeatFriday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatThursday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatSaturday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label> Friday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Saturday\"\r\n                        id=\"ScheduleRepeatSaturday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatThursday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatFriday\").checked && document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label> Saturday </label>\r\n                </div>\r\n                <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        name=\"ScheduleRepeatOption\"\r\n                        value=\"Sunday\"\r\n                        id=\"ScheduleRepeatSunday\"\r\n                        onClick={function(e) {\r\n                            if (!e.target.checked) {\r\n                                document.getElementById(\"ScheduleRepeatEveryDay\").checked = false;\r\n                            } else {\r\n                                if (document.getElementById(\"ScheduleRepeatMonday\").checked && document.getElementById(\"ScheduleRepeatTuesday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatWednesday\").checked && document.getElementById(\"ScheduleRepeatThursday\").checked &&\r\n                                    document.getElementById(\"ScheduleRepeatFriday\").checked && document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                                        document.getElementById(\"ScheduleRepeatEveryDay\").checked = true;\r\n                                    }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <label> Sunday </label>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlApply extends Component {\r\n    render() {\r\n        const devices = this.props.devices.map(device =>\r\n            <ScheduleControlApplyItem device_type={device} />\r\n        )\r\n        return(\r\n            <>\r\n                {devices}\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlApplyItem extends Component {\r\n    render() {\r\n        return (\r\n            <div style={{display:\"inline-block\", width:\"130px\"}}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name=\"ScheduleApplyOption\"\r\n                    id={\"ScheduleApply\" + this.props.device_type.replace(/\\s/g,'')}\r\n                />\r\n                <label> {this.props.device_type} </label>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default ScheduleControlPopup;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport moment from 'moment';\r\nimport Scheduler, { SchedulerData, ViewTypes } from 'react-big-scheduler';\r\nimport 'react-big-scheduler/lib/css/style.css';\r\nimport withDragDropContext from './withDnDContext';\r\nimport OnlyAlert from './OnlyAlert';\r\nimport ScheduleControlPopup from './ScheduleControlPopup'\r\nimport './index.css';\r\n\r\nfunction from24to12(hour) {\r\n    var new_hour = Number(hour.substring(0,2));\r\n    var am_or_pm = new_hour >= 12 ? \"PM\" : \"AM\";\r\n    new_hour = (new_hour % 12) || 12;\r\n    var finalTime = new_hour + \":\" + hour.substring(3,5) + \" \" + am_or_pm;\r\n\r\n    if (finalTime.length !== 8) {\r\n        finalTime = \"0\" + finalTime\r\n    }\r\n    return (finalTime);\r\n}\r\n\r\nfunction formatForDatabaseAdd(book) {\r\n    var event_rrule = \"\"\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"MO\")) {\r\n        event_rrule = event_rrule + \"Monday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TU\")) {\r\n        event_rrule = event_rrule + \"Tuesday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"WE\")) {\r\n        event_rrule = event_rrule + \"Wednesday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TH\")) {\r\n        event_rrule = event_rrule + \"Thursday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"FR\")) {\r\n        event_rrule = event_rrule + \"Friday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SA\")) {\r\n        event_rrule = event_rrule + \"Saturday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SU\")) {\r\n        event_rrule = event_rrule + \"Sunday, \"\r\n    }\r\n\r\n\r\n    const devices = [\"Desktop\", \"Monitor\", \"Laptop\", \"Task Lamp\", \"Fan\"]\r\n\r\n    return({\r\n        user_id: 1,\r\n        event_id: book.id,\r\n        event_start: book.start.substring(book.start.length-8, book.start.length),\r\n        event_end: book.end.substring(book.end.length-8, book.end.length),\r\n        event_name: book.title.substring(0, book.title.length-22),\r\n        event_rrule: event_rrule.substring(0,event_rrule.length-2),\r\n        device_type_id: book.resourceId,\r\n        device_type: devices[book.resourceId - 1]\r\n    })\r\n}\r\n\r\nfunction formatForDatabaseUpdate(book) {\r\n    var event_rrule = \"\"\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"MO\")) {\r\n        event_rrule = event_rrule + \"Monday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TU\")) {\r\n        event_rrule = event_rrule + \"Tuesday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"WE\")) {\r\n        event_rrule = event_rrule + \"Wednesday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"TH\")) {\r\n        event_rrule = event_rrule + \"Thursday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"FR\")) {\r\n        event_rrule = event_rrule + \"Friday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SA\")) {\r\n        event_rrule = event_rrule + \"Saturday, \"\r\n    }\r\n    if (book.rrule.substring(60,book.rrule.length).includes(\"SU\")) {\r\n        event_rrule = event_rrule + \"Sunday, \"\r\n    }\r\n\r\n    const devices = [\"Desktop\", \"Monitor\", \"Laptop\", \"Task Lamp\", \"Fan\"]\r\n\r\n    if (typeof book.id === \"string\") {\r\n        var n = book.id.indexOf(\"-\")\r\n        var event_id = Number(book.id.substring(0,n))\r\n    } else {\r\n        event_id = book.id\r\n    }\r\n    return({\r\n        user_id: 1,\r\n        event_id: event_id,\r\n        event_start: book.start.substring(book.start.length-8, book.start.length),\r\n        event_end: book.end.substring(book.end.length-8, book.end.length),\r\n        event_name: book.title.substring(0, book.title.length-22),\r\n        event_rrule: event_rrule.substring(0,event_rrule.length-2),\r\n        device_type_id: book.resourceId,\r\n        device_type: devices[book.resourceId - 1],\r\n        id: book.database_id\r\n    })\r\n}\r\n\r\nfunction processHourInput(type) {\r\n    var hour = document.getElementById(type + \"Hour\").value;\r\n    if (document.getElementById(type + \"AMPM\").value === \"PM\") {\r\n        if (document.getElementById(type + \"Hour\").value !== \"12\") {\r\n            hour = (Number(document.getElementById(type + \"Hour\").value) + 12).toString();\r\n        }\r\n    } else {\r\n        if (document.getElementById(type + \"Hour\").value === \"12\") {\r\n            hour = \"00\";\r\n        }\r\n    }\r\n    return(hour)\r\n}\r\n\r\nfunction getDates() {\r\n    var today = new Date();\r\n    var mondayDate = new Date();\r\n    var tuesdayDate = new Date();\r\n    var wednesdayDate = new Date();\r\n    var thursdayDate = new Date();\r\n    var fridayDate = new Date();\r\n    var saturdayDate = new Date();\r\n    var sundayDate = new Date();\r\n\r\n    if (today.getDay() === 0) {\r\n        // Today is Sunday\r\n        mondayDate.setDate(today.getDate() - 6);\r\n        tuesdayDate.setDate(today.getDate() - 5);\r\n        wednesdayDate.setDate(today.getDate() - 4);\r\n        thursdayDate.setDate(today.getDate() - 3);\r\n        fridayDate.setDate(today.getDate() - 2);\r\n        saturdayDate.setDate(today.getDate() - 1);\r\n        sundayDate.setDate(today.getDate());\r\n    } else {\r\n        mondayDate.setDate(today.getDate() + (1 - today.getDay()));\r\n        tuesdayDate.setDate(today.getDate() + (2 - today.getDay()));\r\n        wednesdayDate.setDate(today.getDate() + (3 - today.getDay()));\r\n        thursdayDate.setDate(today.getDate() + (4 - today.getDay()));\r\n        fridayDate.setDate(today.getDate() + (5 - today.getDay()));\r\n        saturdayDate.setDate(today.getDate() + (6 - today.getDay()));\r\n        sundayDate.setDate(today.getDate() + (7 - today.getDay()));\r\n    }\r\n\r\n    mondayDate = mondayDate.getFullYear() + \"-\" + ((mondayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (mondayDate.getMonth() + 1).toString() : (mondayDate.getMonth() + 1)) + \"-\" + (mondayDate.getDate().toString().length === 1 ? \"0\" + mondayDate.getDate().toString() : mondayDate.getDate())\r\n    tuesdayDate = tuesdayDate.getFullYear() + \"-\" + ((tuesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (tuesdayDate.getMonth() + 1).toString() : (tuesdayDate.getMonth() + 1)) + \"-\" + (tuesdayDate.getDate().toString().length === 1 ? \"0\" + tuesdayDate.getDate().toString() : tuesdayDate.getDate())\r\n    wednesdayDate = wednesdayDate.getFullYear() + \"-\" + ((wednesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (wednesdayDate.getMonth() + 1).toString() : (wednesdayDate.getMonth() + 1)) + \"-\" + (wednesdayDate.getDate().toString().length === 1 ? \"0\" + wednesdayDate.getDate().toString() : wednesdayDate.getDate())\r\n    thursdayDate = thursdayDate.getFullYear() + \"-\" + ((thursdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (thursdayDate.getMonth() + 1).toString() : (thursdayDate.getMonth() + 1))  + \"-\" + (thursdayDate.getDate().toString().length === 1 ? \"0\" + thursdayDate.getDate().toString() : thursdayDate.getDate())\r\n    fridayDate = fridayDate.getFullYear() + \"-\" + ((fridayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (fridayDate.getMonth() + 1).toString() : (fridayDate.getMonth() + 1)) + \"-\" + (fridayDate.getDate().toString().length === 1 ? \"0\" + fridayDate.getDate().toString() : fridayDate.getDate())\r\n    saturdayDate = saturdayDate.getFullYear() + \"-\" + ((saturdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (saturdayDate.getMonth() + 1).toString() : (saturdayDate.getMonth() + 1)) + \"-\" + (saturdayDate.getDate().toString().length === 1 ? \"0\" + saturdayDate.getDate().toString() : saturdayDate.getDate())\r\n    sundayDate = sundayDate.getFullYear() + \"-\" + ((sundayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (sundayDate.getMonth() + 1).toString() : (sundayDate.getMonth() + 1)) + \"-\" + (sundayDate.getDate().toString().length === 1 ? \"0\" + sundayDate.getDate().toString() : sundayDate.getDate())\r\n\r\n    return([mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate])\r\n}\r\n\r\nclass Calendar extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let schedulerData = new SchedulerData(\r\n            this.props.date,\r\n            ViewTypes.Day,\r\n            false,\r\n            false,\r\n            {\r\n                checkConflict: true,\r\n                recurringEventsEnabled: true,\r\n                scrollToSpecialMomentEnabled: true,\r\n                crossResourceMove: false\r\n            }, {\r\n                getScrollSpecialMomentFunc: this.getScrollSpecialMoment,\r\n                isNonWorkingTimeFunc: this.isNonWorkingTime\r\n            }\r\n        );\r\n        schedulerData.setResources([{id:1, name:\"Desktop\"}, {id:5, name:\"Fan\"}, {id:3, name:\"Laptop\"}, {id:2, name:\"Monitor\"}, {id:4, name:\"Task Lamp\"}]);\r\n        schedulerData.setEvents(this.props.events);\r\n        this.state = {\r\n            viewModel: schedulerData,\r\n            database_count: this.props.database_count,\r\n            achievements_books: [],\r\n            weekly_achievements_books: [],\r\n            user_id: 1\r\n        };\r\n        window.calendar = this;\r\n    }\r\n\r\n    render() {\r\n        const { viewModel } = this.state;\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Scheduler\r\n                        schedulerData={viewModel}\r\n                        eventItemClick={this.eventClicked}\r\n                        updateEventStart={this.updateEventStart}\r\n                        updateEventEnd={this.updateEventEnd}\r\n                        moveEvent={this.moveEvent}\r\n                        newEvent={this.newEvent}\r\n                        conflictOccurred={this.conflictOccurred}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data for achievements\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            for (var input of data) {\r\n                if (input.user_id === this.state.user_id) {\r\n                    this.setState({achievements_books: [input]})\r\n                }\r\n            }\r\n        })\r\n\r\n        // Fetch data for weekly achievements\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_weekly/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            for (var input of data) {\r\n                if (input.user_id === this.state.user_id) {\r\n                    this.setState({weekly_achievements_books: [input]})\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    updateAchievementsBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    updateWeeklyAchievementsBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_weekly/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.weekly_achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({weekly_achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    handleAchievementsUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updateAchievementsBooks(book);\r\n    }\r\n\r\n    handleWeeklyAchievementsUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updateWeeklyAchievementsBooks(book);\r\n    }\r\n\r\n    handleAchievementsFormSubmit = () => {\r\n        this.handleAchievementsUpdate(this.state.achievements_books[0])\r\n    }\r\n\r\n    handleWeeklyAchievementsFormSubmit = () => {\r\n        this.handleWeeklyAchievementsUpdate(this.state.weekly_achievements_books[0])\r\n    }\r\n\r\n    isNonWorkingTime = (schedulerData, time) => {\r\n        return true;\r\n    }\r\n\r\n    getScrollSpecialMoment = (schedulerData, startMoment, endMoment) => {\r\n        var time = this.props.date + \" 07:00:00\";\r\n        return moment(time);\r\n    }\r\n\r\n    eventClicked = (schedulerData, event) => {\r\n        var slotName = schedulerData.getSlotById(event.resourceId).name;\r\n\r\n        function closeButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function deleteButtonClicked() {\r\n            // Update database (Delete)\r\n            window.calendar.props.onDeleteClick(event.database_id)\r\n            window.calendar.props.refetchData();\r\n\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            });\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function cancelButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + event.start.substring(10,19);\r\n                    new_end_for_this = new_day + event.end.substring(10,19);\r\n                    if (e.resourceId === event.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== event.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== event.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occured for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                              document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                              document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                              document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                // If first time clicking, update achievement\r\n                if (this.state.achievements_books[0].first_schedule === 0) {\r\n                    this.setState({\r\n                        achievements_books: [\r\n                            {\r\n                                ...this.state.achievements_books[0],\r\n                                first_schedule: 70\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n\r\n                // Update weekly achievement\r\n                if (this.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    this.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...this.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n         ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={event.start}\r\n                event_end={event.end}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                cancelButtonClicked={cancelButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    newEvent = (schedulerData, slotId, slotName, start, end, type, item) => {\r\n        let newFreshId = 0;\r\n        schedulerData.events.forEach(item => {\r\n            if (item.database_id >= newFreshId) newFreshId = item.database_id + 1;\r\n        });\r\n\r\n        let newEvent = {\r\n            id: newFreshId,\r\n            title: \"(no name) (\" + moment(start).format(\"hh:mm A\") + \" - \" + moment(end).format(\"hh:mm A\") + \")\",\r\n            start: start,\r\n            end: end,\r\n            resourceId: slotId,\r\n            bgColor: \"#06D6A0\",\r\n            showPopover: false,\r\n            rrule: \"FREQ=WEEKLY;DTSTART=\" + this.props.mondayDate.substring(0,4) + this.props.mondayDate.substring(5,7) + this.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" + this.props.sundayDate.substring(0,4) + this.props.sundayDate.substring(5,7) + this.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\" + this.props.day.substring(0,2).toUpperCase()\r\n        }\r\n\r\n        schedulerData.addEvent(newEvent);\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            // Update database (Add)\r\n            window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent))\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n        function deleteButtonClicked() {\r\n            schedulerData.removeEvent(newEvent);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n            // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + newEvent.start.substring(10,19);\r\n                    new_end_for_this = new_day + newEvent.end.substring(10,19);\r\n                    if (e.resourceId === newEvent.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== newEvent.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== newEvent.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occured for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,events.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                newEvent.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                                 document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                                 document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                                 document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(newEvent, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(newEvent, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    newEvent.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    newEvent.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let anotherNewEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: newEvent.title,\r\n                        start: newEvent.start,\r\n                        end: newEvent.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: newEvent.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(anotherNewEvent));\r\n                    schedulerData.addEvent(anotherNewEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                // If first time clicking, update achievement\r\n                if (this.state.achievements_books[0].first_schedule === 0) {\r\n                    this.setState({\r\n                        achievements_books: [\r\n                            {\r\n                                ...this.state.achievements_books[0],\r\n                                first_schedule: 70\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n\r\n                // Update weekly achievement\r\n                if (this.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    this.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...this.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        function cancelButtonClicked() {\r\n            schedulerData.removeEvent(newEvent);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Add Schedule: \" + slotName}\r\n                event_rrule={newEvent.rrule}\r\n                event_start={newEvent.start}\r\n                event_end={newEvent.end}\r\n                event_name={newEvent.title}\r\n                okButtonClicked={okButtonClicked}\r\n                cancelButtonClicked={cancelButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    updateEventStart = (schedulerData, event, newStart) => {\r\n        var old_start = event.start;\r\n        schedulerData.updateEventStart(event, newStart);\r\n        event.title = event.title.substring(0, event.title.length - 20) + \" (\" + from24to12(moment(newStart).format('HH:mm')) + \" - \" + from24to12(moment(event.end).format('HH:mm')) + \")\";\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            // Update database (Update)\r\n            window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event));\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n        function deleteButtonClicked() {\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n\r\n            // Update database\r\n            window.calendar.props.onDeleteClick(event.database_id);\r\n            window.calendar.props.refetchData();\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n                        // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + event.start.substring(10,19);\r\n                    new_end_for_this = new_day + event.end.substring(10,19);\r\n                    if (e.resourceId === event.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== event.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== event.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occured for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                              document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                              document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                              document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                // If first time clicking, update achievement\r\n                if (this.state.achievements_books[0].first_schedule === 0) {\r\n                    this.setState({\r\n                        achievements_books: [\r\n                            {\r\n                                ...this.state.achievements_books[0],\r\n                                first_schedule: 70\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n\r\n                // Update weekly achievement\r\n                if (this.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    this.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...this.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        function cancelButtonClicked() {\r\n            // Cancel update start\r\n            schedulerData.updateEventStart(event, old_start);\r\n            event.title = event.title.substring(0, event.title.length - 20) + \" (\" + from24to12(moment(old_start).format('HH:mm')) + \" - \" + from24to12(moment(event.end).format('HH:mm')) + \")\";\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        var slotName = schedulerData.getSlotById(event.resourceId).name;\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={newStart}\r\n                event_end={event.end}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                cancelButtonClicked={cancelButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    updateEventEnd = (schedulerData, event, newEnd) => {\r\n        var old_end = event.end;\r\n        schedulerData.updateEventEnd(event, newEnd);\r\n        event.title = event.title.substring(0, event.title.length - 20) + \" (\" + from24to12(moment(event.start).format('HH:mm')) + \" - \" + from24to12(moment(newEnd).format('HH:mm')) + \")\";\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Update database (Update)\r\n            window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event));\r\n            window.calendar.props.refetchData();\r\n        }\r\n        function deleteButtonClicked() {\r\n            // Update database (Delete)\r\n            window.calendar.props.onDeleteClick(event.database_id)\r\n            window.calendar.props.refetchData();\r\n\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n                        // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + event.start.substring(10,19);\r\n                    new_end_for_this = new_day + event.end.substring(10,19);\r\n                    if (e.resourceId === event.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== event.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== event.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occured for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                              document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                              document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                              document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                // If first time clicking, update achievement\r\n                if (this.state.achievements_books[0].first_schedule === 0) {\r\n                    this.setState({\r\n                        achievements_books: [\r\n                            {\r\n                                ...this.state.achievements_books[0],\r\n                                first_schedule: 70\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n\r\n                // Update weekly achievement\r\n                if (this.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    this.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...this.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        function cancelButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Cancel update end\r\n            schedulerData.updateEventEnd(event, old_end);\r\n            event.title = event.title.substring(0, event.title.length - 20) + \" (\" + from24to12(moment(event.start).format('HH:mm')) + \" - \" + from24to12(moment(old_end).format('HH:mm')) + \")\";\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n        }\r\n\r\n        var slotName = schedulerData.getSlotById(event.resourceId).name;\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={event.start}\r\n                event_end={newEnd}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                cancelButtonClicked={cancelButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    moveEvent = (schedulerData, event, slotId, slotName, start, end) => {\r\n        var old_start = event.start;\r\n        var old_end = event.end;\r\n        schedulerData.updateEventStart(event, start);\r\n        schedulerData.updateEventEnd(event, end);\r\n        event.title = event.title.substring(0, event.title.length - 20) + \" (\" + from24to12(moment(start).format('HH:mm')) + \" - \" + from24to12(moment(end).format('HH:mm')) + \")\";\r\n        this.setState({\r\n            viewModel: schedulerData\r\n        })\r\n\r\n        function closeButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Update database (Update)\r\n            window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event));\r\n            window.calendar.props.refetchData();\r\n        }\r\n\r\n        function deleteButtonClicked() {\r\n            // Update database (Delete)\r\n            window.calendar.props.onDeleteClick(event.database_id);\r\n            window.calendar.props.refetchData();\r\n\r\n            // Update calendar\r\n            schedulerData.removeEvent(event);\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n        }\r\n\r\n        function okButtonClicked() {\r\n                        // Checking conflicts\r\n            var hasConflict = false;\r\n            var conflictedEvents = [];\r\n            var plugload_option = document.querySelectorAll('input[name=\"ScheduleApplyOption\"]:checked');\r\n            var repeat_option = document.querySelectorAll('input[name=\"ScheduleRepeatOption\"]:checked');\r\n            var new_days_to_loop_over = [];\r\n            for (var repeat_day of repeat_option) {\r\n                if (repeat_day.value === \"Monday\") {\r\n                    new_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (repeat_day.value === \"Tuesday\") {\r\n                    new_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (repeat_day.value === \"Wednesday\") {\r\n                    new_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (repeat_day.value === \"Thursday\") {\r\n                    new_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (repeat_day.value === \"Friday\") {\r\n                    new_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (repeat_day.value === \"Saturday\") {\r\n                    new_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (repeat_day.value === \"Sunday\") {\r\n                    new_days_to_loop_over.push(getDates()[6])\r\n                }\r\n            }\r\n\r\n            schedulerData.events.forEach(function(e) {\r\n                var eStart = e.start;\r\n                var eEnd = e.end;\r\n                var eRrule = e.rrule;\r\n                var existing_days_to_loop_over = [];\r\n                if (eRrule.substring(60, eRrule.length).includes(\"MO\")) {\r\n                    existing_days_to_loop_over.push(getDates()[0])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[1])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"WE\")) {\r\n                    existing_days_to_loop_over.push(getDates()[2])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"TH\")) {\r\n                    existing_days_to_loop_over.push(getDates()[3])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"FR\")) {\r\n                    existing_days_to_loop_over.push(getDates()[4])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SA\")) {\r\n                    existing_days_to_loop_over.push(getDates()[5])\r\n                }\r\n                if (eRrule.substring(60, eRrule.length).includes(\"SU\")) {\r\n                    existing_days_to_loop_over.push(getDates()[6])\r\n                }\r\n\r\n                var new_start_for_this = \"\";\r\n                var new_end_for_this = \"\";\r\n                var existing_start_for_this = \"\";\r\n                var existing_end_for_this = \"\";\r\n                for (var new_day of new_days_to_loop_over) {\r\n                    new_start_for_this = new_day + event.start.substring(10,19);\r\n                    new_end_for_this = new_day + event.end.substring(10,19);\r\n                    if (e.resourceId === event.resourceId) {\r\n                        for (var existing_day of existing_days_to_loop_over) {\r\n                            existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                            existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                            if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                  (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                  (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                  (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                  (e.id !== event.id)) {\r\n                                    hasConflict = true;\r\n                                    conflictedEvents.push(e);\r\n                                    break\r\n                            }\r\n                        }\r\n                    }\r\n                    for (var plugload of plugload_option) {\r\n                        if (e.resouceId === plugload.value) {\r\n                            for (var existing_day of existing_days_to_loop_over) {\r\n                                existing_start_for_this = existing_day + eStart.substring(10,19);\r\n                                existing_end_for_this = existing_day + eEnd.substring(10,19);\r\n                                if (((new_start_for_this >= existing_start_for_this && new_start_for_this < existing_end_for_this) ||\r\n                                      (new_end_for_this > existing_start_for_this && new_end_for_this <= existing_end_for_this) ||\r\n                                      (existing_start_for_this >= new_start_for_this && existing_start_for_this < new_end_for_this) ||\r\n                                      (existing_end_for_this > new_start_for_this && existing_end_for_this <= new_end_for_this)) &&\r\n                                      (e.id !== event.id)) {\r\n                                        hasConflict = true;\r\n                                        conflictedEvents.push(e);\r\n                                        break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            if (hasConflict) {\r\n                var message = \"Conflict occured for the following events:\"\r\n                var day = \"\"\r\n                for (var events of conflictedEvents) {\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"MO\")) {\r\n                        day = \"Monday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TU\")) {\r\n                        day = \"Tuesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"WE\")) {\r\n                        day = \"Wednesday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"TH\")) {\r\n                        day = \"Thursday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"FR\")) {\r\n                        day = \"Friday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SA\")) {\r\n                        day = \"Saturday,\"\r\n                    }\r\n                    if (events.rrule.substring(60,event.rrule.length).includes(\"SU\")) {\r\n                        day = \"Sunday,\"\r\n                    }\r\n                    var current_plugload_conflicted = schedulerData.getSlotById(events.resourceId).name\r\n                    message += `\\n- ${events.title} for ${current_plugload_conflicted} on ${day.substring(0,day.length-1)}`\r\n                }\r\n                alert(message)\r\n            } else {\r\n                // Rename\r\n                event.title = document.getElementById(\"schedule_name_input\").value + \" (\" +\r\n                              document.getElementById(\"StartHour\").value + \":\" + document.getElementById(\"StartMinute\").value + \" \" +\r\n                              document.getElementById(\"StartAMPM\").value + \" - \" + document.getElementById(\"EndHour\").value + \":\" +\r\n                              document.getElementById(\"EndMinute\").value + \" \" + document.getElementById(\"EndAMPM\").value + \")\";\r\n\r\n                // Update start\r\n                schedulerData.updateEventStart(event, window.calendar.props.date + \" \" + processHourInput(\"Start\") + \":\" + document.getElementById(\"StartMinute\").value + \":00\");\r\n\r\n                // Update end\r\n                schedulerData.updateEventEnd(event, window.calendar.props.date + \" \" + processHourInput(\"End\") + \":\" + document.getElementById(\"EndMinute\").value + \":00\")\r\n\r\n                // Update repeat\r\n                var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + window.calendar.props.mondayDate.substring(0,4) +\r\n                                  window.calendar.props.mondayDate.substring(5,7) +\r\n                                  window.calendar.props.mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" +\r\n                                  window.calendar.props.sundayDate.substring(0,4) +\r\n                                  window.calendar.props.sundayDate.substring(5,7) +\r\n                                  window.calendar.props.sundayDate.substring(8,10) + \"T235900Z;BYDAY=\"\r\n                if (document.getElementById(\"ScheduleRepeatEveryDay\").checked) {\r\n                    // Repeat Every Day\r\n                    event.rrule = event_rrule + \"MO,TU,WE,TH,FR,SA,SU\";\r\n                } else {\r\n                    if (document.getElementById(\"ScheduleRepeatMonday\").checked) {\r\n                        event_rrule = event_rrule + \"MO,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatTuesday\").checked) {\r\n                        event_rrule = event_rrule + \"TU,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatWednesday\").checked) {\r\n                        event_rrule = event_rrule + \"WE,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatThursday\").checked) {\r\n                        event_rrule = event_rrule + \"TH,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatFriday\").checked) {\r\n                        event_rrule = event_rrule + \"FR,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSaturday\").checked) {\r\n                        event_rrule = event_rrule + \"SA,\"\r\n                    }\r\n                    if (document.getElementById(\"ScheduleRepeatSunday\").checked) {\r\n                        event_rrule = event_rrule + \"SU,\"\r\n                    }\r\n                    event.rrule = event_rrule.substring(0,event_rrule.length-1)\r\n                }\r\n\r\n                // Apply to other devices\r\n                document.getElementById(\"ScheduleApply\" + slotName).checked = false;\r\n                if (document.getElementById(\"ScheduleApplyDesktop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 1,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyMonitor\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 2,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyLaptop\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 3,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyTaskLamp\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 4,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n                if (document.getElementById(\"ScheduleApplyFan\").checked) {\r\n                    let newFreshId = 0;\r\n                    schedulerData.events.forEach(item => {\r\n                        if (item.database_id >= newFreshId || item.id >= newFreshId) {\r\n                            newFreshId = item.database_id;\r\n                        }\r\n                    })\r\n                    let newEvent = {\r\n                        database_id: window.calendar.state.database_count+1,\r\n                        id: newFreshId,\r\n                        title: event.title,\r\n                        start: event.start,\r\n                        end: event.end,\r\n                        resourceId: 5,\r\n                        bgColor: \"#06D6A0\",\r\n                        showPopover: false,\r\n                        rrule: event.rrule\r\n                    }\r\n                    window.calendar.props.onAddClick(formatForDatabaseAdd(newEvent));\r\n                    schedulerData.addEvent(newEvent);\r\n                    window.calendar.setState({\r\n                        viewModel: schedulerData,\r\n                        database_count: window.calendar.state.database_count + 1\r\n                    })\r\n                }\r\n\r\n                // Update calendar\r\n                window.calendar.setState({\r\n                    viewModel: schedulerData\r\n                })\r\n\r\n                // Update database (Update)\r\n                window.calendar.props.onUpdateClick(formatForDatabaseUpdate(event));\r\n                window.calendar.props.refetchData();\r\n\r\n                ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n                // If first time clicking, update achievement\r\n                if (this.state.achievements_books[0].first_schedule === 0) {\r\n                    this.setState({\r\n                        achievements_books: [\r\n                            {\r\n                                ...this.state.achievements_books[0],\r\n                                first_schedule: 70\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n\r\n                // Update weekly achievement\r\n                if (this.state.weekly_achievements_books[0].schedule_based === 0) {\r\n                    this.setState({\r\n                        weekly_achievements_books: [\r\n                            {\r\n                                ...this.state.weekly_achievements_books[0],\r\n                                schedule_based: 20\r\n                            }\r\n                        ]\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        function cancelButtonClicked() {\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(\"popup-container-schedule\"));\r\n\r\n            // Cancel move event\r\n            schedulerData.updateEventStart(event, old_start);\r\n            schedulerData.updateEventEnd(event, old_end);\r\n            event.title = event.title.substring(0, event.title.length - 20) + \" (\" + from24to12(moment(old_start).format('HH:mm')) + \" - \" + from24to12(moment(old_end).format('HH:mm')) + \")\";\r\n            window.calendar.setState({\r\n                viewModel: schedulerData\r\n            })\r\n        }\r\n\r\n        ReactDOM.render(\r\n            <ScheduleControlPopup\r\n                device_type={\"Edit Schedule: \" + slotName}\r\n                event_rrule={event.rrule}\r\n                event_start={start}\r\n                event_end={end}\r\n                event_name={event.title}\r\n                okButtonClicked={okButtonClicked}\r\n                cancelButtonClicked={cancelButtonClicked}\r\n                closeButtonClicked={closeButtonClicked}\r\n                deleteButtonClicked={deleteButtonClicked}\r\n            />, document.getElementById(\"popup-container-schedule\")\r\n        )\r\n    }\r\n\r\n    conflictOccurred = (schedulerData, action, event, type, slotId, slotName, start, end) => {\r\n        console.log(action)\r\n        console.log(type)\r\n        ReactDOM.render(\r\n            <OnlyAlert\r\n                message={\"This is conflicting with a schedule set for \" + slotName + \".\"}\r\n                onOK={function() {\r\n                    ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"))\r\n                }}\r\n            />, document.getElementById(\"confirm-alert\")\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withDragDropContext(Calendar);","import React, {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport ConfirmAlert from './ConfirmAlert';\r\nimport Calendar from './Calendar';\r\n\r\nfunction compare(a,b) {\r\n    let comparison = 0;\r\n    if (a.device_type > b.device_type) {\r\n        comparison = 1;\r\n    } else if (a.device_type < b.device_type) {\r\n        comparison = -1\r\n    }\r\n    return comparison\r\n}\r\n\r\n// Remote Control\r\n\r\nfunction fetchData() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"remote-control\"))\r\n    ReactDOM.render(<RemoteControlDashboard />, document.getElementById(\"remote-control\"))\r\n    setTimeout(fetchData, 5000)\r\n    console.log(\"UPDATE\")\r\n}\r\n\r\nclass RemoteControlDashboard extends Component {\r\n    state = {\r\n        books: [],\r\n        current_user_id: 1,\r\n        retrieving: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data from database\r\n        fetch('http://127.0.0.1:8000/control_interface/api/remote/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            data.sort(compare);\r\n            var datas = []\r\n            for (var input of data) {\r\n                if (input.user_id === this.state.current_user_id) {\r\n                    datas.push(input)\r\n                }\r\n            }\r\n            this.setState({books: datas})\r\n        })\r\n//        this.interval = setInterval(this.fetchData, 5000);\r\n//        this.fetchData();\r\n    }\r\n\r\n//    fetchData = () => {\r\n//        if (this.state.retrieving) return;\r\n//        this.setState({retrieving:true});\r\n//        fetch('http://127.0.0.1:8000/control_interface/api/remote/')\r\n//        .then(response => response.json())\r\n//        .then(data => {\r\n//            data.sort(compare);\r\n//            var datas = []\r\n//            for (var input of data) {\r\n//                if (input.user_id === this.state.current_user_id) {\r\n//                    datas.push(input)\r\n//                }\r\n//            }\r\n//            this.setState({books: datas}, function() {console.log(this.state.books)})\r\n//            console.log(\"Update!\")\r\n//        })\r\n//\r\n//        .finally(() => this.setState({retrieving:false}))\r\n//\r\n//        setTimeout(this.fetchData, 5000);\r\n//\r\n//    }\r\n\r\n    updateBook = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/remote/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook)\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({books: newBooks});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        console.log(\"Render again\")\r\n        console.log(this.state.books)\r\n        return (\r\n            <>\r\n                <div id=\"remote_control_space\">\r\n                    <RemoteControlList\r\n                        books={this.state.books}\r\n                        onUpdateClick={this.updateBook}\r\n                    />\r\n                </div>\r\n                <p style={{float:\"right\"}}> Note: It will take around 5 seconds for your devices to be switched ON/OFF. </p>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass RemoteControlList extends Component {\r\n    render() {\r\n        const books = this.props.books.map(book => (\r\n            <RemoteControlEditableItem\r\n                key={book.id}\r\n                id={book.id}\r\n                user_id={book.user_id}\r\n                device_type={book.device_type}\r\n                device_state={book.device_state}\r\n                onUpdateClick={this.props.onUpdateClick}\r\n            />\r\n        ));\r\n        return (\r\n            <>\r\n                <div style={{float:\"right\"}}>\r\n                    <p style={{marginLeft:\"50px\", marginBottom:\"5px\"}}> Master </p>\r\n                    <RemoteToggleButton id=\"master\" defaultChecked={true} books={this.props.books} />\r\n                </div>\r\n                <br/>\r\n                <br/>\r\n                <div style={{margin:\"auto\", width:\"fit-content\"}}>\r\n                    {books}\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass RemoteControlEditableItem extends Component {\r\n    handleUpdate = (book) => {\r\n        book.id = this.props.id;\r\n        this.props.onUpdateClick(book);\r\n    }\r\n\r\n    render() {\r\n        const component = () => {\r\n            return (\r\n                <>\r\n                    <RemoteControlItem\r\n                        id={this.props.id}\r\n                        user_id={this.props.user_id}\r\n                        device_type={this.props.device_type}\r\n                        device_state={this.props.device_state}\r\n                        onFormSubmit={this.handleUpdate}\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        return (\r\n            component()\r\n        )\r\n    }\r\n}\r\n\r\nclass RemoteControlItem extends Component {\r\n    state = {\r\n        user_id: this.props.user_id,\r\n        device_type: this.props.device_type,\r\n        device_state: this.props.device_state,\r\n        achievements_books: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data for achievements\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            for (var input of data) {\r\n                if (input.user_id === this.state.user_id) {\r\n                    this.setState({achievements_books: [input]})\r\n                }\r\n            }\r\n        })\r\n\r\n        Main();\r\n    }\r\n\r\n    updateAchievementsBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    handleAchievementsUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updateAchievementsBooks(book);\r\n    }\r\n\r\n    handleAchievementsFormSubmit = () => {\r\n        this.handleAchievementsUpdate(this.state.achievements_books[0])\r\n    }\r\n\r\n    handleFormSubmit = () => {\r\n        this.props.onFormSubmit({...this.state});\r\n    }\r\n\r\n    onConfirm1 = () => {\r\n        var to_be_confirmed = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_confirmed).checked = false;\r\n        this.setState({device_state: false}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n        Main();\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_remote === 0) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_remote: 60\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n        }\r\n    }\r\n\r\n    onConfirm2 = () => {\r\n        var to_be_confirmed = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_confirmed).checked = true;\r\n        this.setState({device_state: true}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n        Main();\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_remote === 0) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_remote: 60\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n        }\r\n    }\r\n\r\n    onCancel1 = () => {\r\n        var to_be_cancelled = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_cancelled).checked = true;\r\n        this.setState({device_state: true}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel2 = () => {\r\n        var to_be_cancelled = this.state.device_type + \"ToggleRemote\";\r\n        document.getElementById(to_be_cancelled).checked = false;\r\n        this.setState({device_state: false}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onChange = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.device_type === \"Desktop\" || this.state.device_type === \"Laptop\") {\r\n            if (this.state.device_state === true) {\r\n                if (document.getElementById(\"confirm-alert\").childNodes.length > 0) {\r\n                    // Switch OFF\r\n                    this.setState({device_state: false}, function() {this.handleFormSubmit()})\r\n                } else {\r\n                    ReactDOM.render(<ConfirmAlert\r\n                                        message={\"You are switching off your \" + this.state.device_type + \".\"}\r\n                                        onConfirm = {this.onConfirm1}\r\n                                        onCancel = {this.onCancel1}\r\n                                    />, document.getElementById(\"confirm-alert\"))\r\n                }\r\n            } else {\r\n                if (document.getElementById(\"confirm-alert\").childNodes.length > 0) {\r\n                    // Switch ON\r\n                    this.setState({device_state: true}, function() {this.handleFormSubmit()})\r\n                } else {\r\n                    ReactDOM.render(<ConfirmAlert\r\n                                        message={\"You are switching on your \" + this.state.device_type + \".\"}\r\n                                        onConfirm = {this.onConfirm2}\r\n                                        onCancel = {this.onCancel2}\r\n                                    />, document.getElementById(\"confirm-alert\"))\r\n                }\r\n            }\r\n        } else {\r\n            // Update database\r\n            this.setState({device_state: e.target.checked}, function() {this.handleFormSubmit()})\r\n            Main();\r\n\r\n            // If first time clicking, update achievement\r\n            if (this.state.achievements_books[0].first_remote === 0) {\r\n                this.setState({\r\n                    achievements_books: [\r\n                        {\r\n                            ...this.state.achievements_books[0],\r\n                            first_remote: 60\r\n                        }\r\n                    ]\r\n                }, function() {this.handleAchievementsFormSubmit()})\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.state.device_state === false) {\r\n            var remote_control_outer_ring = \"greyRing\";\r\n            var remote_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" OFF.png\";\r\n        } else {\r\n            remote_control_outer_ring = \"greenRing\";\r\n            remote_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" ON.png\";\r\n        }\r\n\r\n        return (\r\n            <div id={this.state.device_type.replace(/\\s/g,'') + \"BoxRemote\"} className=\"containerRemote\">\r\n                <p style={{textAlign:\"center\", fontWeight:\"bold\", color:\"black\"}}> {this.state.device_type} </p>\r\n                <div id={this.state.device_type.replace(/\\s/g,'') + \"IconRemote\"}>\r\n                    <div class={remote_control_outer_ring}>\r\n                        <div class=\"whiteRing\">\r\n                            <img class=\"PlugLoadIcon\" src={remote_control_image} alt=\"Icon\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br/>\r\n                <div className=\"toggle-switch\">\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        className=\"toggle-switch-checkbox\"\r\n                        id={this.state.device_type.replace(/\\s/g,'') + \"ToggleRemote\"}\r\n                        checked={this.state.device_state}\r\n                        defaultChecked={this.state.device_state}\r\n                        onChange={this.onChange}\r\n                    />\r\n                    <label className=\"toggle-switch-label\" htmlFor={this.state.device_type.replace(/\\s/g,'') + \"ToggleRemote\"}>\r\n                        <span className=\"toggle-switch-inner\" data-yes=\"ON\" data-no=\"OFF\" />\r\n                        <span className=\"toggle-switch-switch\" />\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass RemoteToggleButton extends Component {\r\n    state = {\r\n        checked: this.props.defaultChecked\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        window.master = this;\r\n    }\r\n\r\n    onConfirm1 = () => {\r\n        // Switch OFF all plug loads\r\n        if (document.getElementById(\"DesktopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"DesktopToggleRemote\").checked === true) {\r\n                document.getElementById(\"DesktopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"MonitorToggleRemote\") !== null) {\r\n            if (document.getElementById(\"MonitorToggleRemote\").checked === true) {\r\n                document.getElementById(\"MonitorToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"LaptopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"LaptopToggleRemote\").checked === true) {\r\n                document.getElementById(\"LaptopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"TaskLampToggleRemote\") !== null) {\r\n            if (document.getElementById(\"TaskLampToggleRemote\").checked === true) {\r\n                document.getElementById(\"TaskLampToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"FanToggleRemote\") !== null) {\r\n            if (document.getElementById(\"FanToggleRemote\").checked === true) {\r\n                document.getElementById(\"FanToggleRemote\").click();\r\n            }\r\n        }\r\n        document.getElementById(\"master\").checked = false;\r\n        this.setState({checked: false})\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onConfirm2 = () => {\r\n        // Switch ON all plug loads\r\n        if (document.getElementById(\"DesktopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"DesktopToggleRemote\").checked === false) {\r\n                document.getElementById(\"DesktopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"MonitorToggleRemote\") !== null) {\r\n            if (document.getElementById(\"MonitorToggleRemote\").checked === false) {\r\n                document.getElementById(\"MonitorToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"LaptopToggleRemote\") !== null) {\r\n            if (document.getElementById(\"LaptopToggleRemote\").checked === false) {\r\n                document.getElementById(\"LaptopToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"TaskLampToggleRemote\") !== null) {\r\n            if (document.getElementById(\"TaskLampToggleRemote\").checked === false) {\r\n                document.getElementById(\"TaskLampToggleRemote\").click();\r\n            }\r\n        }\r\n        if (document.getElementById(\"FanToggleRemote\") !== null) {\r\n            if (document.getElementById(\"FanToggleRemote\").checked === false) {\r\n                document.getElementById(\"FanToggleRemote\").click();\r\n            }\r\n        }\r\n        document.getElementById(\"master\").checked = true;\r\n        this.setState({checked: true});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel1 = () => {\r\n        document.getElementById(\"master\").checked = true;\r\n        this.setState({checked: true});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onCancel2 = () => {\r\n        document.getElementById(\"master\").checked = false;\r\n        this.setState({checked: false});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    onChange = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.checked === true) {\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message=\"You are switching off all your devices.\"\r\n                                onConfirm = {this.onConfirm1}\r\n                                onCancel = {this.onCancel1}\r\n                             />, document.getElementById(\"confirm-alert\"))\r\n        } else {\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message=\"You are switching on all your devices.\"\r\n                                onConfirm = {this.onConfirm2}\r\n                                onCancel = {this.onCancel2}\r\n                            />, document.getElementById(\"confirm-alert\"))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var defaultChecked = false\r\n        for (var book of this.props.books) {\r\n            if (book.device_state === true) {\r\n                defaultChecked = true\r\n            }\r\n        }\r\n        return (\r\n            <div className={\"toggle-switch\" + (this.props.Small ? \" small-switch\" : \"\")}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    name={this.props.Name}\r\n                    className=\"toggle-switch-checkbox\"\r\n                    id={this.props.id}\r\n                    checked={this.checked}\r\n                    defaultChecked={defaultChecked}\r\n                    onClick={this.onChange}\r\n                    disabled={this.props.disabled}\r\n                />\r\n                {this.props.id ? (\r\n                    <label className=\"toggle-switch-label\" htmlFor={this.props.id}>\r\n                        <span\r\n                            className={this.props.disabled ? \"toggle-switch-inner toggle-switch-disabled\" : \"toggle-switch-inner\"}\r\n                            data-yes=\"ON\"\r\n                            data-no=\"OFF\"\r\n                        />\r\n                        <span\r\n                            className={this.props.disabled ? \"toggle-switch-switch toggle-switch-disabled\": \"toggle-switch-switch\"}\r\n                        />\r\n                    </label>\r\n                ) : null}\r\n          </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<RemoteControlDashboard />, document.getElementById('remote-control'))\r\n\r\nfetchData();\r\n\r\nfunction Main() {\r\n    // If at least one plug load is ON, master button is automatically toggled to ON.\r\n    if (document.getElementById(\"DesktopToggleRemote\").checked || document.getElementById(\"MonitorToggleRemote\").checked ||\r\n        document.getElementById(\"LaptopToggleRemote\").checked || document.getElementById(\"TaskLampToggleRemote\").checked ||\r\n        document.getElementById(\"FanToggleRemote\").checked) {\r\n        window.master.setState({checked: true});\r\n        document.getElementById(\"master\").checked = true;\r\n    } else {\r\n        // If all plug loads are OFF, master button is automatically toggled to OFF.\r\n        if (!document.getElementById(\"DesktopToggleRemote\").checked && !document.getElementById(\"MonitorToggleRemote\").checked &&\r\n            !document.getElementById(\"LaptopToggleRemote\").checked && !document.getElementById(\"TaskLampToggleRemote\").checked &&\r\n            !document.getElementById(\"FanToggleRemote\").checked) {\r\n            window.master.setState({checked: false});\r\n            document.getElementById(\"master\").checked = false;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n// Schedule Based control\r\n\r\nfunction sort_events(a,b) {\r\n    let comparison = 0;\r\n    if (a.start > b.start) {\r\n        comparison = 1;\r\n    } else if (a.start < b.start) {\r\n        comparison = -1\r\n    }\r\n    return comparison\r\n}\r\n\r\nfunction from24to12(hour) {\r\n    var new_hour = Number(hour.substring(0,2));\r\n    var am_or_pm = new_hour >= 12 ? \"PM\" : \"AM\";\r\n    new_hour = (new_hour % 12) || 12;\r\n    var finalTime = new_hour + \":\" + hour.substring(3,5) + \" \" + am_or_pm;\r\n\r\n    if (finalTime.length !== 8) {\r\n        finalTime = \"0\" + finalTime\r\n    }\r\n    return (finalTime);\r\n}\r\n\r\nfunction getDates() {\r\n    var today = new Date();\r\n    var mondayDate = new Date();\r\n    var tuesdayDate = new Date();\r\n    var wednesdayDate = new Date();\r\n    var thursdayDate = new Date();\r\n    var fridayDate = new Date();\r\n    var saturdayDate = new Date();\r\n    var sundayDate = new Date();\r\n\r\n    if (today.getDay() === 0) {\r\n        // Today is Sunday\r\n        mondayDate.setDate(today.getDate() - 6);\r\n        tuesdayDate.setDate(today.getDate() - 5);\r\n        wednesdayDate.setDate(today.getDate() - 4);\r\n        thursdayDate.setDate(today.getDate() - 3);\r\n        fridayDate.setDate(today.getDate() - 2);\r\n        saturdayDate.setDate(today.getDate() - 1);\r\n        sundayDate.setDate(today.getDate());\r\n    } else {\r\n        mondayDate.setDate(today.getDate() + (1 - today.getDay()));\r\n        tuesdayDate.setDate(today.getDate() + (2 - today.getDay()));\r\n        wednesdayDate.setDate(today.getDate() + (3 - today.getDay()));\r\n        thursdayDate.setDate(today.getDate() + (4 - today.getDay()));\r\n        fridayDate.setDate(today.getDate() + (5 - today.getDay()));\r\n        saturdayDate.setDate(today.getDate() + (6 - today.getDay()));\r\n        sundayDate.setDate(today.getDate() + (7 - today.getDay()));\r\n    }\r\n\r\n    mondayDate = mondayDate.getFullYear() + \"-\" + ((mondayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (mondayDate.getMonth() + 1).toString() : (mondayDate.getMonth() + 1)) + \"-\" + (mondayDate.getDate().toString().length === 1 ? \"0\" + mondayDate.getDate().toString() : mondayDate.getDate())\r\n    tuesdayDate = tuesdayDate.getFullYear() + \"-\" + ((tuesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (tuesdayDate.getMonth() + 1).toString() : (tuesdayDate.getMonth() + 1)) + \"-\" + (tuesdayDate.getDate().toString().length === 1 ? \"0\" + tuesdayDate.getDate().toString() : tuesdayDate.getDate())\r\n    wednesdayDate = wednesdayDate.getFullYear() + \"-\" + ((wednesdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (wednesdayDate.getMonth() + 1).toString() : (wednesdayDate.getMonth() + 1)) + \"-\" + (wednesdayDate.getDate().toString().length === 1 ? \"0\" + wednesdayDate.getDate().toString() : wednesdayDate.getDate())\r\n    thursdayDate = thursdayDate.getFullYear() + \"-\" + ((thursdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (thursdayDate.getMonth() + 1).toString() : (thursdayDate.getMonth() + 1))  + \"-\" + (thursdayDate.getDate().toString().length === 1 ? \"0\" + thursdayDate.getDate().toString() : thursdayDate.getDate())\r\n    fridayDate = fridayDate.getFullYear() + \"-\" + ((fridayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (fridayDate.getMonth() + 1).toString() : (fridayDate.getMonth() + 1)) + \"-\" + (fridayDate.getDate().toString().length === 1 ? \"0\" + fridayDate.getDate().toString() : fridayDate.getDate())\r\n    saturdayDate = saturdayDate.getFullYear() + \"-\" + ((saturdayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (saturdayDate.getMonth() + 1).toString() : (saturdayDate.getMonth() + 1)) + \"-\" + (saturdayDate.getDate().toString().length === 1 ? \"0\" + saturdayDate.getDate().toString() : saturdayDate.getDate())\r\n    sundayDate = sundayDate.getFullYear() + \"-\" + ((sundayDate.getMonth() + 1).toString().length === 1 ? \"0\" + (sundayDate.getMonth() + 1).toString() : (sundayDate.getMonth() + 1)) + \"-\" + (sundayDate.getDate().toString().length === 1 ? \"0\" + sundayDate.getDate().toString() : sundayDate.getDate())\r\n\r\n    return([mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate])\r\n}\r\n\r\nclass ScheduleControlDashboard extends Component {\r\n    state = {\r\n        events: [],\r\n        current_user_id: 1,\r\n        dates: [],\r\n        chosen_day: \"\",\r\n        books: [],\r\n        state: true,\r\n        database_count: 0\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data from database\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({books: data})\r\n            var events_datas = [];\r\n            for (var input of data) {\r\n                if (input.user_id === this.state.current_user_id) {\r\n\r\n                    var resourceId = input.device_type_id;\r\n                    var eventId = input.event_id;\r\n                    var event_start = input.event_start;\r\n                    var event_end = input.event_end;\r\n\r\n                    // Format the title to be shown for each event on the scheduler\r\n                    var finalStart = from24to12(event_start);\r\n                    var finalEnd = from24to12(event_end)\r\n                    var event_name = input.event_name + \" (\" + finalStart + \" - \" + finalEnd + \")\"\r\n\r\n                    var [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate] = getDates();\r\n                    var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + mondayDate.substring(0,4) + mondayDate.substring(5,7) + mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" + sundayDate.substring(0,4) + sundayDate.substring(5,7) + sundayDate.substring(8,10) + \"T235900Z;BYDAY=\";\r\n                    event_start = mondayDate + \" \" + event_start;\r\n                    event_end = mondayDate + \" \" + event_end;\r\n                    if (input.event_rrule === \"Daily\") {\r\n                        event_rrule = \"FREQ=DAILY;DTSTART=\" + mondayDate.substring(0,4) + mondayDate.substring(5,7) + mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" + sundayDate.substring(0,4) + sundayDate.substring(5,7) + sundayDate.substring(8,10) + \"T235900Z\";\r\n\r\n                    } else {\r\n                        if (input.event_rrule.includes(\"Monday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"MO\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",MO\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Tuesday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"TU\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",TU\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Wednesday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"WE\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",WE\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Thursday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"TH\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",TH\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Friday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"FR\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",FR\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Saturday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"SA\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",SA\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Sunday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"SU\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",SU\";\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Set the events for the scheduler\r\n                    events_datas.push({id: eventId, start: event_start, end: event_end, title: event_name, rrule: event_rrule, resourceId: resourceId, showPopover: false, bgColor: '#06D6A0', database_id: input.id})\r\n\r\n                    // Open the calendar for today\r\n                    const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n                    var today = new Date();\r\n                    var wanted_id = days[today.getDay()] + \"Calendar\";\r\n                    document.getElementById(wanted_id).className=\"selected\";\r\n                    setTimeout(function() {document.getElementById(wanted_id).click()}, 0.1)\r\n\r\n                    this.setState({database_count: this.state.database_count + 1})\r\n                }\r\n            }\r\n            events_datas.sort(sort_events)\r\n            this.setState({\r\n                events: events_datas,\r\n                dates: [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate]\r\n            })\r\n        })\r\n    }\r\n\r\n    refetchData = () => {\r\n        // Fetch data from database\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            this.setState({books: data})\r\n            var events_datas = [];\r\n            for (var input of data) {\r\n                if (input.user_id === this.state.current_user_id) {\r\n\r\n                    var resourceId = input.device_type_id;\r\n                    var eventId = input.event_id;\r\n                    var event_start = input.event_start;\r\n                    var event_end = input.event_end;\r\n\r\n                    // Format the title to be shown for each event on the scheduler\r\n                    var finalStart = from24to12(event_start);\r\n                    var finalEnd = from24to12(event_end)\r\n                    var event_name = input.event_name + \" (\" + finalStart + \" - \" + finalEnd + \")\"\r\n\r\n                    var [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate] = getDates();\r\n                    var event_rrule = \"FREQ=WEEKLY;DTSTART=\" + mondayDate.substring(0,4) + mondayDate.substring(5,7) + mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" + sundayDate.substring(0,4) + sundayDate.substring(5,7) + sundayDate.substring(8,10) + \"T235900Z;BYDAY=\";\r\n                    event_start = mondayDate + \" \" + event_start;\r\n                    event_end = mondayDate + \" \" + event_end;\r\n                    if (input.event_rrule === \"Daily\") {\r\n                        event_rrule = \"FREQ=DAILY;DTSTART=\" + mondayDate.substring(0,4) + mondayDate.substring(5,7) + mondayDate.substring(8,10) + \"T000000Z;UNTIL=\" + sundayDate.substring(0,4) + sundayDate.substring(5,7) + sundayDate.substring(8,10) + \"T235900Z\";\r\n\r\n                    } else {\r\n                        if (input.event_rrule.includes(\"Monday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"MO\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",MO\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Tuesday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"TU\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",TU\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Wednesday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"WE\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",WE\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Thursday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"TH\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",TH\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Friday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"FR\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",FR\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Saturday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"SA\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",SA\";\r\n                            }\r\n                        }\r\n                        if (input.event_rrule.includes(\"Sunday\")) {\r\n                            if (event_rrule.charAt(event_rrule.length-1) === \"=\") {\r\n                                event_rrule = event_rrule + \"SU\";\r\n                            } else {\r\n                                event_rrule = event_rrule + \",SU\";\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Set the events for the scheduler\r\n                    events_datas.push({id: eventId, start: event_start, end: event_end, title: event_name, rrule: event_rrule, resourceId: resourceId, showPopover: false, bgColor: '#06D6A0', database_id: input.id})\r\n                }\r\n            }\r\n            events_datas.sort(sort_events)\r\n            this.setState({\r\n                events: events_datas,\r\n                dates: [mondayDate, tuesdayDate, wednesdayDate, thursdayDate, fridayDate, saturdayDate, sundayDate],\r\n            })\r\n        })\r\n    }\r\n\r\n    createNewBook = (book) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(book),\r\n        })\r\n        .then(response => response.json())\r\n        .then(book => {\r\n            this.setState({books: this.state.books.concat([book])});\r\n        })\r\n    }\r\n\r\n    updateBook = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook)\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n\r\n            this.setState({books: newBooks});\r\n        })\r\n    }\r\n\r\n    deleteBook = (bookId) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/schedule/' + bookId + '/', {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n        })\r\n        .then(() => {\r\n            this.setState({books: this.state.books.filter(book => book.id !== bookId)})\r\n        })\r\n    }\r\n\r\n    removeCalendarHeader = () => {\r\n        document.getElementById(\"root\").childNodes[0].childNodes[0].childNodes[0].removeChild(document.getElementById(\"root\").childNodes[0].childNodes[0].childNodes[0].childNodes[0]);\r\n    }\r\n\r\n    addLines = () => {\r\n        document.getElementsByClassName(\"scheduler-bg-table\")[0].childNodes[0].childNodes[0].childNodes[23].style.borderRight = 0;\r\n\r\n        var i;\r\n        var j;\r\n        for (i=0; i<5; i++) {\r\n            for (j=3; j<93; j+=4) {\r\n                document.getElementsByClassName(\"scheduler-bg-table\")[1].childNodes[0].childNodes[i].childNodes[j].style.borderRight = \"1px solid #707070\";\r\n            }\r\n        }\r\n    }\r\n\r\n    chooseMonday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Monday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"selected\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[0]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Monday\"\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseTuesday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Tuesday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[1]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Tuesday\"\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseWednesday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Wednesday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[2]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Wednesday\"\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseThursday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Thursday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[3]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Thursday\"\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseFriday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Friday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"selected\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[4]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Friday\"\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseSaturday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Saturday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"selected\";\r\n        document.getElementById(\"SundayCalendar\").className = \"\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[5]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Saturday\"\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    chooseSunday = () => {\r\n        this.refetchData();\r\n        // Update chosen_day state\r\n        this.setState({chosen_day: \"Sunday\"})\r\n\r\n        // Adjust colour of tabs\r\n        document.getElementById(\"MondayCalendar\").className = \"\";\r\n        document.getElementById(\"TuesdayCalendar\").className = \"\";\r\n        document.getElementById(\"WednesdayCalendar\").className = \"\";\r\n        document.getElementById(\"ThursdayCalendar\").className = \"\";\r\n        document.getElementById(\"FridayCalendar\").className = \"\";\r\n        document.getElementById(\"SaturdayCalendar\").className = \"\";\r\n        document.getElementById(\"SundayCalendar\").className = \"selected\";\r\n\r\n        // Adjust calendar shown\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\r\n        ReactDOM.render(\r\n            <Calendar\r\n                refetchData={this.refetchData}\r\n                events={this.state.events}\r\n                date={this.state.dates[6]}\r\n                onDeleteClick={this.deleteBook}\r\n                onAddClick={this.createNewBook}\r\n                onUpdateClick={this.updateBook}\r\n                books={this.state.books}\r\n                mondayDate={this.state.dates[0]}\r\n                sundayDate={this.state.dates[6]}\r\n                day=\"Sunday\"\r\n            />, document.getElementById(\"root\"));\r\n        this.removeCalendarHeader();\r\n        this.addLines();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"tab\">\r\n                    <button id=\"MondayCalendar\" onClick={this.chooseMonday}> Monday </button>\r\n                    <button id=\"TuesdayCalendar\" onClick={this.chooseTuesday}> Tuesday </button>\r\n                    <button id=\"WednesdayCalendar\" onClick={this.chooseWednesday}> Wednesday </button>\r\n                    <button id=\"ThursdayCalendar\" onClick={this.chooseThursday}> Thursday </button>\r\n                    <button id=\"FridayCalendar\" onClick={this.chooseFriday}> Friday </button>\r\n                    <button id=\"SaturdayCalendar\" onClick={this.chooseSaturday}> Saturday </button>\r\n                    <button id=\"SundayCalendar\" onClick={this.chooseSunday}> Sunday </button>\r\n                </div>\r\n                <ScheduleControlItem\r\n                    refetchData={this.refetchData}\r\n                    events={this.state.events}\r\n                    dates={this.state.dates}\r\n                    onDeleteClick={this.deleteBook}\r\n                    onAddClick={this.createNewBook}\r\n                    onUpdateClick={this.updateBook}\r\n                    books={this.state.books}\r\n                    state={this.state.state}\r\n                    database_count={this.state.database_count}\r\n                />\r\n                <div id=\"popup-container-schedule\"> </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScheduleControlItem extends Component {\r\n    render() {\r\n        const days=[\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\r\n        var today = new Date()\r\n        var today_date = today.getFullYear() + \"-\" + ((today.getMonth() + 1).toString().length === 1 ? \"0\" + (today.getMonth() + 1).toString() : (today.getMonth() + 1)) + \"-\" + (today.getDate().toString().length === 1 ? \"0\" + today.getDate().toString() : today.getDate())\r\n        return (\r\n            <div id=\"root\">\r\n                <Calendar\r\n                    refetchData={this.props.refetchData}\r\n                    events={this.props.events}\r\n                    date={today_date}\r\n                    onDeleteClick={this.props.onDeleteClick}\r\n                    onAddClick={this.props.onAddClick}\r\n                    onUpdateClick={this.props.onUpdateClick}\r\n                    books={this.props.books}\r\n                    mondayDate={this.props.dates[0]}\r\n                    sundayDate={this.props.dates[6]}\r\n                    day={days[today.getDay()]}\r\n                    state={this.props.state}\r\n                    database_count={this.props.database_count}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<ScheduleControlDashboard />, document.getElementById('schedule-based-control'))\r\n\r\n// Presence Based Control\r\n\r\nclass PresenceControlDashboard extends Component {\r\n    state = {\r\n        books: [],\r\n        current_user_id: 1\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data from database\r\n        fetch('http://127.0.0.1:8000/control_interface/api/presence/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            data.sort(compare);\r\n            var datas = []\r\n            for (var input of data) {\r\n                if (input.user_id === this.state.current_user_id) {\r\n                    datas.push(input)\r\n                }\r\n            }\r\n            this.setState({books: datas})\r\n        })\r\n    }\r\n\r\n    updateBook = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/presence/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook)\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({books: newBooks});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n              <br/>\r\n\r\n                  <PresenceControlList\r\n                      books={this.state.books}\r\n                      onUpdateClick={this.updateBook}\r\n                  />\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nclass PresenceControlList extends Component {\r\n    render() {\r\n        const books = this.props.books.map(book => (\r\n            <PresenceControlEditableItem\r\n                key={book.id}\r\n                id={book.id}\r\n                user_id={book.user_id}\r\n                device_type={book.device_type}\r\n                presence_setting={book.presence_setting}\r\n                onUpdateClick={this.props.onUpdateClick}\r\n            />\r\n        ));\r\n        return (\r\n            <div class=\"plugloadboxes\">\r\n                {books}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass PresenceControlEditableItem extends Component {\r\n    handleUpdate = (book) => {\r\n        book.id = this.props.id;\r\n        this.props.onUpdateClick(book);\r\n    }\r\n\r\n    render() {\r\n        const component = () => {\r\n            return (\r\n                <>\r\n                    <PresenceControlItem\r\n                        id={this.props.id}\r\n                        user_id={this.props.user_id}\r\n                        device_type={this.props.device_type}\r\n                        presence_setting={this.props.presence_setting}\r\n                        onFormSubmit={this.handleUpdate}\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        return (\r\n            component()\r\n        )\r\n    }\r\n}\r\n\r\nclass PresenceControlItem extends Component {\r\n    state = {\r\n        user_id: this.props.user_id,\r\n        device_type: this.props.device_type,\r\n        presence_setting: this.props.presence_setting,\r\n        achievements_books: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch data for achievements\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            for (var input of data) {\r\n                if (input.user_id === this.state.user_id) {\r\n                    this.setState({achievements_books: [input]})\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    updateAchievementsBooks = (newBook) => {\r\n        fetch('http://127.0.0.1:8000/control_interface/api/achievements_bonus/' + newBook.id.toString() + '/', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newBook)\r\n        }).then(response => response.json())\r\n        .then(newBook => {\r\n            const newBooks = this.state.achievements_books.map(book => {\r\n                if (book.id === newBook.id) {\r\n                    return Object.assign({}, newBook);\r\n                } else {\r\n                    return book;\r\n                }\r\n            });\r\n            this.setState({achievements_books: newBooks})\r\n        })\r\n    }\r\n\r\n    handleAchievementsUpdate = (book) => {\r\n        book.id = this.props.user_id;\r\n        this.updateAchievementsBooks(book);\r\n    }\r\n\r\n    handleAchievementsFormSubmit = () => {\r\n        this.handleAchievementsUpdate(this.state.achievements_books[0])\r\n    }\r\n\r\n    onConfirm1 = () => {\r\n        // Update database\r\n        this.setState({presence_setting: \"1000000\"}, function() {this.handleFormSubmit()});\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_presence === false) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_presence: 70\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n        }\r\n    }\r\n\r\n    onCancel1 = () => {\r\n        document.getElementById(this.state.device_type.replace(/\\s/g, '') + \"Select\").value = this.state.presence_setting;\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    handleFormSubmit = () => {\r\n        this.props.onFormSubmit({...this.state});\r\n    }\r\n\r\n    handleSettingUpdate = (evt) => {\r\n        if (evt.target.value !== \"other\" && evt.target.value !== \"1000000\") {\r\n            // Hide popup\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n            // Update database\r\n            this.setState({presence_setting: evt.target.value}, function() {this.handleFormSubmit()})\r\n\r\n            // If first time clicking, update achievement\r\n            if (this.state.achievements_books[0].first_presence === 0) {\r\n                this.setState({\r\n                    achievements_books: [\r\n                        {\r\n                            ...this.state.achievements_books[0],\r\n                            first_presence: 70\r\n                        }\r\n                    ]\r\n                }, function() {this.handleAchievementsFormSubmit()})\r\n            }\r\n        }\r\n        if (evt.target.value === \"other\") {\r\n            // Show popup\r\n            ReactDOM.render(\r\n                <PresenceControlPopup\r\n                    device_type={this.state.device_type}\r\n                    handleOtherUpdate={this.handleOtherUpdate}\r\n                    handleEnterClick={this.handleEnterClick}\r\n                    cancelButtonClicked={this.cancelButtonClicked}\r\n                    okButtonClicked={this.okButtonClicked}\r\n                />, document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\")\r\n            )\r\n        }\r\n        if (evt.target.value === \"1000000\") {\r\n            // Hide popup\r\n            ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message={\"You are deactivating presence-based control for \" + this.state.device_type + \".\"}\r\n                                onConfirm = {this.onConfirm1}\r\n                                onCancel = {this.onCancel1}\r\n                            />, document.getElementById(\"confirm-alert\"))\r\n        }\r\n    }\r\n\r\n    handleOtherUpdate = (evt) => {\r\n        this.setState({presence_setting: evt.target.value});\r\n    }\r\n\r\n    handleEnterClick = (evt) => {\r\n        if (evt.key === \"Enter\" || evt.keyCode === 13) {\r\n            this.okButtonClicked();\r\n        }\r\n    }\r\n\r\n    onConfirm2 = () => {\r\n        // Change outer ring to red\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'')).className = \"redRing\";\r\n        // Change image to OFF\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'')).childNodes[0].childNodes[0].src = \"/static/Images/\" + this.state.device_type.toString() + \" OFF.png\";\r\n        // Set value to OFF\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = \"1000000\";\r\n        // Update database\r\n        this.setState({presence_setting: \"1000000\"}, function() {this.handleFormSubmit()})\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_presence === false) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_presence: true\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n        }\r\n    }\r\n\r\n    onCancel2 = () => {\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(\"confirm-alert\"));\r\n    }\r\n\r\n    handlePresenceIconClick = () => {\r\n        if (document.getElementById(this.state.device_type.replace(/\\s/g,'')).className === \"greenRing\") {\r\n            ReactDOM.render(<ConfirmAlert\r\n                                message={\"You are deactivating presence-based control for \" + this.state.device_type + \".\"}\r\n                                onConfirm = {this.onConfirm2}\r\n                                onCancel = {this.onCancel2}\r\n                            />, document.getElementById(\"confirm-alert\"))\r\n        } else {\r\n            // Change outer ring to green\r\n            document.getElementById(this.state.device_type.replace(/\\s/g,'')).className = \"greenRing\"\r\n            // Change image to ON\r\n            document.getElementById(this.state.device_type.replace(/\\s/g,'')).childNodes[0].childNodes[0].src = \"/static/Images/\" + this.state.device_type.toString() + \" ON.png\";\r\n            // Set value to 5 minutes\r\n            document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = \"5\";\r\n            // Update database\r\n            this.setState({presence_setting: \"5\"}, function() {this.handleFormSubmit()})\r\n\r\n            // If first time clicking, update achievement\r\n            if (this.state.achievements_books[0].first_presence === false) {\r\n                this.setState({\r\n                    achievements_books: [\r\n                        {\r\n                            ...this.state.achievements_books[0],\r\n                            first_presence: true\r\n                        }\r\n                    ]\r\n                }, function() {this.handleAchievementsFormSubmit()})\r\n            }\r\n        }\r\n    }\r\n\r\n    cancelButtonClicked = () => {\r\n        // Hide popup\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n        // Set value to 5 minutes\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = \"5\";\r\n        this.setState({presence_setting: 5}, function() {this.handleFormSubmit()})\r\n\r\n    }\r\n\r\n    okButtonClicked = () => {\r\n        // Display value on dropdown\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"Select\").value = document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"TextOther\").value;\r\n        // Clear text box on popup\r\n        document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"TextOther\").value = \"\";\r\n        // Hide popup\r\n        ReactDOM.unmountComponentAtNode(document.getElementById(this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"))\r\n        // Update database\r\n        this.handleFormSubmit();\r\n\r\n        // If first time clicking, update achievement\r\n        if (this.state.achievements_books[0].first_presence === false) {\r\n            this.setState({\r\n                achievements_books: [\r\n                    {\r\n                        ...this.state.achievements_books[0],\r\n                        first_presence: true\r\n                    }\r\n                ]\r\n            }, function() {this.handleAchievementsFormSubmit()})\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const possible_option = [\"1000000\", \"5\", \"10\", \"20\", \"30\", \"60\", \"other\"]\r\n        if (possible_option.includes(this.state.presence_setting.toString())) {\r\n            var disabled = true;\r\n            var display_value = \"\";\r\n            var display_text = \"\";\r\n        } else {\r\n            disabled = false;\r\n            display_value = this.state.presence_setting;\r\n            display_text = this.state.presence_setting + \" minutes\";\r\n        }\r\n\r\n        if (this.state.presence_setting.toString() === \"1000000\") {\r\n            var presence_control_outer_ring = \"redRing\";\r\n            var presence_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" OFF.png\";\r\n        } else {\r\n            presence_control_outer_ring = \"greenRing\";\r\n            presence_control_image = \"/static/Images/\" + this.state.device_type.toString() + \" ON.png\";\r\n        }\r\n\r\n        return (\r\n            <div id={this.state.device_type.replace(/\\s/g,'') + \"BoxPresence\"} className=\"containerPresence\" onClick={this.exitClick}>\r\n                <div className=\"iconPresence\">\r\n                    <div className={presence_control_outer_ring} id={this.state.device_type.replace(/\\s/g,'')} onClick={this.handlePresenceIconClick}>\r\n                        <div className=\"whiteRing\">\r\n                            <img class=\"PlugLoadIcon\" src={presence_control_image} alt=\"Icon\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{width:\"200px\", height:\"10px\", overflowY:\"visible\"}}>\r\n                    <div style={{position:\"relative\", width:\"200px\", height:\"1px\", overflowY:\"visible\"}}>\r\n                        <div className=\"dropdownPresence\" id={this.state.device_type.replace(/\\s/g,'') + \"Dropdown\"}>\r\n                            <div class=\"wordPresence\">\r\n                                <p> {this.state.device_type} </p>\r\n                            </div>\r\n                            <select defaultValue={this.state.presence_setting} onChange={this.handleSettingUpdate} id={this.state.device_type.replace(/\\s/g,'') + \"Select\"}>\r\n                                <option value=\"1000000\"> Deactivate </option>\r\n                                <optgroup label=\"Off after I leave for:\">\r\n                                    <option value=\"5\"> 5 minutes </option>\r\n                                    <option value=\"10\"> 10 minutes </option>\r\n                                    <option value=\"20\"> 20 minutes </option>\r\n                                    <option value=\"30\"> 30 minutes </option>\r\n                                    <option value=\"60\"> 1 hour </option>\r\n                                    <option value=\"other\"> Custom Time </option>\r\n                                </optgroup>\r\n                                <option value={display_value} disabled={disabled}> {display_text} </option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div id={this.state.device_type.replace(/\\s/g,'') + \"PopupPresenceBox\"}> </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass PresenceControlPopup extends Component {\r\n    exitClick = () => {\r\n        this.props.cancelButtonClicked();\r\n    }\r\n    render() {\r\n        return (\r\n        <>\r\n            <div id=\"PopupPresenceOverlay\" className=\"popup_presence_overlay\" onClick={this.exitClick}></div>\r\n            <div id={this.props.device_type.replace(/\\s/g,'') + \"PopupPresence\"} className=\"visiblePresence\">\r\n                <input type=\"text\" id={this.props.device_type.replace(/\\s/g,'') + \"TextOther\"} onChange={this.props.handleOtherUpdate} onKeyUp={this.props.handleEnterClick} />\r\n                <p class=\"minutes\"> minutes </p>\r\n                <br />\r\n                <button id={this.props.device_type.replace(/\\s/g,'') + \"CancelButton\"} onClick={this.props.cancelButtonClicked}> Cancel </button>\r\n                <button id={this.props.device_type.replace(/\\s/g,'') + \"OkButton\"} onClick={this.props.okButtonClicked}> OK </button>\r\n            </div>\r\n        </>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<PresenceControlDashboard />, document.getElementById('presence-based-control'))\r\n\r\n// Others\r\n\r\n// Information icons\r\nvar remotecontrolelement = document.getElementById(\"remotecontrolrect\");\r\nvar infoiconremote = document.getElementById(\"infoIconRemote\");\r\nvar scheduleelement = document.getElementById(\"schedulebasedrect\");\r\nvar infoiconschedule = document.getElementById(\"infoIcon\");\r\nvar presenceelement = document.getElementById(\"presencebasedrect\");\r\nvar infoiconpresence = document.getElementById(\"infoIconPresence\");\r\n\r\nwindow.onload = function() {\r\n  let remotecontrolelemRect = remotecontrolelement.getBoundingClientRect();\r\n  let infoiconremoteRect = infoiconremote.getBoundingClientRect();\r\n  let offsetremote = remotecontrolelemRect.right - infoiconremoteRect.right - 10;\r\n  infoiconremote.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxRemote\"}>\r\n          <p style={{color:\"black\"}}> This control feature allows you to manually switch your plug loads ON / OFF wirelessly without having to be physically present at your desk. </p>\r\n        </div>, document.getElementById(\"infoBoxRemote\"));\r\n    document.getElementById(\"informationBoxRemote\").style.width = offsetremote.toString() + \"px\";\r\n    }\r\n  infoiconremote.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxRemote\"));\r\n  }\r\n  let scheduleelemRect = scheduleelement.getBoundingClientRect();\r\n  let infoiconscheduleRect = infoiconschedule.getBoundingClientRect();\r\n  let offsetschedule = scheduleelemRect.right - infoiconscheduleRect.right - 10;\r\n  infoiconschedule.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBox\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps you to automatically switch ON / OFF your plug loads based on a specific schedule that you have defined. </p>\r\n        </div>, document.getElementById(\"infoBox\"));\r\n    document.getElementById(\"informationBox\").style.width = offsetschedule.toString() + \"px\";\r\n    }\r\n  infoiconschedule.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBox\"));\r\n  }\r\n  let presenceelemRect = presenceelement.getBoundingClientRect();\r\n  let infoiconpresenceRect = infoiconpresence.getBoundingClientRect();\r\n  let offsetpresence = presenceelemRect.right - infoiconpresenceRect.right - 10;\r\n  infoiconpresence.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxPresence\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps to automatically switch ON your devices when you arrive at your desk and switch them OFF after you have left your desk after some time. </p>\r\n        </div>, document.getElementById(\"infoBoxPresence\"));\r\n    document.getElementById(\"informationBoxPresence\").style.width = offsetpresence.toString() + \"px\";\r\n    }\r\n  infoiconpresence.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxPresence\"));\r\n  }\r\n}\r\n\r\nwindow.onresize = function() {\r\n\r\n  let remotecontrolelemRect = remotecontrolelement.getBoundingClientRect();\r\n  let infoiconremoteRect = infoiconremote.getBoundingClientRect();\r\n  let offsetremote = remotecontrolelemRect.right - infoiconremoteRect.right - 10;\r\n  infoiconremote.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxRemote\"}>\r\n          <p style={{color:\"black\"}}> This control feature allows you to manually switch your plug loads ON / OFF wirelessly without having to be physically present at your desk. </p>\r\n        </div>, document.getElementById(\"infoBoxRemote\"));\r\n    document.getElementById(\"informationBoxRemote\").style.width = offsetremote.toString() + \"px\";\r\n    }\r\n  infoiconremote.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxRemote\"));\r\n  }\r\n  let scheduleelemRect = scheduleelement.getBoundingClientRect();\r\n  let infoiconscheduleRect = infoiconschedule.getBoundingClientRect();\r\n  let offsetschedule = scheduleelemRect.right - infoiconscheduleRect.right - 10;\r\n  infoiconschedule.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBox\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps you to automatically switch ON / OFF your plug loads based on a specific schedule that you have defined. </p>\r\n        </div>, document.getElementById(\"infoBox\"));\r\n    document.getElementById(\"informationBox\").style.width = offsetschedule.toString() + \"px\";\r\n    }\r\n  infoiconschedule.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBox\"));\r\n  }\r\n  let presenceelemRect = presenceelement.getBoundingClientRect();\r\n  let infoiconpresenceRect = infoiconpresence.getBoundingClientRect();\r\n  let offsetpresence = presenceelemRect.right - infoiconpresenceRect.right - 10;\r\n  infoiconpresence.onmouseover = function() {\r\n    ReactDOM.render(\r\n        <div id={\"informationBoxPresence\"}>\r\n          <p style={{color:\"black\"}}> This control feature helps to automatically switch ON your devices when you arrive at your desk and switch them OFF after you have left your desk after some time. </p>\r\n        </div>, document.getElementById(\"infoBoxPresence\"));\r\n    document.getElementById(\"informationBoxPresence\").style.width = offsetpresence.toString() + \"px\";\r\n    }\r\n  infoiconpresence.onmouseout = function() {\r\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"infoBoxPresence\"));\r\n  }\r\n}\r\n\r\n// Fix for Google Chrome\r\nvar isChromium = window.chrome;\r\nvar winNav = window.navigator;\r\nvar vendorName = winNav.vendor;\r\nvar isOpera = typeof window.opr !== \"undefined\";\r\nvar isIEedge = winNav.userAgent.indexOf(\"Edge\") > -1;\r\nvar isIOSChrome = winNav.userAgent.match(\"CriOS\");\r\n\r\nif (isIOSChrome) {\r\n   // is Google Chrome on IOS\r\n   document.onkeydown = function(event) {\r\nif (event.ctrlKey===true || (event.which === '61' || event.which === '107' || event.which === '173' || event.which === '109'  || event.which === '187'  || event.which === '189'  ) ) {\r\n        event.preventDefault();\r\n     }\r\n    // 107 Num Key  +\r\n    // 109 Num Key  -\r\n    // 173 Min Key  hyphen/underscore key\r\n    // 61 Plus key  +/= key\r\n};\r\n} else if(\r\n  isChromium !== null &&\r\n  typeof isChromium !== \"undefined\" &&\r\n  vendorName === \"Google Inc.\" &&\r\n  isOpera === false &&\r\n  isIEedge === false\r\n) {\r\n   // is Google Chrome\r\n   document.onkeydown = function(event) {\r\nif (event.ctrlKey === true || (event.which === '61' || event.which === '107' || event.which === '173' || event.which === '109'  || event.which === '187'  || event.which === '189'  ) ) {\r\n        event.preventDefault();\r\n     }\r\n    // 107 Num Key  +\r\n    // 109 Num Key  -\r\n    // 173 Min Key  hyphen/underscore key\r\n    // 61 Plus key  +/= key\r\n};\r\n} else {\r\n   // not Google Chrome\r\n}\r\n\r\n"],"sourceRoot":""}